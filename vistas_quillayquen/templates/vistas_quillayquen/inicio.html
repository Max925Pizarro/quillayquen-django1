{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <style>
    /* --- PROFESIONALIZACIÓN GLOBAL --- */
    body {
        background: #f8faff;
        color: #1a237e;
        font-family: 'Poppins', 'Montserrat', Arial, sans-serif;
        font-size: 1.08rem;
        letter-spacing: 0.01em;
    }
    header {
        background: linear-gradient(90deg, #0033cc 60%, #225fa8 100%);
        box-shadow: 0 4px 18px rgba(0,51,204,0.10);
        border-bottom-left-radius: 18px;
        border-bottom-right-radius: 18px;
    }
    .navbar-title {
        font-family: 'Montserrat', sans-serif;
        font-size: 1.25rem;
        font-weight: 700;
        color: #fff;
        letter-spacing: 1px;
        text-shadow: 0 2px 8px #0033cc22;
    }
    .logo img {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        border: 2.5px solid #fff;
        box-shadow: 0 2px 8px #0033cc22;
        background: #fff;
    }
    .nav-btn {
        border-radius: 18px;
        font-size: 1.08rem;
        font-weight: 600;
        padding: 10px 22px;
        background: #f4f8ff;
        color: #0033cc;
        border: 1.5px solid #e3e8f0;
        margin: 0 6px;
        box-shadow: 0 2px 8px #0033cc11;
        transition: background 0.2s, color 0.2s, box-shadow 0.2s;
    }
    .nav-btn:hover, .nav-btn:focus {
        background: #e6edfa;
        color: #1e40af;
        box-shadow: 0 4px 16px #0033cc22;
    }
    .nav-btn.active {
        background: #0033cc;
        color: #fff;
        border-color: #0033cc;
    }
    .carousel {
        border-radius: 18px;
        box-shadow: 0 8px 32px #0033cc18;
        margin-bottom: 32px;
    }
    .carousel-item img {
        border-radius: 18px;
        object-fit: cover;
        min-height: 220px;
        max-height: 400px;
    }
    .carousel-caption {
        background: rgba(0, 51, 204, 0.10);
        border-radius: 14px;
        padding: 18px 24px;
        color: #0033cc;
        box-shadow: 0 2px 8px #0033cc22;
    }
    .content-section {
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 4px 18px #0033cc11;
        padding: 40px 0 32px 0;
        margin-bottom: 32px;
    }
    .titulo-seccion {
        font-family: 'Montserrat', sans-serif;
        font-size: 1.5rem;
        font-weight: 700;
        color: #0033cc;
        margin-bottom: 18px;
        letter-spacing: 1px;
        text-align: center;
    }
    .descripcion {
        color: #222;
        font-size: 1.08rem;
        margin-bottom: 18px;
    }
    .tarjetas-wrapper {
        display: flex;
        flex-wrap: wrap;
        gap: 24px;
        justify-content: center;
    }
    .tarjeta-servicio {
        background: #f8faff;
        border-radius: 16px;
        box-shadow: 0 4px 18px #0033cc11;
        padding: 28px 18px 18px 18px;
        min-width: 220px;
        max-width: 320px;
        flex: 1 1 220px;
        text-align: center;
        transition: box-shadow 0.2s, transform 0.2s;
    }
    .tarjeta-servicio:hover {
        box-shadow: 0 8px 32px #0033cc22;
        transform: translateY(-4px) scale(1.03);
    }
    .tarjeta-servicio h3 {
        color: #0033cc;
        font-size: 1.18rem;
        font-weight: 700;
        margin-bottom: 10px;
    }
    .tarjeta-servicio p {
        color: #444;
        font-size: 1.01rem;
    }
    .form-section {
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 4px 18px #0033cc11;
        padding: 40px 0 32px 0;
        margin-bottom: 32px;
    }
    .form-control, .form-select, textarea.form-control {
        border-radius: 12px;
        border: 1.5px solid #e3e8f0;
        font-size: 1.1rem;
        padding: 14px 16px;
        background: #f9fbff;
        box-shadow: 0 1px 3px #0033cc08 inset;
        transition: border-color 0.3s, box-shadow 0.3s;
    }
    .form-control:focus, .form-select:focus, textarea.form-control:focus {
        border-color: #0033cc;
        box-shadow: 0 0 0 3px #0033cc22;
        background: #fff;
        outline: none;
    }
    .btn-primary, .btn.btn-primary {
        background: linear-gradient(90deg, #2563eb 60%, #1e40af 100%);
        border: none;
        color: #fff;
        border-radius: 30px;
        font-weight: 700;
        font-size: 1.1rem;
        padding: 12px 36px;
        box-shadow: 0 4px 14px #2563eb22;
        letter-spacing: 1.2px;
        transition: background 0.3s, box-shadow 0.3s, color 0.3s;
    }
    .btn-primary:hover, .btn.btn-primary:hover {
        background: linear-gradient(90deg, #1e40af 60%, #2563eb 100%);
        color: #fff;
        box-shadow: 0 6px 20px #2563eb33;
    }
    footer {
        background: linear-gradient(135deg, #0033cc, #225fa8);
        color: #fff;
        padding: 40px 0 20px;
        font-size: 0.98rem;
        border-top-left-radius: 18px;
        border-top-right-radius: 18px;
        box-shadow: 0 -2px 12px #0033cc22;
    }
    .footer-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
    }
    .footer-links {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px 25px;
    }
    .footer-links a {
        color: #fff;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s, transform 0.3s;
    }
    .footer-links a:hover {
        color: #b3d1ea;
        transform: translateY(-2px);
    }
    .social-icons a {
        color: #fff;
        background: #0033cc33;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.3s, transform 0.3s;
    }
    .social-icons a:hover {
        background: #225fa8;
        transform: scale(1.1);
    }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Vistas  De Quillayquén</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@500;600;700&display=swap" rel="stylesheet">
    <style>
    /* --- OPTIMIZACIÓN MOBILE Y PROFESIONALIZACIÓN GENERAL --- */
    html {
        scroll-behavior: smooth;
        -webkit-tap-highlight-color: transparent;
    }
    body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background-color: var(--light-color);
        color: var(--black);
        font-family: 'Poppins', sans-serif;
        line-height: 1.7;
        padding-top: 90px;
        margin: 0;
    }
    /* Mejora de contraste para accesibilidad */
    *:focus {
        outline: 2px solid var(--primary-color);
        outline-offset: 2px;
    }
    /* Botón flotante WhatsApp */
    .whatsapp-float {
        position: fixed;
        bottom: 80px;
        right: 20px;
        z-index: 3000;
        background: #25d366;
        color: #fff;
        border-radius: 50%;
        width: 56px;
        height: 56px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 16px rgba(37,211,102,0.18);
        font-size: 2rem;
        transition: background 0.3s, transform 0.2s;
    }
    .whatsapp-float:hover {
        background: #128c7e;
        transform: scale(1.08);
    }
.btn-cancelar {
    position: relative;
    background: linear-gradient(135deg, #ff4d4d, #ff1a1a);
    color: var(--white);
    border: none;
    padding: 15px 30px;
    font-size: 1.1rem;
    font-weight: 600;
    border-radius: 50px;
    transition: all 0.4s ease;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(255, 0, 0, 0.3);
    min-width: 220px;
    text-align: center;
}

.btn-cancelar:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(255, 0, 0, 0.4);
}

.btn-cancelar:active {
    transform: translateY(0);
}

.btn-cancelar::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: 0.5s;
}

.btn-cancelar:hover::before {
    left: 100%;
}

        :root {
            --primary-color: #0033cc;
            --primary-dark: #002db3;
            --primary-light: #4d79ff;
            --secondary-color: #0099ff;
            --secondary-dark: #0099ff;
            --dark-color: #002a99;
            --light-color: #f8f9fa;
            --gray-color: #6c757d;
            --light-gray: #e9ecef;
            --white: #ffffff;
            --black: #212529;
        }

        body {
            background-color: var(--light-color);
            color: var(--black);
            font-family: 'Poppins', sans-serif;
            line-height: 1.7;
            padding-top: 90px;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 1rem;
        }

        /* Header Mejorado */
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: var(--white);
            padding: 15px 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1030;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--white);
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
        }

        .navbar-brand:hover {
            color: rgba(255, 255, 255, 0.9);
            transform: translateX(2px);
        }

        .navbar-brand .logo img {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--white);
            box-shadow: 0 2px 6px rgba(0,0,0,0.10);
            transition: all 0.3s ease;
        }

        /* Logo Mejorado */
        .logo {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1031;
            transition: all 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo img {
            width: 51px !important;
            height: 51px !important;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--white);
            box-shadow: 0 2px 6px rgba(0,0,0,0.10);
            transition: all 0.3s ease;
        }

        /* Título más profesional */
        .navbar-title {
            font-size: 1.45rem;
            font-weight: 700;
            color: var(--white);
            letter-spacing: 1px;
            margin-left: 14px;
            font-family: 'Montserrat', 'Poppins', sans-serif;
            text-shadow: 0 2px 6px rgba(0,0,0,0.08);
        }

        /* Botones de Navegación Mejorados */
        .nav-btn {
            position: relative;
            padding: 10px 20px;
            font-size: 0.95rem;
            font-weight: 500;
            border-radius: 30px;
            border: none;
            color: var(--white);
            background-color: rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
            overflow: hidden;
            margin: 0 5px;
        }

        .nav-btn:hover {
            background-color: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .nav-btn:active {
            transform: translateY(0);
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.5s ease;
        }

        .nav-btn:hover::before {
            left: 100%;
        }

        .nav-btn.active {
            background-color: var(--white);
            color: var(--primary-color);
            font-weight: 600;
        }

        /* Botones pequeños */
        .btn-volver-sm {
            padding: 5px 15px !important;
            font-size: 0.85rem !important;
            margin-right: 10px !important;
        }

        /* Carrusel Mejorado */
        .carousel {
            margin-top: 20px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }

        .carousel-item img {
            height: 400px;
            object-fit: cover;
            filter: brightness(0.9);
            transition: transform 0.5s ease;
        }

        .carousel-item:hover img {
            transform: scale(1.02);
        }

        .carousel-caption {
            background: rgba(0, 0, 0, 0.6);
            border-radius: 12px;
            padding: 20px;
            bottom: 70px;
            left: 10%;
            right: 10%;
            backdrop-filter: blur(5px);
        }

        .carousel-caption h5 {
            font-size: 1.8rem;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .carousel-caption p {
            font-size: 1.1rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .carousel-indicators button {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin: 0 5px;
        }

        /* Secciones de contenido (Quiénes Somos, Misión y Visión) */
        .content-section {
            background-color: var(--white);
            padding: 40px 0;
            margin-top: 40px;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            position: relative;
            overflow: hidden;
            display: none;
        }

        .content-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 10px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .content-section .titulo-seccion {
            color: var(--primary-color);
            font-size: 2.2rem;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            padding-bottom: 15px;
        }

        .content-section .titulo-seccion::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }

        .content-section .descripcion {
            font-size: 1.1rem;
            color: var(--gray-color);
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .content-section img {
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            transition: transform 0.5s ease;
        }

        .content-section img:hover {
            transform: scale(1.05);
        }

        /* Imagen circular pequeña y profesional para "Quiénes Somos" */
        .img-circle-small {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            object-fit: cover;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
            transition: transform 0.5s ease;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .img-circle-small:hover {
            transform: scale(1.05);
        }

        /* Servicios Mejorados */
        .servicios-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 10px;
        }
        
        .titulo-seccion {
            text-align: center;
            color: var(--primary-color);
            font-size: 2.5rem;
            margin-bottom: 50px;
            position: relative;
        }
        
        .titulo-seccion::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            margin: 20px auto 0;
            border-radius: 2px;
        }
        
        .tarjetas-wrapper {
            display: flex;
            justify-content: center;
            gap: 24px;
            flex-wrap: wrap;
        }
        
        .tarjeta-servicio {
            width: 100%;
            max-width: 320px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            transition: all 0.3s cubic-bezier(.4,2,.3,1);
            background: var(--white);
            position: relative;
        }
        
        .tarjeta-servicio:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 28px rgba(0, 0, 0, 0.2);
        }
        
        .imagen-container {
            height: 200px;
            overflow: hidden;
            position: relative;
        }
        
        .imagen-servicio {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .tarjeta-servicio:hover .imagen-servicio {
            transform: scale(1.1);
        }
        
        .contenido-tarjeta {
            padding: 25px;
            text-align: center;
        }
        
        .contenido-tarjeta h3 {
            color: var(--primary-color);
            font-size: 1.4rem;
            margin-bottom: 15px;
            position: relative;
            padding-bottom: 10px;
        }
        
        .contenido-tarjeta h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 2px;
            background: var(--secondary-color);
        }
        
        .contenido-tarjeta p {
            color: var(--gray-color);
            font-size: 1rem;
            line-height: 1.6;
        }

        .precio-servicio {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--secondary-color);
            margin: 15px 0;
        }

        /* Botones de Formularios Mejorados */
        .form-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 50px 0;
            flex-wrap: wrap;
        }



.form-buttons .btn-reserva,
.form-buttons .btn-cotizacion,
.form-buttons .btn-cancelar {
    position: relative;
    background: #1565c0;
    color: #fff;
    border: none;
    min-width: 180px;
    max-width: 320px;
    width: 100%;
    padding: 12px 0 12px 0;
    font-size: 1.08rem;
    font-weight: 700;
    border-radius: 6px;
    text-align: center;
    box-sizing: border-box;
    overflow: hidden;
    transition: box-shadow 0.2s, transform 0.2s;
    box-shadow: 0 4px 16px rgba(21,101,192,0.13);
    z-index: 1;
}
.form-buttons .btn-reserva::after,
.form-buttons .btn-cotizacion::after,
.form-buttons .btn-cancelar::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 45%;
    height: 100%;
    background: #4fc3f7;
    clip-path: polygon(100% 0, 0 100%, 100% 100%);
    z-index: 2;
    transition: background 0.2s;
}
.form-buttons .btn-reserva span,
.form-buttons .btn-cotizacion span,
.form-buttons .btn-cancelar span {
    position: relative;
    z-index: 3;
}
.form-buttons .btn-reserva:hover,
.form-buttons .btn-cotizacion:hover,
.form-buttons .btn-cancelar:hover {
    box-shadow: 0 8px 24px rgba(33,150,243,0.18);
    transform: translateY(-2px) scale(1.01);
}

.form-buttons .btn-reserva:hover,
.form-buttons .btn-cotizacion:hover,
.form-buttons .btn-cancelar:hover {
    background: linear-gradient(135deg, #1e40af, #2563eb);
    transform: translateY(-3px) scale(1.03);
    color: #fff;
}

/* Formularios Mejorados */
.form-section {
    display: none;
    padding: 50px 0;
    background-color: var(--light-gray);
}

.form-section.active {
    display: block;
    animation: fadeIn 0.5s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Formularios más profesionales y modernos */
.reservation-section, .quote-section {
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.15);
    padding: 45px 40px;
    max-width: 520px;
    margin: 40px auto;
    position: relative;
    overflow: hidden;
    border: 1.5px solid var(--light-gray);
    transition: box-shadow 0.3s ease;
}

.reservation-section:hover, .quote-section:hover {
    box-shadow: 0 14px 48px rgba(0,0,0,0.22);
}

.form-section h3 {
    font-size: 1.6rem;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 22px;
    letter-spacing: 0.6px;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 2px;
}

.form-label {
    font-weight: 700;
    font-size: 1.1rem;
    color: var(--primary-dark);
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.form-control, .form-select, textarea.form-control {
    border-radius: 12px;
    border: 1.5px solid var(--light-gray);
    font-size: 1.1rem;
    padding: 14px 16px;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
    background: #f9fbff;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
}

.form-control:focus, .form-select:focus, textarea.form-control:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    background: #fff;
    outline: none;
}

input[type="date"].form-control,
input[type="time"].form-control {
    min-height: 48px;
}

textarea.form-control {
    min-height: 100px;
    resize: vertical;
    font-family: 'Poppins', sans-serif;
}

.invalid-feedback {
    font-size: 0.95rem;
    color: #e74c3c;
    margin-top: 4px;
    font-weight: 600;
}

.alert-info {
    border-radius: 12px;
    background: linear-gradient(90deg, #e3f0ff 60%, #f8fafc 100%);
    color: #1e40af;
    border: none;
    font-size: 1.05rem;
    box-shadow: 0 3px 10px rgba(37,99,235,0.12);
    padding: 15px 20px;
    margin-top: 20px;
    font-weight: 600;
    text-align: center;
}

.form-section .btn,
.form-section button[type="submit"] {
    border-radius: 35px;
    font-size: 1.15rem;
    font-weight: 700;
    padding: 12px 36px;
    transition: background 0.3s ease, box-shadow 0.3s ease, color 0.3s ease;
    box-shadow: 0 4px 14px rgba(37,99,235,0.15);
    letter-spacing: 1.2px;
    text-transform: uppercase;
}

.form-section .btn-primary {
    background: linear-gradient(90deg, #2563eb 60%, #1e40af 100%);
    border: none;
    color: #fff;
}

.form-section .btn-primary:hover {
    background: linear-gradient(90deg, #1e40af 60%, #2563eb 100%);
    color: #fff;
    box-shadow: 0 6px 20px rgba(37,99,235,0.25);
}

.form-section .btn-outline-secondary {
    border: 2px solid var(--primary-color);
    color: var(--primary-color);
    background: #fff;
}

.form-section .btn-outline-secondary:hover {
    background: var(--primary-color);
    color: #fff;
    box-shadow: 0 6px 20px rgba(37,99,235,0.25);
}

.form-section .btn-danger {
    background: linear-gradient(90deg, #ff4d4d 60%, #ff1a1a 100%);
    border: none;
    color: #fff;
}

.form-section .btn-danger:hover {
    background: linear-gradient(90deg, #ff1a1a 60%, #ff4d4d 100%);
    color: #fff;
    box-shadow: 0 6px 20px rgba(255,0,0,0.25);
}

.form-section .btn-lg {
    font-size: 1.15rem;
    padding: 12px 36px;
    border-radius: 35px;
}

.form-section .text-center.mt-4 {
    gap: 14px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

        /* Footer Mejorado */
        footer {
            background: linear-gradient(135deg, var(--dark-color), var(--primary-dark));
            color: var(--white);
            padding: 40px 0 20px;
            font-size: 0.95rem;
            position: relative;
        }

        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .footer-links {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px 25px;
        }
        
        .footer-links a {
            color: var(--white);
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .footer-links a:hover {
            color: var(--secondary-color);
            transform: translateY(-2px);
        }
        
        .separator {
            color: rgba(255, 255, 255, 0.3);
            font-weight: 300;
        }
        
        .social-icons {
            display: flex;
            gap: 20px;
        }
        
        .social-icons a {
            color: var(--white);
            background-color: rgba(255, 255, 255, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s ease;
        }
        
        .social-icons a:hover {
            background-color: var(--secondary-color);
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 4px 12px rgba(255, 107, 0, 0.3);
        }

        .copyright {
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-top: 20px;
        }

        /* Modal de Reglas Mejorado */
        .modal-rules {
            border-radius: 16px;
            overflow: hidden;
        }

        .modal-rules .modal-header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: var(--white);
            border-bottom: none;
            padding: 20px;
        }

        .modal-rules .modal-title {
            font-weight: 700;
            font-size: 1.5rem;
        }

        .modal-rules .modal-body {
            padding: 25px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .modal-rules .rule-item {
            padding: 15px 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .modal-rules .rule-item:last-child {
            border-bottom: none;
        }

        .modal-rules .rule-item h5 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 10px;
        }

        .modal-rules .btn-close {
            filter: invert(1);
        }

        /* Horarios disponibles */
        .time-slots {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .time-slot {
            padding: 8px 15px;
            border-radius: 5px;
            background-color: var(--light-gray);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .time-slot:hover {
            background-color: var(--primary-light);
            color: white;
        }

        .time-slot.booked {
            background-color: #dc3545;
            color: white;
            cursor: not-allowed;
        }

        .time-slot.selected {
            background-color: var(--primary-color);
            color: white;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .carousel-item img {
                height: 220px;
            }
            .tarjeta-servicio {
                max-width: 95vw;
            }
            .servicios-container {
                padding: 20px 2vw;
            }
        }
        
        @media (max-width: 768px) {
            body {
                padding-top: 70px;
            }
            .carousel-item img {
                height: 160px;
            }
            .tarjeta-servicio {
                max-width: 98vw;
            }
            .servicios-container {
                padding: 10px 1vw;
            }
        }
        
@media (max-width: 576px) {
    .btn.btn-sm, .btn-sm {
        font-size: 0.93rem !important;
        padding: 8px 18px !important;
        min-width: 110px !important;
        max-width: 180px !important;
        border-radius: 18px !important;
        font-weight: 600;
        letter-spacing: 0.5px;
        box-shadow: 0 2px 8px rgba(37,99,235,0.10);
        transition: background 0.2s, color 0.2s, box-shadow 0.2s;
        background: #fff !important;
        color: #222 !important;
        border: 1.5px solid #d1d5db !important;
    }
    .btn.btn-sm:active, .btn-sm:active {
        box-shadow: 0 1px 3px rgba(37,99,235,0.08);
        transform: scale(0.97);
        background: #f3f4f6 !important;
    }
    .btn.btn-sm:hover, .btn-sm:hover {
        background: #f3f4f6 !important;
        color: #111 !important;
        border-color: #bfc3c9 !important;
    }
    .nav-flex {
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        position: relative;
        min-height: 44px;
        padding-left: 0;
        padding-right: 0;
        width: 100%;
    }
    .logo {
        display: flex;
        align-items: center;
        height: 44px;
        margin-left: 2px;
    }
    .logo img {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        border: 2px solid var(--white);
        object-fit: cover;
    }
    .navbar-title {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        font-size: 0.98rem;
        font-weight: 600;
        color: var(--white);
        letter-spacing: 0.2px;
        white-space: nowrap;
        z-index: 2;
        pointer-events: none;
        display: flex;
        align-items: center;
        height: 44px;
    }
    .navbar-toggler {
        position: relative;
        margin-left: auto;
        margin-right: 0;
        top: 0;
        transform: none;
        height: 36px;
        width: 36px;
        padding: 2px 8px !important;
        font-size: 1.1rem !important;
        border-radius: 8px !important;
        display: flex;
        align-items: center;
        z-index: 3;
        margin: 0;
    }
    .form-buttons {
        flex-direction: column;
        align-items: center;
        gap: 8px;
        margin: 12px 0 8px 0;
    }
    .form-buttons .btn-reserva,
    .form-buttons .btn-cotizacion,
    .form-buttons .btn-cancelar {
        min-width: 90px;
        max-width: 120px;
        width: 90vw;
        padding: 5px 0;
        font-size: 0.82rem;
        border-radius: 8px;
        margin: 0 auto;
        text-align: center;
        box-shadow: 0 2px 8px rgba(37,99,235,0.10);
    }
    footer {
        padding: 10px 0 4px;
        font-size: 0.91rem;
    }
    .footer-content {
        flex-direction: column;
        align-items: center;
        gap: 6px;
    }
    .footer-links {
        flex-direction: column;
        align-items: center;
        gap: 3px 0;
        text-align: center;
    }
    .footer-links .separator {
        display: none;
    }
    .social-icons {
        justify-content: center;
        gap: 6px;
        margin-top: 4px;
    }
    .social-icons a {
        width: 22px;
        height: 22px;
        font-size: 1rem;
    }
    .copyright {
        font-size: 0.87rem;
        margin-top: 3px;
    }
}
    
/* ======= ESTILO UNIFICADO PARA MENÚ ======= */
.nav-btn {
    font-size: 0.9rem !important;
    padding: 8px 16px !important;
    margin: 0 6px;
    border-radius: 25px;
    color: var(--white);
    background-color: rgba(255, 255, 255, 0.15);
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
}

.nav-btn:hover {
    background-color: rgba(255, 255, 255, 0.25);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    color: var(--white);
}

/* Estilos para el menú desplegable en móvil */
@media (max-width: 991px) {
    .navbar-collapse {
        position: absolute !important;
        top: 56px !important;
        right: 16px !important;
        left: auto !important;
        width: 90vw !important;
        min-width: 140px;
        max-width: 340px;
        background: #fff;
        border-radius: 0 0 18px 18px;
        box-shadow: 0 8px 32px rgba(0,51,204,0.13), 0 1.5px 0 #e3e8f0;
        padding: 1.2rem 1.2rem 1.5rem 1.2rem;
        z-index: 1050;
        text-align: left;
        animation: fadeInDown 0.25s;
    }
    .navbar-nav {
        flex-direction: column !important;
        align-items: stretch !important;
        width: 100%;
        gap: 0.5rem;
    }
    .nav-item {
        width: 100%;
        margin: 0;
        padding: 0.2rem 0;
    }
    .nav-btn {
        width: 100%;
        text-align: left;
        font-size: 1.08rem;
        padding: 13px 18px;
        margin: 0 0 6px 0;
        border-radius: 12px;
        color: #0033cc;
        background: #f3f6fa;
        border: 1.5px solid #e3e8f0;
        font-weight: 600;
        box-shadow: 0 2px 8px rgba(0,51,204,0.07);
        transition: background 0.2s, color 0.2s, box-shadow 0.2s;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .nav-btn:hover, .nav-btn:focus {
        background: #e6edfa;
        color: #1e40af;
        box-shadow: 0 4px 16px rgba(0,51,204,0.10);
    }
    .nav-btn.active {
        background: #0033cc;
        color: #fff;
        border-color: #0033cc;
    }
    .navbar-toggler {
        background: #052fc7 !important;
        border: none !important;
        color: #fff !important;
        border-radius: 18px !important;
        box-shadow: 0 4px 18px rgba(0,51,204,0.18);
        width: 52px;
        height: 52px;
        min-width: 52px;
        min-height: 52px;
        max-width: 52px;
        max-height: 52px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0;
        padding: 0;
        transition: background 0.2s, box-shadow 0.2s;
        outline: none !important;
        position: absolute;
        right: 6px;
        top: 50%;
        transform: translateY(-50%);
        z-index: 1051;
    }
    .navbar-toggler-icon {
        background-image: none !important;
        width: 32px;
        height: 32px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
    }
    .navbar-toggler-icon::before, .navbar-toggler-icon::after, .navbar-toggler-icon span {
        content: '';
        display: block;
        height: 7px;
        width: 28px;
        background: #143a66;
        border-radius: 8px;
        margin: 6px 0;
        box-shadow: 0 2px 8px rgba(0,51,204,0.10);
        transition: box-shadow 0.2s, background 0.2s;
        filter: brightness(1.08) drop-shadow(0 2px 8px #6ec1ff44);
        box-shadow: 0 6px 24px rgba(0,51,204,0.18), 0 1.5px 0 #0a6fb3;
        border: 2.5px solid #074ccc;
        transition: box-shadow 0.2s, border 0.2s, background 0.2s;
    }
    .navbar-toggler-icon span {
        margin: 0;
        position: static;
    }
    .navbar-toggler-icon::before {
        position: static;
    }
    .navbar-toggler-icon::after {
        position: static;
    }
    .navbar-toggler:focus {
        outline: 2px solid #0033cc;
        outline-offset: 2px;
    }

}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0);}
}
@keyframes fadeInDown {
    from { opacity: 0; transform: translateY(-10px);}
    to { opacity: 1; transform: translateY(0);}
}
</style>
<style>
.gallery-item {
    max-width: 280px;
    margin: 0 auto;
    border-radius: 16px;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
    cursor: pointer;
}

.gallery-item:hover {
    transform: scale(1.05);
    box-shadow: 0 10px 28px rgba(0, 0, 0, 0.18);
}
</style>
<style>
.gallery-item {
    max-width: 280px;
    margin: 0 auto;
    border-radius: 16px;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
    cursor: pointer;
}

.gallery-item:hover {
    transform: scale(1.05);
    box-shadow: 0 10px 28px rgba(0, 0, 0, 0.18);
}
</style>
<body>
<!-- Botón flotante WhatsApp -->
<a id="whatsapp-float-btn" href="#" class="whatsapp-float" target="_blank" title="Contáctanos por WhatsApp">
    <i class="fab fa-whatsapp"></i>
</a>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var numero = '56961854665';
        var mensaje = encodeURIComponent('Hola, necesito más información sobre las instalaciones');
        var enlace = `https://wa.me/${numero}?text=${mensaje}`;
        var btn = document.getElementById('whatsapp-float-btn');
        btn.setAttribute('href', enlace);
    });
</script>

<!-- Nueva Sección Galería de Imágenes -->
<div id="gallery-section" class="content-section" style="display:none; margin-top: 30px;">
    <div class="container">
        <div class="d-flex align-items-center mb-2 position-relative" style="min-height: 38px;">
            <h2 class="titulo-seccion mb-0" style="font-size:1.25rem; flex:1; text-align:center;">Galería de Recintos</h2>
            <button id="closeGalleryBtn" onclick="toggleGallery()" aria-label="Cerrar galería"
                style="position:absolute; right:0.5rem; top:0.5rem; width:22px; height:22px; background:#fff; border:1.5px solid #d1d5db; border-radius:6px; display:flex; align-items:center; justify-content:center; z-index:2; box-shadow:0 1px 4px rgba(0,0,0,0.07); padding:0;">
                <span style="font-size:1rem; color:#888; line-height:1; font-weight:bold;">&times;</span>
            </button>
        </div>
        <div class="gallery-carousel-container" style="position: relative; overflow: hidden; padding: 0 40px;">
            <div class="gallery-arrow gallery-arrow-left" style="position: absolute; top: 50%; left: 4px; transform: translateY(-50%); width: 24px; height: 24px; background-color: rgba(0,0,0,0.13); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 10;" onclick="scrollGallery(-1)">
                <i class="fas fa-chevron-left" style="color: white; font-size: 1rem;"></i>
            </div>
            <div class="gallery-carousel" id="galleryCarousel" style="display: flex; gap: 20px; overflow-x: auto; scroll-behavior: smooth; -webkit-overflow-scrolling: touch; padding-bottom: 10px; scrollbar-width: none; -ms-overflow-style: none;">
                <style>
                    #galleryCarousel::-webkit-scrollbar {
                        display: none;
                    }
                </style>
                <div class="gallery-item" tabindex="0" style="flex: 0 0 auto; width: 100px; height: 100px; border-radius: 50%; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15); cursor: pointer; display: flex; flex-direction: column; align-items: center; text-align: center; background: white; transition: transform 0.3s ease;">
                    <img src="{% static 'sillas.jpg'%}" alt="vestuario outdoor" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-top: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
                    <h6 style="margin-top: 8px; font-size: 0.9rem; color: var(--primary-color, #0033cc); font-weight: 600; user-select: none;">vestuario outdoor</h6>
                </div>
                <div class="gallery-item" tabindex="0" style="flex: 0 0 auto; width: 100px; height: 100px; border-radius: 50%; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15); cursor: pointer; display: flex; flex-direction: column; align-items: center; text-align: center; background: white; transition: transform 0.3s ease;">
                    <img src="{% static 'silla5.jpg'%}" alt="paisaje bosque" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-top: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
                    <h6 style="margin-top: 8px; font-size: 0.9rem; color: var(--primary-color, #0033cc); font-weight: 600; user-select: none;">bosque</h6>
                </div>
                <div class="gallery-item" tabindex="0" style="flex: 0 0 auto; width: 100px; height: 100px; border-radius: 50%; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15); cursor: pointer; display: flex; flex-direction: column; align-items: center; text-align: center; background: white; transition: transform 0.3s ease;">
                    <img src="{% static 'silla 6.jpg'%}" alt="río montaña" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-top: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
                    <h6 style="margin-top: 8px; font-size: 0.9rem; color: var(--primary-color, #0033cc); font-weight: 600; user-select: none;">río montaña</h6>
                </div>
                <div class="gallery-item" tabindex="0" style="flex: 0 0 auto; width: 100px; height: 100px; border-radius: 50%; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15); cursor: pointer; display: flex; flex-direction: column; align-items: center; text-align: center; background: white; transition: transform 0.3s ease;">
                    <img src="{% static 'quincho4.jpg'%}" alt="atardecer lago" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-top: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
                    <h6 style="margin-top: 8px; font-size: 0.9rem; color: var(--primary-color, #0033cc); font-weight: 600; user-select: none;">atardecer lago</h6>
                </div>
                <div class="gallery-item" tabindex="0" style="flex: 0 0 auto; width: 100px; height: 100px; border-radius: 50%; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15); cursor: pointer; display: flex; flex-direction: column; align-items: center; text-align: center; background: white; transition: transform 0.3s ease;">
                    <img src="{% static 'piscina 5.jpg'%}" alt="bicicletas y electromovilidad" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-top: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
                    <h6 style="margin-top: 8px; font-size: 0.9rem; color: var(--primary-color, #0033cc); font-weight: 600; user-select: none;">bicicletas y electromovilidad</h6>
                </div>
                <div class="gallery-item" tabindex="0" style="flex: 0 0 auto; width: 100px; height: 100px; border-radius: 50%; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15); cursor: pointer; display: flex; flex-direction: column; align-items: center; text-align: center; background: white; transition: transform 0.3s ease;">
                    <img src="{% static 'sillas.jpg'%}" alt="máquinas y accesorios" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-top: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
                    <h6 style="margin-top: 8px; font-size: 0.9rem; color: var(--primary-color, #0033cc); font-weight: 600; user-select: none;">máquinas y accesorios</h6>
                </div>
                <div class="gallery-item" tabindex="0" style="flex: 0 0 auto; width: 100px; height: 100px; border-radius: 50%; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15); cursor: pointer; display: flex; flex-direction: column; align-items: center; text-align: center; background: white; transition: transform 0.3s ease;">
                    <img src="{% static 'psicina3.jpg'%}" alt="disciplinas" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-top: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
                    <h6 style="margin-top: 8px; font-size: 0.9rem; color: var(--primary-color, #0033cc); font-weight: 600; user-select: none;">disciplinas</h6>
                </div>
                <div class="gallery-item" tabindex="0" style="flex: 0 0 auto; width: 100px; height: 100px; border-radius: 50%; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15); cursor: pointer; display: flex; flex-direction: column; align-items: center; text-align: center; background: white; transition: transform 0.3s ease;">
                    <img src="{% static 'quincho4.jpg'%}" alt="camping" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-top: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
                    <h6 style="margin-top: 8px; font-size: 0.9rem; color: var(--primary-color, #0033cc); font-weight: 600; user-select: none;">camping</h6>
                </div>
            </div>
            <div class="gallery-arrow gallery-arrow-right" style="position: absolute; top: 50%; right: 4px; transform: translateY(-50%); width: 24px; height: 24px; background-color: rgba(0,0,0,0.13); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 10;" onclick="scrollGallery(1)">
                <i class="fas fa-chevron-right" style="color: white; font-size: 1rem;"></i>
            </div>
        </div>
    </div>
</div>


<!-- Header Mejorado -->
<header>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container nav-flex">
            <span class="logo">
              <img src="{% static 'vistalogo.jpg' %}" alt="Logo Vistas Quillayquen">
            </span>
            <span class="navbar-title">Vistas De Quillayquén</span>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item">
                        <button class="nav-btn" onclick="toggleSection('quienes-somos'); document.getElementById('navbarNav').classList.remove('show');">
                            <i class="fas fa-info-circle me-2"></i>Conócenos
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-btn" onclick="toggleSection('mision-vision'); document.getElementById('navbarNav').classList.remove('show');">
                            <i class="fas fa-bullseye me-2"></i>Misión y Visión
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-btn" onclick="toggleGallery(); document.getElementById('navbarNav').classList.remove('show');">
                            <i class="fas fa-images me-2"></i>Explorar Recintos
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-btn" data-bs-toggle="modal" data-bs-target="#rulesModal" onclick="document.getElementById('navbarNav').classList.remove('show');">
                            <i class="fas fa-clipboard-list me-2"></i>Reglas
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-btn" data-bs-toggle="modal" data-bs-target="#priceModal" onclick="document.getElementById('navbarNav').classList.remove('show');">
                            <i class="fas fa-dollar-sign me-2"></i>Precios
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<!-- Modal Precios -->
<div class="modal fade" id="priceModal" tabindex="-1" aria-labelledby="priceModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content shadow-lg border-0" style="border-radius: 18px;">
            <div class="modal-header" style="background: linear-gradient(90deg, #0033cc 60%, #225fa8 100%); color: #fff; border-top-left-radius: 18px; border-top-right-radius: 18px; border-bottom: none;">
                <h4 class="modal-title fw-bold d-flex align-items-center gap-2" id="priceModalLabel" style="font-family: 'Montserrat', sans-serif; font-size: 1.35rem;">
                    <i class="fas fa-dollar-sign" style="font-size:1.5rem;"></i> Información de Precios
                </h4>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body" style="background: #f8faff; padding: 32px 28px 24px 28px;">
                <div class="row g-3 align-items-center justify-content-center">
                    <div class="col-12 col-md-6 mb-3 mb-md-0">
                        <div class="card border-0 shadow-sm h-100" style="border-radius: 14px; background: #fff;">
                            <div class="card-body text-center">
                                <i class="fas fa-futbol fa-2x mb-2 text-primary"></i>
                                <h5 class="fw-bold mb-2" style="color:#0033cc;">Cancha de Fútbol</h5>
                                <div class="display-6 fw-bold mb-1" style="color:#1e40af;">$24.000</div>
                                <div style="font-size:1.05rem; color:#444;">por hora</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="card border-0 shadow-sm h-100" style="border-radius: 14px; background: #fff;">
                            <div class="card-body text-center">
                                <i class="fas fa-swimmer fa-2x mb-2" style="color:#0099ff;"></i>
                                <h5 class="fw-bold mb-2" style="color:#0099ff;">Piscina</h5>
                                <div class="display-6 fw-bold mb-1" style="color:#0099ff;">$8.000</div>
                                <div style="font-size:1.05rem; color:#444;">temporada baja</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border-bottom-left-radius: 18px; border-bottom-right-radius: 18px; background: #f8faff; border-top: none;">
                <button type="button" class="btn btn-primary px-4 py-2 fw-bold" style="border-radius: 30px; font-size: 1.1rem; letter-spacing: 1px;" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!-- Carrusel Mejorado -->
<div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
<style>
@media (max-width: 576px) {
  #carouselExampleCaptions {
    margin-top: 90px !important;
  }
}
</style>
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="{% static 'areaverde3..jpg' %}" class="d-block w-100" class="d-block w-100" alt="Disfruta de nuestras instalaciones">
        <div class="carousel-caption d-none d-md-block">
          <h5>Disfruta de nuestras instalaciones</h5>
          <p>Vistas espectaculares y servicios de calidad</p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="{% static 'imagen1.jpg' %}" class="d-block w-100" alt="Eventos inolvidables">
        <div class="carousel-caption d-none d-md-block">
          <h5>Eventos inolvidables</h5>
          <p>Celebra tus momentos especiales con nosotros</p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="{% static 'quincho4.jpg'%}" class="d-block w-100" alt="Áreas verdes">
        <div class="carousel-caption d-none d-md-block">
          <h5>Áreas Verdes</h5>
          <p>Espacios ideales para relajarte y disfrutar</p>
        </div>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Anterior</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Siguiente</span>
    </button>
</div>
  
<!-- Sección "Quiénes Somos" Mejorada y Profesional -->
<div id="quienes-somos" class="content-section" style="display:none;">
    <div class="container position-relative">
        <button onclick="toggleSection('quienes-somos')" aria-label="Cerrar sección" style="position:absolute; right:1.2rem; top:1.2rem; width:32px; height:32px; background:#fff; border:1.5px solid #d1d5db; border-radius:8px; display:flex; align-items:center; justify-content:center; z-index:2; box-shadow:0 2px 8px rgba(0,0,0,0.10); padding:0;">
            <span style="font-size:1.4rem; color:#888; line-height:1; font-weight:bold;">&times;</span>
        </button>
        <h2 class="titulo-seccion">Quiénes Somos</h2>
        <div class="row align-items-center justify-content-center">
            <div class="col-md-5 mb-4 mb-md-0 d-flex justify-content-center">
                <img src="{% static 'piscina 5.jpg' %}" alt="Equipo Quillayquén" class="img-circle-small" style="border:4px solid #e3e8f0; background:#fff;">
            </div>
            <div class="col-md-7">
                <div class="descripcion" style="font-size:1.13rem; color:#444; font-weight:500; background:linear-gradient(90deg,#f8faff 80%,#e3f0ff 100%); border-radius:12px; box-shadow:0 2px 8px #0033cc11; padding:28px 24px;">
                    Somos un equipo apasionado por crear experiencias inolvidables en un entorno natural único. En Vistas de Quillayquén, combinamos hospitalidad, profesionalismo y amor por la naturaleza para ofrecer el mejor servicio en reservas, eventos y actividades al aire libre.<br><br>
                    Nuestro compromiso es brindar atención personalizada, instalaciones de primer nivel y un ambiente seguro y acogedor para toda la familia, empresas y grupos.
                </div>
                <button class="btn btn-primary mt-4 w-100" style="max-width:320px; border-radius:30px; font-weight:600;" onclick="showForm('cotizacion')">
                    <i class="fas fa-calendar-alt me-2"></i>Planificar Evento
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Sección "Misión y Visión" Mejorada y Profesional -->
<div id="mision-vision" class="content-section" style="display:none;">
    <div class="container position-relative">
        <button onclick="toggleSection('mision-vision')" aria-label="Cerrar sección" style="position:absolute; right:1.2rem; top:1.2rem; width:32px; height:32px; background:#fff; border:1.5px solid #d1d5db; border-radius:8px; display:flex; align-items:center; justify-content:center; z-index:2; box-shadow:0 2px 8px rgba(0,0,0,0.10); padding:0;">
            <span style="font-size:1.4rem; color:#888; line-height:1; font-weight:bold;">&times;</span>
        </button>
        <h2 class="titulo-seccion">Misión y Visión</h2>
        <div class="row g-4 justify-content-center">
            <div class="col-md-6">
                <div class="card shadow-sm border-0" style="border-radius:14px; background:linear-gradient(90deg,#e3f0ff 60%,#f8fafc 100%);">
                    <div class="card-body text-center">
                        <i class="fas fa-bullseye fa-2x mb-2" style="color:#0033cc;"></i>
                        <h5 class="fw-bold mb-2" style="color:#0033cc;">Misión</h5>
                        <p class="mb-0" style="color:#444; font-size:1.08rem;">Ofrecer espacios y servicios de excelencia para la realización de eventos, actividades recreativas y experiencias al aire libre, promoviendo el respeto por la naturaleza y la satisfacción de nuestros visitantes.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card shadow-sm border-0" style="border-radius:14px; background:linear-gradient(90deg,#f8fafc 60%,#e3f0ff 100%);">
                    <div class="card-body text-center">
                        <i class="fas fa-eye fa-2x mb-2" style="color:#0033cc;"></i>
                        <h5 class="fw-bold mb-2" style="color:#0033cc;">Visión</h5>
                        <p class="mb-0" style="color:#444; font-size:1.08rem;">Ser el centro de eventos y actividades outdoor líder en la región, reconocido por la calidad de sus servicios, el cuidado del entorno y la innovación en experiencias para nuestros clientes.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
  
<!-- Servicios Mejorados -->
<div class="servicios-container">
    <h2 class="titulo-seccion titulo-recintos">Nuestros Recintos</h2>
<style>
.titulo-recintos {
  font-size: 1.7rem !important;
  margin-top: 32px !important;
  margin-bottom: 18px !important;
  text-align: center;
}
@media (max-width: 576px) {
  .titulo-recintos {
    font-size: 1.25rem !important;
    margin-top: 24px !important;
    margin-bottom: 12px !important;
  }
}
.servicios-container {
  margin-top: 30px !important;
}
</style>
    
    <div class="tarjetas-wrapper">
        <!-- Tarjeta 1 - Piscinas -->
        <div class="tarjeta-servicio">
            <div class="imagen-container">
                <img src="{% static 'psicina5.jpg'%}" alt="Piscina" class="imagen-servicio">
            </div>
            <div class="contenido-tarjeta">
                <h3>Piscinas</h3>
                <p>Disfruta de nuestras piscinas con vistas espectaculares y áreas de descanso completamente equipadas para tu comodidad.</p>
                <button class="btn btn-outline-primary btn-sm mt-2" onclick="showForm('cotizacion'); scrollToForm('cotizacion-form');">
                    Reservar ahora
                </button>
            </div>
        </div>

        <!-- Tarjeta 2 - Canchas -->
        <div class="tarjeta-servicio">
            <div class="imagen-container">
                <img src="https://media.istockphoto.com/id/169975889/es/foto/campo-de-f%C3%BAtbol-en-la-noche.jpg?s=612x612&w=0&k=20&c=Q5bmpyJIJoj-W5e5W-yunMK6lms7P2SVyOYxuflX5YU=" alt="Canchas" class="imagen-servicio">
            </div>
            <div class="contenido-tarjeta">
                <h3>Canchas Deportivas</h3>
                <p>Canchas de fútbol  para todos los niveles, con iluminación profesional y mantenimiento de primera.</p>
                <button class="btn btn-outline-primary btn-sm mt-2" onclick="showForm('reserva'); scrollToForm('reserva-form');">
                    Reservar ahora
                </button>
            </div>
        </div>

        <!-- Tarjeta 3 - Quinchos -->
        <div class="tarjeta-servicio">
            <div class="imagen-container">
                <img src="{% static 'quincho4.jpg'%}" alt="Quinchos" class="imagen-servicio">
            </div>
            <div class="contenido-tarjeta">
                <h3>Quinchos</h3>
                <p>Espacios perfectos para tus asados y reuniones, equipados con parrillas, mesas y áreas de descanso.</p>
                <button class="btn btn-outline-primary btn-sm mt-2" onclick="showForm('cotizacion'); scrollToForm('cotizacion-form');">
                    Reservar ahora
                </button>
            </div>
        </div>

        <!-- Tarjeta 4 - Áreas verdes -->
        <div class="tarjeta-servicio">
            <div class="imagen-container">
                <img src="{% static 'areasverdes.jpg'%}" alt="Áreas verdes" class="imagen-servicio">
            </div>
            <div class="contenido-tarjeta">
                <h3>Áreas Verdes</h3>
                <p>Amplias zonas de camping y áreas verdes para disfrutar de la naturaleza con toda la familia.</p>
                <button class="btn btn-outline-primary btn-sm mt-2" onclick="showForm('cotizacion'); scrollToForm('cotizacion-form');">
                    Reservar ahora
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Botones para formularios Mejorados -->
<div class="form-buttons">
    <button class="btn-cancelar" onclick="showCancelForm()">
        <span style="font-weight:700; letter-spacing:1px;">CANCELAR RESERVA</span>
    </button>
</div>
<!-- Modal de Reglas Mejorado y Profesional -->
<div class="modal fade modal-rules" id="rulesModal" tabindex="-1" aria-labelledby="rulesModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content" style="border-radius:16px;">
            <div class="modal-header" style="background:linear-gradient(90deg,#0033cc 60%,#225fa8 100%); color:#fff; border-bottom:none;">
                <h4 class="modal-title fw-bold d-flex align-items-center gap-2" id="rulesModalLabel" style="font-family:'Montserrat',sans-serif; font-size:1.25rem;">
                    <i class="fas fa-gavel me-2"></i> Reglas y Normas del Centro
                </h4>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body" style="background:#f8faff; padding:32px 28px 24px 28px;">
                <div class="rule-item d-flex align-items-start mb-3">
                    <i class="fas fa-check-circle fa-lg me-3" style="color:#2563eb;"></i>
                    <div>
                        <h5>Respeto y convivencia</h5>
                        <p style="margin-bottom:0; color:#444;">Todos los visitantes deben mantener una actitud respetuosa con el personal, otros usuarios y el entorno natural.</p>
                    </div>
                </div>
                <div class="rule-item d-flex align-items-start mb-3">
                    <i class="fas fa-tree fa-lg me-3" style="color:#009688;"></i>
                    <div>
                        <h5>Cuidado del entorno</h5>
                        <p style="margin-bottom:0; color:#444;">Está prohibido dañar la flora, fauna o instalaciones. Utiliza los basureros y respeta las áreas delimitadas.</p>
                    </div>
                </div>
                <div class="rule-item d-flex align-items-start mb-3">
                    <i class="fas fa-ban fa-lg me-3" style="color:#e74c3c;"></i>
                    <div>
                        <h5>Prohibiciones</h5>
                        <p style="margin-bottom:0; color:#444;">No se permite el ingreso de bebidas alcohólicas, drogas ni armas. Está prohibido fumar en zonas no habilitadas.</p>
                    </div>
                </div>
                <div class="rule-item d-flex align-items-start mb-3">
                    <i class="fas fa-clock fa-lg me-3" style="color:#ff9800;"></i>
                    <div>
                        <h5>Horarios</h5>
                        <p style="margin-bottom:0; color:#444;">Respeta los horarios de apertura y cierre. El ingreso fuera de horario no está permitido.</p>
                    </div>
                </div>
                <div class="rule-item d-flex align-items-start mb-3">
                    <i class="fas fa-user-shield fa-lg me-3" style="color:#0033cc;"></i>
                    <div>
                        <h5>Seguridad</h5>
                        <p style="margin-bottom:0; color:#444;">Sigue las indicaciones del personal y ante cualquier emergencia, comunícate de inmediato con nosotros.</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border-bottom-left-radius:16px; border-bottom-right-radius:16px; background:#f8faff; border-top:none;">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal" style="border-radius:30px; font-weight:600;">Cerrar</button>
            </div>
        </div>
    </div>
</div>
    </div>
<script>
// Mostrar/Ocultar secciones informativas con animación y botón X
function toggleSection(sectionId) {
    var section = document.getElementById(sectionId);
    if (section.style.display === 'none' || section.style.display === '') {
        section.style.display = 'block';
        section.scrollIntoView({behavior:'smooth'});
    } else {
        section.style.display = 'none';
    }
}
</script>
</div>

<!-- Aviso de mantención -->
<div id="mantencionAviso" style="display:none;background:#ffeb3b;color:#222;padding:16px 0;text-align:center;font-weight:600;font-size:1.1rem;">
    <i class="fas fa-tools me-2"></i>Las canchas están en mantención. No se pueden realizar reservas en este momento.
</div>

<!-- Formulario de Cancelación de Reserva Mejorado -->
<div id="cancel-form" class="form-section">
    <div class="reservation-section shadow-lg border-0" style="background: linear-gradient(120deg, #f8fafc 60%, #e3f0ff 100%);">
        <div class="text-center mb-4">
            <span class="d-inline-block bg-danger bg-gradient rounded-circle p-3 mb-2"><i class="fas fa-times-circle fa-2x text-white"></i></span>
            <h3 class="fw-bold text-danger mb-1" style="letter-spacing:1px;">Cancelar Reserva</h3>
            <p class="text-muted mb-0">Ingrese su <b>número telefónico</b> para buscar su reserva.</p>
        </div>
        <form id="cancelReservationForm" class="needs-validation" novalidate>
            <div class="row g-3 align-items-end mb-2">
                <div class="col-12 col-md-8">
                    <div class="form-floating">
                        <input type="text" class="form-control border-danger-subtle" id="cancel-contact" placeholder="Ej: 12.345.678-9 o +56 9 1234 5678" required autofocus>
                        <label for="cancel-contact"><i class="fas fa-id-card me-2"></i> Teléfono</label>
                        <div class="invalid-feedback">Ingrese un un número telefónico válido.</div>
                    </div>
                </div>
                <div class="col-12 col-md-4">
                    <button type="button" class="btn btn-danger w-100 py-2" id="btnBuscarReserva">
                        <i class="fas fa-search me-2"></i>Buscar Reserva
                    </button>
                </div>
            </div>
            <div id="listaReservasCancel" class="mt-4" style="display:none;">
                <label for="selectReservaCancel" class="form-label fw-semibold">Seleccione la reserva a cancelar:</label>
                <select id="selectReservaCancel" class="form-select border-danger-subtle"></select>
            </div>
            <div id="datosReservaCancel" class="mt-4" style="display:none;"></div>
            <div class="d-flex flex-column flex-md-row align-items-center justify-content-center gap-2 mt-4">
                <button type="button" class="btn btn-danger btn-sm px-3 shadow-sm" id="btnCancelarReserva" disabled>
                    <i class="fas fa-trash-alt me-2"></i>Eliminar Reserva
                </button>
                <button type="button" class="btn btn-outline-secondary btn-sm px-3" onclick="hideForms()">
                    <i class="fas fa-times me-2"></i>Cancelar
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Formulario de Reserva Mejorado y Profesional -->
<div id="reserva-form" class="form-section">
    <div class="reservation-section shadow-lg border-0" style="background: linear-gradient(120deg, #f8fafc 60%, #e3f0ff 100%);">
        <div class="text-center mb-4">
            <span class="d-inline-block bg-primary bg-gradient rounded-circle p-3 mb-2"><i class="fas fa-calendar-check fa-2x text-white"></i></span>
            <h3 class="fw-bold text-primary mb-1" style="letter-spacing:1px;">Reserva de Cancha</h3>
            <p class="text-muted mb-0">Complete el formulario para reservar su cancha.<br><span class="badge bg-primary bg-gradient">Valor: $24.000 por hora</span></p>
        </div>
        <form id="reservationForm" class="needs-validation" novalidate>
            <fieldset class="border rounded-3 p-3 mb-3 shadow-sm bg-white">
                <legend class="float-none w-auto px-3 fs-6 fw-bold text-primary mb-2">
                    <i class="fas fa-calendar-check me-2"></i>Datos de la Reserva
                </legend>
                <div class="row g-3">
                    <div class="col-md-4">
                        <div class="form-floating">
                            <select class="form-select border-primary-subtle" id="cancha" required>
                                <option value="" disabled selected>Seleccione una cancha</option>
                                <option value="Cancha 1">Cancha 1</option>
                                <option value="Cancha 2">Cancha 2</option>
                            </select>
                            <label for="cancha"><i class="fas fa-futbol me-2"></i>Cancha</label>
                            <div class="invalid-feedback">Seleccione una cancha.</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-floating">
                            <input type="date" class="form-control border-primary-subtle" id="date" required>
                            <label for="date"><i class="fas fa-calendar-alt me-2"></i>Fecha de Reserva</label>
                            <div class="invalid-feedback">Seleccione una fecha válida.</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-floating">
                            <select class="form-select border-primary-subtle" id="cantidad-horas" required>
                                <option value="1" selected>1 hora</option>
                                <option value="2">2 horas</option>
                                <option value="3">3 horas</option>
                                <option value="4">4 horas</option>
                                <option value="5">5 horas</option>
                            </select>
                            <label for="cantidad-horas"><i class="fas fa-clock me-2"></i>Cantidad de horas</label>
                            <div class="invalid-feedback">Seleccione la cantidad de horas.</div>
                        </div>
                    </div>
                </div>
                <div class="mt-3">
                    <label class="form-label fw-semibold">Horarios Disponibles</label>
                    <div class="time-slots" id="timeSlots"></div>
                    <input type="hidden" id="selected-time" required>
                </div>
            </fieldset>
            <fieldset class="border rounded-3 p-3 mb-3 shadow-sm bg-white">
                <legend class="float-none w-auto px-3 fs-6 fw-bold text-primary mb-2">
                    <i class="fas fa-user me-2"></i>Datos de Contacto
                </legend>
                <div class="row g-3 align-items-center">
                    <div class="col-md-4">
                        <div class="form-floating">
                            <input type="text" class="form-control border-primary-subtle" id="name" placeholder="Nombre completo" required>
                            <label for="name"><i class="fas fa-user me-2"></i>Nombre</label>
                            <div class="invalid-feedback">Ingrese su nombre completo.</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-floating">
                            <input type="tel" class="form-control border-primary-subtle" id="phone" placeholder="+56 9 1234 5678" required>
                            <label for="phone"><i class="fas fa-phone me-2"></i>Teléfono</label>
                            <div class="invalid-feedback">Ingrese un teléfono válido.</div>
                        </div>
                    </div>
                </div>
            </fieldset>
            <fieldset class="border rounded-3 p-3 mb-3 shadow-sm bg-white">
                <legend class="float-none w-auto px-3 fs-6 fw-bold text-primary mb-2">
                    <i class="fas fa-credit-card me-2"></i>Pago y Comentarios
                </legend>
                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="form-floating">
                            <select class="form-select border-primary-subtle" id="payment" required>
                                <option value="" disabled selected>Seleccione un método de pago</option>
                                <option value="Transferencia">Transferencia Bancaria (En el lugar)</option>
                                <option value="Efectivo">Efectivo en el lugar</option>
                                <option value="Tarjeta">Tarjeta de Débito (En el Lugar)</option>
                            </select>
                            <label for="payment"><i class="fas fa-credit-card me-2"></i>Método de Pago</label>
                            <div class="invalid-feedback">Seleccione un método de pago.</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating">
                            <textarea class="form-control border-primary-subtle" id="comments" placeholder="Comentarios adicionales" style="height: 58px"></textarea>
                            <label for="comments"><i class="fas fa-comment-dots me-2"></i>Comentarios</label>
                        </div>
                    </div>
                </div>
            </fieldset>
            <div class="alert alert-info mt-4 shadow-sm">
                <i class="fas fa-info-circle me-2"></i>
                <strong>Nota:</strong> El pago debe realizarse antes de utilizar las instalaciones.
            </div>
            <div class="mb-3 text-end">
                <span id="total-pagar" class="fw-bold fs-5"></span>
            </div>
            <div class="d-flex flex-column flex-md-row align-items-center justify-content-center gap-2 mt-4">
                <button type="submit" class="btn btn-primary btn-sm px-3 shadow-sm">
                    <span class="spinner-border spinner-border-sm d-none" id="spinnerReserva" role="status" aria-hidden="true"></span>
                    <i class="fas fa-paper-plane me-2"></i>Enviar Reserva
                </button>
                <button type="button" class="btn btn-outline-secondary btn-sm px-3" onclick="hideForms()">
                    <i class="fas fa-times me-2"></i>Cancelar
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Formulario de Solicitud de Cotización Mejorado y Profesional -->
<div id="cotizacion-form" class="form-section">
    <div class="quote-section shadow-lg border-0" style="background: linear-gradient(120deg, #f8fafc 60%, #e3f0ff 100%);">
        <div class="text-center mb-4">
            <span class="d-inline-block bg-info bg-gradient rounded-circle p-3 mb-2"><i class="fas fa-clipboard-list fa-2x text-white"></i></span>
            <h3 class="fw-bold text-info mb-1" style="letter-spacing:1px;">Solicitud de Cotización</h3>
            <p class="text-muted mb-0">Complete el formulario para solicitar una cotización para su evento.</p>
        </div>
        <form id="quoteForm" class="needs-validation" novalidate>
            <fieldset class="border rounded-3 p-3 mb-3 shadow-sm bg-white">
                <legend class="float-none w-auto px-3 fs-6 fw-bold text-info mb-2">
                    <i class="fas fa-user me-2"></i>Datos de Contacto
                </legend>
                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input type="text" class="form-control border-info-subtle" id="contact-name" placeholder="Nombre completo" required>
                            <label for="contact-name"><i class="fas fa-user me-2"></i>Nombre Completo</label>
                            <div class="invalid-feedback">Ingrese su nombre completo.</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input type="tel" class="form-control border-info-subtle" id="contact-phone" placeholder="+56 9 1234 5678" required>
                            <label for="contact-phone"><i class="fas fa-phone me-2"></i>Teléfono</label>
                            <div class="invalid-feedback">Ingrese un teléfono válido.</div>
                        </div>
                    </div>
                </div>
            </fieldset>
            <fieldset class="border rounded-3 p-3 mb-3 shadow-sm bg-white">
                <legend class="float-none w-auto px-3 fs-6 fw-bold text-info mb-2">
                    <i class="fas fa-calendar-alt me-2"></i>Detalles del Evento
                </legend>
                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="form-floating">
                            <select class="form-select border-info-subtle" id="quote-type" required>
                                <option value="" disabled selected>Seleccione un recinto</option>
                                <option value="Piscina">Piscina</option>
                                <option value="Cancha">Cancha</option>
                                <option value="Quincho">Quincho</option>
                                <option value="Áreas verdes">Áreas verdes</option>
                            </select>
                            <label for="quote-type"><i class="fas fa-home me-2"></i>Tipo de Recinto</label>
                            <div class="invalid-feedback">Seleccione un recinto.</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating">
                            <select class="form-select border-info-subtle" id="event-type" required>
                                <option value="" disabled selected>Tipo de evento</option>
                                <option value="Cumpleaños">Cumpleaños</option>
                                <option value="Matrimonio">Matrimonio</option>
                                <option value="Corporativo">Corporativo</option>
                                <option value="Otro">Otro</option>
                            </select>
                            <label for="event-type"><i class="fas fa-glass-cheers me-2"></i>Tipo de Evento</label>
                            <div class="invalid-feedback">Seleccione el tipo de evento.</div>
                        </div>
                    </div>
                </div>
                <div class="row g-3 mt-2">
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input type="date" class="form-control border-info-subtle" id="quote-date" required>
                            <label for="quote-date"><i class="fas fa-calendar-alt me-2"></i>Fecha tentativa</label>
                            <div class="invalid-feedback">Seleccione una fecha.</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating">
                            <textarea class="form-control border-info-subtle" id="event-description" placeholder="Detalles adicionales" style="height: 58px"></textarea>
                            <label for="event-description"><i class="fas fa-comment-dots me-2"></i>Detalles adicionales</label>
                        </div>
                    </div>
                </div>
            </fieldset>
            <div class="d-flex flex-column flex-md-row align-items-center justify-content-center gap-2 mt-4">
                <button type="submit" class="btn btn-info btn-sm px-3 shadow-sm text-white">
                    <i class="fas fa-paper-plane me-2"></i>Enviar Cotización
                </button>
                <button type="button" class="btn btn-outline-secondary btn-sm px-3" onclick="hideForms()">
                    <i class="fas fa-times me-2"></i>Cancelar
                </button>
            </div>
        </form>
    </div>
</div>

<script>
// Mejor scroll de galería: muestra más imágenes al presionar flecha y desactiva si no hay más
function scrollGallery(direction) {
    var carousel = document.getElementById('galleryCarousel');
    if (!carousel) return;
    var item = carousel.querySelector('.gallery-item');
    var scrollAmount = item ? (item.offsetWidth + 20) * 2 : 200; // 2 imágenes
    var maxScrollLeft = carousel.scrollWidth - carousel.clientWidth;
    var newScrollLeft = carousel.scrollLeft + direction * scrollAmount;
    // Limitar el scroll para no pasar el borde
    if (newScrollLeft < 0) {
        carousel.scrollTo({ left: 0, behavior: 'smooth' });
        return;
    }
    if (newScrollLeft > maxScrollLeft - 5) {
        carousel.scrollTo({ left: maxScrollLeft, behavior: 'smooth' });
        return;
    }
    carousel.scrollTo({ left: newScrollLeft, behavior: 'smooth' });
}
// Scroll suave al formulario correspondiente
function scrollToForm(formId) {
    setTimeout(function() {
        var el = document.getElementById(formId);
        if (el) {
            el.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    }, 200);
}
document.addEventListener('DOMContentLoaded', function() {
  const quoteForm = document.getElementById('quoteForm');
  if (quoteForm) {
    quoteForm.onsubmit = function(e) {
      e.preventDefault();
      const nombre = document.getElementById('contact-name').value;
      const telefono = document.getElementById('contact-phone').value;
      const recinto = document.getElementById('quote-type').value;
      const tipoEvento = document.getElementById('event-type').value;
      const fecha = document.getElementById('quote-date').value;
      const detalles = document.getElementById('event-description').value;

      const telefonoRegex = /^\+569\d{8}$/;
      if (!telefonoRegex.test(telefono)) {
        alert('📞 El número de teléfono debe tener el formato +569XXXXXXXX\nEjemplo: +56912345678');
        return false;
      }

      // Construir mensaje para Telegram
      const mensaje = `📢 *Nueva Solicitud de Cotización* 📢\n\n👤 *Nombre:* ${nombre}\n📱 *Teléfono:* ${telefono}\n🏠 *Recinto:* ${recinto}\n🎉 *Tipo de Evento:* ${tipoEvento}\n📅 *Fecha Tentativa:* ${fecha}\n📝 *Detalles:* ${detalles}`;

      // Enviar mensaje a Telegram
      enviarATelegram(mensaje);

      // Enviar boleta/cotización al WhatsApp del cliente
      const boleta = `*Cotización Recibida*%0A%0A*Nombre:* ${nombre}%0A*Teléfono:* ${telefono}%0A*Recinto:* ${recinto}%0A*Tipo de Evento:* ${tipoEvento}%0A*Fecha Tentativa:* ${fecha}%0A*Detalles:* ${detalles}`;
      const urlWsp = `https://wa.me/${telefono.replace('+','')}?text=${boleta}`;
      window.open(urlWsp, '_blank');

      alert('✅ Cotización enviada correctamente. ¡Gracias!');
      quoteForm.reset();
      window.hideForms();
    };
  }
});
</script>

<!-- Footer Mejorado -->
<footer>
    <div class="container">
        <div class="footer-content">
            <div class="footer-links">
                <span class="separator">•</span>
                <a href="#" data-bs-toggle="modal" data-bs-target="#contactModal">
                    <i class="fas fa-phone-alt me-2"></i>Contáctanos
                </a>
                <span class="separator">•</span>
                <a href="#" onclick="toggleSection('quienes-somos')">
                    <i class="fas fa-info-circle me-2"></i>Quiénes Somos
                </a>
                <span class="separator">•</span>
                <a href="#" onclick="toggleSection('mision-vision')">
                    <i class="fas fa-bullseye me-2"></i>Misión y Visión
                </a>
            </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         <div class="social-icons mt-4">
                <a href="https://www.facebook.com/p/Vistas-de-Quillayquen-100052160036272/?locale=es_LA" target="_blank" title="Facebook">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://www.instagram.com/vistasdequillayquen_/" target="_blank" title="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://wa.me/56934068065" target="_blank" title="WhatsApp">
                    <i class="fab fa-whatsapp"></i>
                </a>
                <a href="https://www.google.com/maps/place/Centro+de+eventos+Vistas+de+Quillayquen/@-34.2682011,-71.0590876,17z/data=!3m1!4b1!4m6!3m5!1s0x96637bba4e76332b:0x636b8406103d2bb2!8m2!3d-34.2682011!4d-71.0590876!16s%2Fg%2F11fk1ltlwk?entry=ttu&g_ep=EgoyMDI1MDQzMC4xIKXMDSoASAFQAw%3D%3D" target="_blank" title="Ubicación">
                    <i class="fas fa-map-marker-alt"></i>
                </a>
                <a href="https://www.instagram.com/reel/DEpb5aMObIJ/?igsh=MTQ4djN0cWI1MGMzaw%3D%3D" target="_blank" title="Cómo llegar">
                    <i class="fas fa-route"></i>
                </a>
            </div>
            
            <div class="copyright mt-4">
                <p>&copy; 2025 <strong>Vistas Quillayquen</strong>. Todos los derechos reservados.</p>
            </div>
        </div>
    </div>
</footer>

<!-- Modal Contacto Mejorado -->
<div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="contactModalLabel">
                    <i class="fas fa-phone-alt me-2"></i>Contáctanos
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-4">
                    <h5 class="mb-3">
                        <i class="fas fa-phone-volume me-2"></i>Teléfonos
                    </h5>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                        </li>
                        <li class="mb-2">
                            <a href="tel:+56944422235" class="text-decoration-none">
                                <i class="fas fa-phone me-2"></i>+56 9 4442 2235
                            </a>
                        </li>
                        <li>
                            <a href="tel:+56944422232" class="text-decoration-none">
                                <i class="fas fa-phone me-2"></i>+56 9 4442 2232
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="mb-4">
                    <h5 class="mb-3">
                        <i class="fas fa-envelope me-2"></i>Correo Electrónico
                    </h5>
                    <p>
                        <a href="mailto:contacto@vistasquillayquen.cl" class="text-decoration-none">
                            <i class="fas fa-at me-2"></i>
                            vistasquillayquen@gmail.com
                        </a>
                    </p>
                </div>
                <div>
                    <h5 class="mb-3">
                        <i class="fas fa-map-marker-alt me-2"></i>Dirección
                    </h5>
                    <p>
                        <i class="fas fa-road me-2"></i>Vistas de Quillayquén, Avenida Quillayquén, Cruce de Parral, Coltauco
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
                    <i class="fas fa-check me-2"></i>Entendido
                </button>
            </div>
        </div>
    </div>
</div>
<!-- Botón para abrir el login de admin -->
<button class="btn btn-admin-float" id="adminLoginBtn" style="position:fixed;bottom:20px;right:20px;z-index:2000;">
    <i class="fas fa-user-shield"></i> Admin
</button>

<!-- Modal de Login Admin -->
<div class="modal fade" id="adminLoginModal" tabindex="-1" aria-labelledby="adminLoginModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" style="border-radius:18px; box-shadow:0 8px 32px #0033cc22;">
      <form id="adminLoginForm">
        <div class="modal-header" style="background:linear-gradient(90deg,#0033cc 60%,#4fc3f7 100%); color:#fff; border-top-left-radius:18px; border-top-right-radius:18px; border-bottom:none;">
          <h5 class="modal-title d-flex align-items-center gap-2" id="adminLoginModalLabel" style="font-family:'Montserrat',sans-serif; font-size:1.25rem;">
            <i class="fas fa-user-shield"></i> Acceso Administrador
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body" style="background:#f8faff; padding:32px 28px 24px 28px;">
          <div class="mb-3">
            <label for="admin-user" class="form-label" style="font-weight:600; color:#0033cc;">Usuario</label>
            <input type="text" class="form-control" id="admin-user" required style="border-radius:12px;">
          </div>
          <div class="mb-3">
            <label for="admin-pass" class="form-label" style="font-weight:600; color:#0033cc;">Contraseña</label>
            <input type="password" class="form-control" id="admin-pass" required style="border-radius:12px;">
          </div>
        </div>
        <div class="modal-footer" style="border-bottom-left-radius:18px; border-bottom-right-radius:18px; background:#f8faff; border-top:none;">
          <button type="submit" class="btn btn-admin-login w-100" style="border-radius:30px; font-weight:700; font-size:1.08rem; background:linear-gradient(90deg,#0033cc 60%,#4fc3f7 100%); color:#fff; border:none; box-shadow:0 4px 14px #0033cc22;">Ingresar</button>
        </div>
      </form>
    </div>
  </div>
</div>
<style>
.btn-admin-float {
  background: linear-gradient(90deg, #0033cc 60%, #4fc3f7 100%);
  color: #fff;
  border: none;
  border-radius: 30px;
  font-weight: 700;
  font-size: 1.08rem;
  box-shadow: 0 4px 16px #0033cc22;
  padding: 10px 28px;
  transition: background 0.2s, box-shadow 0.2s, color 0.2s;
  display: flex;
  align-items: center;
  gap: 8px;
}
.btn-admin-float:hover {
  background: linear-gradient(90deg, #4fc3f7 60%, #0033cc 100%);
  color: #fff;
  box-shadow: 0 8px 24px #0033cc33;
}
.btn-admin-login:hover {
  background: linear-gradient(90deg, #4fc3f7 60%, #0033cc 100%);
  color: #fff;
  box-shadow: 0 8px 24px #0033cc33;
}
</style>


<!-- Panel de Administrador Mejorado y Visualmente Moderno -->
<style>
#adminPanelModal .modal-header {
  background: linear-gradient(90deg, #0033cc 60%, #4fc3f7 100%);
  color: #fff;
  border-top-left-radius: 18px;
  border-top-right-radius: 18px;
  box-shadow: 0 4px 18px #0033cc22;
}
#adminPanelModal .modal-title {
  font-weight: 800;
  letter-spacing: 1.2px;
  font-size: 1.35rem;
  font-family: 'Montserrat', 'Poppins', sans-serif;
  display: flex;
  align-items: center;
  gap: 8px;
}
#adminPanelModal .modal-content {
  border-radius: 18px;
  box-shadow: 0 8px 32px #0033cc22;
  border: none;
}
#adminPanelModal .admin-menu-btns {
  display: flex;
  flex-wrap: wrap;
  gap: 18px;
  justify-content: center;
  margin-bottom: 30px;
}
#adminPanelModal .admin-menu-btns .btn {
  min-width: 210px;
  font-size: 1.11rem;
  font-weight: 700;
  border-radius: 999px 32px 999px 999px/999px 999px 48px 999px;
  padding: 15px 30px 15px 24px;
  box-shadow: 0 4px 18px #0033cc22, 0 1.5px 0 #e3f0ff;
  display: flex;
  align-items: center;
  gap: 10px;
  border: none;
  position: relative;
  overflow: hidden;
  background: #fff;
  transition: background 0.18s, color 0.18s, box-shadow 0.18s, border 0.18s, transform 0.13s;
}
#adminPanelModal .admin-menu-btns .btn:after {
  content: '';
  position: absolute;
  right: 0; bottom: 0;
  width: 54px; height: 54px;
  background: linear-gradient(135deg, #4fc3f7 0%, #e3f0ff 100%);
  border-bottom-right-radius: 32px;
  z-index: 1;
  opacity: 0.18;
  pointer-events: none;
  transition: opacity 0.18s;
}
#adminPanelModal .admin-menu-btns .btn > * {
  position: relative;
  z-index: 2;
}
#adminPanelModal .admin-menu-btns .btn:hover {
  box-shadow: 0 8px 32px #0033cc33;
  transform: translateY(-2px) scale(1.03);
}
#adminPanelModal .admin-menu-btns .btn-blue {
  color: #0033cc;
  background: #fff;
  border: 2.5px solid #1976d2;
}
#adminPanelModal .admin-menu-btns .btn-blue:hover {
  background: linear-gradient(90deg, #0033cc 60%, #4fc3f7 100%);
  color: #fff;
  border-color: #0033cc;
  box-shadow: 0 8px 32px #0033cc33;
}
#adminPanelModal .admin-menu-btns .btn-red {
  color: #c62828;
  background: #fff;
  border: 2.5px solid #e57373;
}
#adminPanelModal .admin-menu-btns .btn-red:hover {
  background: linear-gradient(90deg, #e53935 60%, #ffb3b3 100%);
  color: #fff;
  border-color: #c62828;
  box-shadow: 0 8px 32px #e5393522;
}
#adminPanelModal .admin-menu-btns .btn-green {
  color: #2e7d32;
  background: #fff;
  border: 2.5px solid #81c784;
}
#adminPanelModal .admin-menu-btns .btn-green:hover {
  background: linear-gradient(90deg, #43a047 60%, #b9f6ca 100%);
  color: #fff;
  border-color: #2e7d32;
  box-shadow: 0 8px 32px #43a04722;
}
#adminPanelModal .admin-menu-btns .btn-yellow {
  color: #f9a825;
  background: #fff;
  border: 2.5px solid #ffe082;
}
#adminPanelModal .admin-menu-btns .btn-yellow:hover {
  background: linear-gradient(90deg, #ffd600 60%, #fffde7 100%);
  color: #fff;
  border-color: #f9a825;
  box-shadow: 0 8px 32px #ffd60022;
}
#adminPanelModal .admin-menu-btns .btn-gray {
  color: #444;
  background: #eceff1;
  border: 2.5px solid #b0bec5;
}
#adminPanelModal .admin-menu-btns .btn-gray:hover {
  background: linear-gradient(90deg, #78909c 60%, #eceff1 100%);
  color: #fff;
  border-color: #78909c;
  box-shadow: 0 8px 32px #78909c22;
}
#adminPanelModal .admin-section {
  display: none;
}
#adminPanelModal .admin-section.active {
  display: block;
  animation: fadeIn 0.4s;
}
#adminPanelModal .alert {
  font-size: 1.01rem;
}
#adminPanelModal .form-label {
  font-weight: 600;
}
#adminPanelModal .form-control, #adminPanelModal .form-select {
  border-radius: 10px;
}
</style>
<div class="modal fade" id="adminPanelModal" tabindex="-1" aria-labelledby="adminPanelModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="adminPanelModalLabel"><i class="fas fa-user-shield me-2"></i>Panel de Administrador</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        <div id="admin-main-menu" class="admin-section active">
          <div class="admin-menu-btns d-flex">
            <button class="btn btn-blue" onclick="showAdminSection('admin-reserva-section')">
              <i class="fas fa-phone-alt me-2"></i>Reservas Telefónicas
            </button>
            <button class="btn btn-red" onclick="bloquearReservasAdmin()">
              <i class="fas fa-ban me-2"></i>Bloquear Reservas
            </button>
            <button class="btn btn-green" onclick="habilitarReservasAdmin()">
              <i class="fas fa-check-circle me-2"></i>Habilitar Reservas
            </button>
            <button class="btn btn-blue" onclick="restablecerHorarios()">
              <i class="fas fa-redo me-2"></i>Restablecer Horarios
            </button>
            <button class="btn btn-yellow" onclick="showAdminSection('admin-horario-section')">
              <i class="fas fa-clock me-2"></i>Horario Especial
            </button>
            <button class="btn btn-gray" data-bs-dismiss="modal">
              <i class="fas fa-sign-out-alt me-2"></i>Cerrar Panel
            </button>
          </div>
        </div>
        <div id="admin-reserva-section" class="admin-section">
          <h4 class="text-primary mb-3"><i class="fas fa-phone-alt me-2"></i>Reserva Telefónica (Administrador)</h4>
          <div class="alert alert-info">Este formulario es exclusivo para reservas realizadas por el administrador vía telefónica.</div>
          <form id="adminReservaForm" class="needs-validation" novalidate>
            <!-- Copia del formulario de reserva de cancha -->
            <fieldset class="border rounded-3 p-3 mb-3 shadow-sm">
              <legend class="float-none w-auto px-3 fs-6 fw-bold text-primary mb-2">
                <i class="fas fa-calendar-check me-2"></i>Datos de la Reserva
              </legend>
              <div class="row g-3">
                <div class="col-md-4">
                  <div class="form-floating">
                    <select class="form-select" id="admin-cancha" required>
                      <option value="" disabled selected>Seleccione una cancha</option>
                      <option value="Cancha 1">Cancha 1</option>
                      <option value="Cancha 2">Cancha 2</option>
                    </select>
                    <label for="admin-cancha"><i class="fas fa-futbol me-2"></i>Cancha</label>
                    <div class="invalid-feedback">Seleccione una cancha.</div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-floating">
                    <input type="date" class="form-control" id="admin-date" required>
                    <label for="admin-date"><i class="fas fa-calendar-alt me-2"></i>Fecha de Reserva</label>
                    <div class="invalid-feedback">Seleccione una fecha válida.</div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-floating">
                      <option value="5">5 horas</option>
                    </select>
                    <label for="admin-cantidad-horas"><i class="fas fa-clock me-2"></i>Cantidad de horas</label>
                    <div class="invalid-feedback">Seleccione la cantidad de horas.</div>
                  </div>
                </div>
              </div>
              <div class="mt-3">
                <label class="form-label fw-semibold">Horarios Disponibles</label>
                <div class="time-slots" id="adminTimeSlots"></div>
                <input type="hidden" id="admin-selected-time" required>
              </div>
            </fieldset>
            <fieldset class="border rounded-3 p-3 mb-3 shadow-sm">
              <legend class="float-none w-auto px-3 fs-6 fw-bold text-primary mb-2">
                <i class="fas fa-user me-2"></i>Datos de Contacto
              </legend>
              <div class="row g-3 align-items-center">
                <div class="col-md-4">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="admin-name" placeholder="Nombre completo" required>
                    <label for="admin-name"><i class="fas fa-user me-2"></i>Nombre</label>
                    <div class="invalid-feedback">Ingrese su nombre completo.</div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-floating">
                    <input type="tel" class="form-control" id="admin-phone" placeholder="+56 9 1234 5678" required>
                    <label for="admin-phone"><i class="fas fa-phone me-2"></i>Teléfono</label>
                    <div class="invalid-feedback">Ingrese un teléfono válido.</div>
                  </div>
                </div>
              </div>
            </fieldset>
            <fieldset class="border rounded-3 p-3 mb-3 shadow-sm">
              <legend class="float-none w-auto px-3 fs-6 fw-bold text-primary mb-2">
                <i class="fas fa-credit-card me-2"></i>Pago y Comentarios
              </legend>
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="form-floating">
                    <select class="form-select" id="admin-payment" required>
                      <option value="" disabled selected>Seleccione un método de pago</option>
                      <option value="Transferencia">Transferencia Bancaria (En el lugar)</option>
                      <option value="Efectivo">Efectivo en el lugar</option>
                      <option value="Tarjeta">Tarjeta de Crédito/Débito (En el Lugar)</option>
                    </select>
                    <label for="admin-payment"><i class="fas fa-credit-card me-2"></i>Método de Pago</label>
                    <div class="invalid-feedback">Seleccione un método de pago.</div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <textarea class="form-control" id="admin-comments" placeholder="Comentarios adicionales" style="height: 58px"></textarea>
                    <label for="admin-comments"><i class="fas fa-comment-dots me-2"></i>Comentarios</label>
                  </div>
                </div>
              </div>
            </fieldset>
            <div class="alert alert-info mt-4">
              <i class="fas fa-info-circle me-2"></i>
              <strong>Nota:</strong> El pago debe realizarse antes de utilizar las instalaciones.
            </div>
            <div class="mb-3 text-end">
              <span id="admin-total-pagar" class="fw-bold fs-5"></span>
            </div>
            <div class="text-center mt-4 d-grid gap-2 d-md-flex justify-content-md-center">
              <button type="submit" class="btn btn-primary btn-lg me-3">
                <span class="spinner-border spinner-border-sm d-none" id="spinnerAdminReserva" role="status" aria-hidden="true"></span>
                <i class="fas fa-paper-plane me-2"></i>Enviar Reserva Telefónica
              </button>
              <button type="button" class="btn btn-outline-secondary btn-lg" onclick="showAdminSection('admin-main-menu')">
                <i class="fas fa-arrow-left me-2"></i>Volver al Menú Admin
              </button>
            </div>
          </form>
        </div>
        <div id="admin-horario-section" class="admin-section">
          <h4 class="text-warning mb-3"><i class="fas fa-clock me-2"></i>Horario Especial</h4>
          <div class="alert alert-warning">Configura hasta qué hora se pueden tomar reservas en una fecha específica.</div>
          <div class="row g-3 align-items-end">
            <div class="col-md-6">
              <label for="fecha-horario-especial-admin" class="form-label">Fecha</label>
              <input type="date" class="form-control" id="fecha-horario-especial-admin">
            </div>
            <div class="col-md-4">
              <label for="hora-tope-especial-admin" class="form-label">Hora máxima</label>
              <input type="time" class="form-control" id="hora-tope-especial-admin">
            </div>
            <div class="col-md-2">
              <button class="btn btn-warning w-100" onclick="guardarHorarioEspecialAdmin()"><i class="fas fa-save me-2"></i>Guardar</button>
            </div>
          </div>
          <div class="text-center mt-4">
            <button class="btn btn-outline-secondary" onclick="showAdminSection('admin-main-menu')"><i class="fas fa-arrow-left me-2"></i>Volver al Menú Admin</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Firebase y función enviarATelegram para el panel admin -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Botón para abrir login admin
  const adminLoginBtn = document.getElementById('adminLoginBtn');
  if(adminLoginBtn){
    adminLoginBtn.onclick = function() {
      const loginModal = new bootstrap.Modal(document.getElementById('adminLoginModal'));
      loginModal.show();
    };
  }
  // Login admin y mostrar panel
  const adminLoginForm = document.getElementById('adminLoginForm');
  if(adminLoginForm){
    adminLoginForm.onsubmit = function(e) {
      e.preventDefault();
      const user = document.getElementById('admin-user').value;
      const pass = document.getElementById('admin-pass').value;
      if (user === 'admin' && pass === '1234') {
        bootstrap.Modal.getInstance(document.getElementById('adminLoginModal')).hide();
        setTimeout(() => {
          const panelModal = new bootstrap.Modal(document.getElementById('adminPanelModal'));
          panelModal.show();
          showAdminSection('admin-main-menu');
        }, 400);
      } else {
        alert('Usuario o contraseña incorrectos');
      }
    };
  }
});

// Configuración de tu proyecto Firebase
const firebaseConfig = {
  apiKey: "TU_API_KEY",
  authDomain: "quillayquen-b7b22.firebaseapp.com",
  databaseURL: "https://quillayquen-b7b22-default-rtdb.firebaseio.com/",
  projectId: "quillayquen-b7b22",
  storageBucket: "quillayquen-b7b22.appspot.com",
  messagingSenderId: "TU_MESSAGING_SENDER_ID",
  appId: "TU_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
// Función para enviar mensajes a Telegram
function enviarATelegram(mensaje) {
  const TELEGRAM_TOKEN = '7909302467:AAHJ8fU5cEBZL9eYZ5dEwP55PZ3-xy3D6Ew';
  const CHAT_ID = '-1002477396042';
  fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ chat_id: CHAT_ID, text: mensaje, parse_mode: 'Markdown' })
  });
}

// Función para restablecer horarios eliminando todas las reservas
window.restablecerHorarios = function() {
  if (!confirm('¿Está seguro que desea restablecer los horarios? Esto eliminará todas las reservas existentes.')) {
    return;
  }
  db.ref('reservas').remove()
    .then(() => {
      alert('Todos los horarios han sido restablecidos y están disponibles.');
    })
    .catch(error => {
      console.error('Error al restablecer horarios:', error);
      alert('Error al restablecer horarios. Intente nuevamente.');
    });
};

// Variable global para reservas
window.reservas = [];
// Cargar reservas desde Firebase y mantener actualizada la variable global
function cargarReservasDesdeFirebase() {
  db.ref('reservas').on('value', function(snapshot) {
    const data = snapshot.val();
    if (data) {
      // Convertir objeto a array y normalizar campos
      window.reservas = Object.values(data).map(r => ({
        ...r,
        fecha: r.fecha || '',
        cancha: r.cancha || '',
        recinto: r.recinto || '',
        bloques: r.bloques || [],
        hora: r.hora || ''
      }));
    } else {
      window.reservas = [];
    }
  });
}
cargarReservasDesdeFirebase();

// Escuchar cambios en mantención y actualizar UI
window.mantencionActiva = false;
function actualizarMantencionUI(mantencion) {
  const aviso = document.getElementById('mantencionAviso');
  const btnReserva = document.querySelector('.btn-reserva');
  window.mantencionActiva = !!mantencion;
  if (mantencion) {
    if (aviso) aviso.style.display = 'block';
    if (btnReserva) btnReserva.style.display = 'none';
  } else {
    if (aviso) aviso.style.display = 'none';
    if (btnReserva) btnReserva.style.display = '';
  }
}
db.ref('mantencion').on('value', function(snapshot) {
  const mant = !!snapshot.val();
  actualizarMantencionUI(mant);
});

// Asegura que las funciones estén en el scope global para los botones del panel admin
window.showAdminSection = function(sectionId) {
  document.querySelectorAll('#adminPanelModal .admin-section').forEach(sec => sec.classList.remove('active'));
  document.getElementById(sectionId).classList.add('active');
};
window.bloquearReservasAdmin = function() {
  db.ref('mantencion').set(true);
  // UI feedback inmediato
  actualizarMantencionUI(true);
  alert('¡Reservas bloqueadas por mantención!');
};
window.habilitarReservasAdmin = function() {
  db.ref('mantencion').set(false);
  // UI feedback inmediato
  actualizarMantencionUI(false);
  alert('¡Reservas habilitadas nuevamente!');
};
// Mostrar formularios principales
// Bloquea apertura de formularios si está en mantención
window.showForm = function(tipo) {
  if (window.mantencionActiva) {
    alert('⛔ Las reservas están temporalmente bloqueadas por mantención. Intenta más tarde.');
    return;
  }
  hideAllSections();
  if (tipo === 'reserva') {
    const reservaForm = document.getElementById('reserva-form');
    if (reservaForm) {
      reservaForm.style.display = 'block';
      reservaForm.classList.add('active');
    }
    generarHorariosDisponibles();
  } else if (tipo === 'cotizacion') {
    const cotizacionForm = document.getElementById('cotizacion-form');
    if (cotizacionForm) {
      cotizacionForm.style.display = 'block';
      cotizacionForm.classList.add('active');
    }
  }
};
window.showCancelForm = function() {
  hideAllSections();
  document.getElementById('cancel-form').classList.add('active');
};
// Oculta todos los formularios y secciones principales
window.hideAllSections = function() {
  document.querySelectorAll('.form-section, .content-section').forEach(function(sec) {
    sec.classList.remove('active');
  });
};
// Oculta todos los formularios (alias para compatibilidad)
window.hideForms = function() {
  window.hideAllSections();
};
// Generar horarios disponibles para reservas telefónicas admin (igual que usuario)
window.generarHorariosDisponiblesAdmin = function() {
  const canchaSelect = document.getElementById('admin-cancha');
  const dateInput = document.getElementById('admin-date');
  const cantidadHoras = parseInt(document.getElementById('admin-cantidad-horas').value, 10);
  const selectedCancha = canchaSelect.value;
  const selectedDate = dateInput.value;
  const timeSlotsContainer = document.getElementById('adminTimeSlots');
  const totalPagar = document.getElementById('admin-total-pagar');
  const valorHora = 24000;
  timeSlotsContainer.innerHTML = '';
  totalPagar.textContent = '';
  if (!selectedCancha) {
    timeSlotsContainer.innerHTML = '<p class="text-muted">Seleccione una cancha primero</p>';
    return;
  }
  if (!selectedDate) {
    timeSlotsContainer.innerHTML = '<p class="text-muted">Seleccione una fecha primero</p>';
    return;
  }
  db.ref('horarios_especiales/' + selectedDate).once('value').then(snapshot => {
    let horaTope = snapshot.val() || "23:00";
    const reservasFechaCancha = reservas.filter(reserva => reserva.fecha === selectedDate && reserva.cancha === selectedCancha);
    let horasOcupadas = [];
    reservasFechaCancha.forEach(reserva => {
      if (Array.isArray(reserva.bloques)) {
        horasOcupadas = horasOcupadas.concat(reserva.bloques);
      } else if (reserva.hora) {
        horasOcupadas.push(reserva.hora);
      }
    });
    const horaTopeNum = parseInt(horaTope.split(':')[0], 10);
    let bloques = [];
    for (let hora = 12; hora <= horaTopeNum - cantidadHoras; hora++) {
      let bloqueDisponible = true;
      let bloqueHoras = [];
      for (let i = 0; i < cantidadHoras; i++) {
        const horaBloque = `${(hora + i).toString().padStart(2, '0')}:00`;
        if (horasOcupadas.includes(horaBloque)) {
          bloqueDisponible = false;
          break;
        }
        bloqueHoras.push(horaBloque);
      }
      bloques.push({
        inicio: `${hora.toString().padStart(2, '0')}:00`,
        fin: `${(hora + cantidadHoras).toString().padStart(2, '0')}:00`,
        horas: bloqueHoras,
        disponible: bloqueDisponible
      });
    }
    bloques.forEach((bloque, idx) => {
      const slotElement = document.createElement('div');
      slotElement.className = `time-slot ${bloque.disponible ? '' : 'booked'}`;
      slotElement.textContent = `${bloque.inicio} - ${bloque.fin}`;
      slotElement.dataset.inicio = bloque.inicio;
      slotElement.dataset.fin = bloque.fin;
      slotElement.dataset.horas = JSON.stringify(bloque.horas);
      if (bloque.disponible) {
        slotElement.addEventListener('click', function() {
          document.querySelectorAll('#adminTimeSlots .time-slot').forEach(slot => {
            slot.classList.remove('selected');
          });
          this.classList.add('selected');
          document.getElementById('admin-selected-time').value = bloque.inicio;
          totalPagar.textContent = `Total a pagar: $${(valorHora * cantidadHoras).toLocaleString('es-CL')}`;
        });
      } else {
        slotElement.title = "Bloque no disponible";
      }
      timeSlotsContainer.appendChild(slotElement);
    });
    const selectedSlot = document.querySelector('#adminTimeSlots .time-slot.selected');
    if (selectedSlot) {
      totalPagar.textContent = `Total a pagar: $${(valorHora * cantidadHoras).toLocaleString('es-CL')}`;
    }
  });
};
// Listeners para actualizar horarios admin
['admin-cancha','admin-date','admin-cantidad-horas'].forEach(id => {
  const el = document.getElementById(id);
  if(el) el.addEventListener('change', window.generarHorariosDisponiblesAdmin);
});
// Enviar reserva telefónica a Telegram y mostrar botón volver
const adminReservaForm = document.getElementById('adminReservaForm');
if(adminReservaForm){
  adminReservaForm.onsubmit = function(e) {
    e.preventDefault();
    const nombre = document.getElementById('admin-name').value;
    const telefono = document.getElementById('admin-phone').value;
    const cancha = document.getElementById('admin-cancha').value;
    const fecha = document.getElementById('admin-date').value;
    const horas = document.getElementById('admin-cantidad-horas').value;
    const horario = document.getElementById('admin-selected-time').value;
    const pago = document.getElementById('admin-payment').value;
    const comentarios = document.getElementById('admin-comments').value;
    const mensaje = `*Reserva realizada por ADMINISTRADOR*\n*Nombre:* ${nombre}\n*Teléfono:* ${telefono}\n*Cancha:* ${cancha}\n*Fecha:* ${fecha}\n*Hora:* ${horario}\n*Duración:* ${horas} hora(s)\n*Pago:* ${pago}\n*Comentarios:* ${comentarios}`;
    enviarATelegram(mensaje);
    document.getElementById('adminReservaForm').reset();
    document.getElementById('admin-reserva-section').innerHTML = `
      <div class='alert alert-success text-center'><i class='fas fa-check-circle me-2'></i>Reserva enviada correctamente.</div>
      <div class='text-center mt-4'><button class='btn btn-outline-primary btn-sm' onclick="showAdminSection('admin-main-menu')"><i class='fas fa-arrow-left me-2'></i>Volver al Menú Admin</button></div>
    `;
  };
}

// Nueva función para generar horarios disponibles para formulario normal de reserva
window.generarHorariosDisponibles = function() {
  const canchaSelect = document.getElementById('cancha');
  const dateInput = document.getElementById('date');
  const cantidadHoras = parseInt(document.getElementById('cantidad-horas').value, 10);
  const selectedCancha = canchaSelect.value;
  const selectedDate = dateInput.value;
  const timeSlotsContainer = document.getElementById('timeSlots');
  const totalPagar = document.getElementById('total-pagar');
  const valorHora = 24000;
  timeSlotsContainer.innerHTML = '';
  totalPagar.textContent = '';
  if (!selectedCancha) {
    timeSlotsContainer.innerHTML = '<p class="text-muted">Seleccione una cancha primero</p>';
    return;
  }
  if (!selectedDate) {
    timeSlotsContainer.innerHTML = '<p class="text-muted">Seleccione una fecha primero</p>';
    return;
  }
  db.ref('horarios_especiales/' + selectedDate).once('value').then(snapshot => {
    let horaTope = snapshot.val() || "23:00";
    const reservasFechaCancha = reservas.filter(reserva => reserva.fecha === selectedDate && reserva.cancha === selectedCancha);
    let horasOcupadas = [];
    reservasFechaCancha.forEach(reserva => {
      if (Array.isArray(reserva.bloques) && reserva.bloques.length > 0) {
        horasOcupadas = horasOcupadas.concat(reserva.bloques);
      } else if (reserva.hora && reserva.cantidadHoras) {
        // Agregar todas las horas ocupadas según la duración
        const horaInicio = parseInt(reserva.hora.split(':')[0], 10);
        for (let i = 0; i < reserva.cantidadHoras; i++) {
          const horaBloque = `${(horaInicio + i).toString().padStart(2, '0')}:00`;
          horasOcupadas.push(horaBloque);
        }
      } else if (reserva.hora) {
        horasOcupadas.push(reserva.hora);
      }
    });
    const horaTopeNum = parseInt(horaTope.split(':')[0], 10);
    let bloques = [];
    for (let hora = 12; hora <= horaTopeNum - cantidadHoras; hora++) {
      let bloqueDisponible = true;
      let bloqueHoras = [];
      for (let i = 0; i < cantidadHoras; i++) {
        const horaBloque = `${(hora + i).toString().padStart(2, '0')}:00`;
        if (horasOcupadas.includes(horaBloque)) {
          bloqueDisponible = false;
          break;
        }
        bloqueHoras.push(horaBloque);
      }
      bloques.push({
        inicio: `${hora.toString().padStart(2, '0')}:00`,
        fin: `${(hora + cantidadHoras).toString().padStart(2, '0')}:00`,
        horas: bloqueHoras,
        disponible: bloqueDisponible
      });
    }
    bloques.forEach((bloque, idx) => {
      const slotElement = document.createElement('div');
      slotElement.className = `time-slot ${bloque.disponible ? '' : 'booked'}`;
      slotElement.textContent = `${bloque.inicio} - ${bloque.fin}`;
      slotElement.dataset.inicio = bloque.inicio;
      slotElement.dataset.fin = bloque.fin;
      slotElement.dataset.horas = JSON.stringify(bloque.horas);
      if (bloque.disponible) {
        slotElement.addEventListener('click', function() {
          document.querySelectorAll('#timeSlots .time-slot').forEach(slot => {
            slot.classList.remove('selected');
          });
          this.classList.add('selected');
          document.getElementById('selected-time').value = bloque.inicio;
          totalPagar.textContent = `Total a pagar: $${(valorHora * cantidadHoras).toLocaleString('es-CL')}`;
        });
      } else {
        slotElement.title = "Bloque no disponible";
      }
      timeSlotsContainer.appendChild(slotElement);
    });
    const selectedSlot = document.querySelector('#timeSlots .time-slot.selected');
    if (selectedSlot) {
      totalPagar.textContent = `Total a pagar: $${(valorHora * cantidadHoras).toLocaleString('es-CL')}`;
    }
  });
};

// Agregar event listeners para actualizar horarios dinámicamente
document.addEventListener('DOMContentLoaded', function() {
  const canchaSelect = document.getElementById('cancha');
  const dateInput = document.getElementById('date');
  const cantidadHorasSelect = document.getElementById('cantidad-horas');
  const phoneInput = document.getElementById('phone');
  const reservationForm = document.getElementById('reservationForm');

  if (canchaSelect) canchaSelect.addEventListener('change', generarHorariosDisponibles);
  if (dateInput) dateInput.addEventListener('change', generarHorariosDisponibles);
  if (cantidadHorasSelect) cantidadHorasSelect.addEventListener('change', generarHorariosDisponibles);

    if (reservationForm && phoneInput) {
      // Función para crear lock temporal en Firebase
      function crearLock(cancha, fecha, hora, duracion) {
        const lockKey = `${cancha}_${fecha}_${hora}`;
        const lockRef = db.ref('locks/' + lockKey);
        const now = Date.now();
        const lockExpiry = now + 5 * 60 * 1000; // 5 minutos en ms

        return lockRef.transaction(currentData => {
          if (currentData === null || currentData.expiry < now) {
            return { expiry: lockExpiry };
          }
          return; // Abort transaction si lock existe y no expiró
        });
      }

      // Función para eliminar lock
      function eliminarLock(cancha, fecha, hora) {
        const lockKey = `${cancha}_${fecha}_${hora}`;
        const lockRef = db.ref('locks/' + lockKey);
        return lockRef.remove();
      }

      reservationForm.onsubmit = function(e) {
        e.preventDefault();
        const nombre = document.getElementById('name').value;
        const telefono = phoneInput.value;
        const cancha = canchaSelect.value;
        const fecha = dateInput.value;
        const cantidadHoras = parseInt(cantidadHorasSelect.value, 10);
        const horario = document.getElementById('selected-time').value;
        const pago = document.getElementById('payment').value;
        const comentarios = document.getElementById('comments').value;

        const telefonoRegex = /^\+569\d{8}$/;
        if (!telefonoRegex.test(telefono)) {
          alert('📞 El número de teléfono debe tener el formato +569XXXXXXXX\nEjemplo: +56912345678');
          phoneInput.focus();
          return false;
        }

        if (!horario) {
          alert('⏰ Por favor, seleccione un horario disponible para la reserva.');
          return false;
        }

        // Deshabilitar botón para evitar envíos múltiples
        const submitButton = reservationForm.querySelector('button[type="submit"]');
        submitButton.disabled = true;

        // Intentar crear lock para la reserva
        crearLock(cancha, fecha, horario, cantidadHoras).then(result => {
          if (!result.committed) {
            alert('⚠️ Lo sentimos, este horario ya está reservado. Por favor, seleccione otro.');
            submitButton.disabled = false;
            return;
          }

          // Guardar reserva en Firebase
          const nuevaReserva = {
            nombre,
            telefono,
            cancha,
            fecha,
            bloques: [], // Se puede agregar lógica para bloques si es necesario
            hora: horario,
            cantidadHoras,
            pago,
            comentarios
          };

          db.ref('reservas').push(nuevaReserva)
            .then(() => {
              // Enviar mensaje a Telegram
              const mensaje = `📢 *Nueva Reserva de Cancha* 📢\n\n👤 *Nombre:* ${nombre}\n📱 *Teléfono:* ${telefono}\n⚽ *Cancha:* ${cancha}\n📅 *Fecha:* ${fecha}\n⏰ *Hora:* ${horario}\n🕒 *Duración:* ${cantidadHoras} hora(s)\n💳 *Pago:* ${pago}\n📝 *Comentarios:* ${comentarios}`;
              enviarATelegram(mensaje);

              // Eliminar lock tras guardar reserva
              eliminarLock(cancha, fecha, horario);

              alert('✅ Reserva enviada correctamente. ¡Gracias!');
              reservationForm.reset();
              document.getElementById('timeSlots').innerHTML = '';
              document.getElementById('total-pagar').textContent = '';
              submitButton.disabled = false;
            })
            .catch(error => {
              alert('❌ Error al enviar la reserva. Por favor, intente nuevamente.');
              console.error('Error Firebase:', error);
              // Eliminar lock si falla guardar reserva
              eliminarLock(cancha, fecha, horario);
              submitButton.disabled = false;
            });
        }).catch(error => {
          alert('❌ Error al verificar disponibilidad. Por favor, intente nuevamente.');
          console.error('Error al crear lock:', error);
          submitButton.disabled = false;
        });
      };
    }
});
</script>
<script>
  // Función para mostrar/ocultar secciones por id
  function toggleSection(sectionId) {
    const sections = document.querySelectorAll('.content-section');
    sections.forEach(section => {
      if (section.id === sectionId) {
        if (section.style.display === 'block' || section.classList.contains('active')) {
          section.style.display = 'none';
          section.classList.remove('active');
        } else {
          section.style.display = 'block';
          section.classList.add('active');
        }
      } else {
        section.style.display = 'none';
        section.classList.remove('active');
      }
    });
    // También ocultar la galería si está abierta
    const gallery = document.getElementById('gallery-section');
    if (gallery) {
      gallery.style.display = 'none';
      gallery.classList.remove('active');
    }
  }

  // Función para mostrar/ocultar la galería
  function toggleGallery() {
    const gallery = document.getElementById('gallery-section');
    if (!gallery) return;
    if (gallery.style.display === 'block' || gallery.classList.contains('active')) {
      gallery.style.display = 'none';
      gallery.classList.remove('active');
    } else {
      // Ocultar otras secciones
      hideAllSections();
      gallery.style.display = 'block';
      gallery.classList.add('active');
    }
  }

  // Función para ocultar todas las secciones y formularios
  function hideAllSections() {
    const sections = document.querySelectorAll('.content-section, .form-section');
    sections.forEach(section => {
      section.style.display = 'none';
      section.classList.remove('active');
    });
  }

  // Función para mostrar el formulario de cancelación
  function showCancelForm() {
    hideAllSections();
    const cancelForm = document.getElementById('cancel-form');
    if (cancelForm) {
      cancelForm.style.display = 'block';
      cancelForm.classList.add('active');
    }
  }

  // Función para guardar horario especial en Firebase
  function guardarHorarioEspecialAdmin() {
    const fechaInput = document.getElementById('fecha-horario-especial-admin');
    const horaInput = document.getElementById('hora-tope-especial-admin');
    const fecha = fechaInput.value;
    const horaMaxima = horaInput.value;

    if (!fecha) {
      alert('Por favor, seleccione una fecha válida.');
      return;
    }
    if (!horaMaxima) {
      alert('Por favor, seleccione una hora máxima válida.');
      return;
    }

    // Guardar en Firebase
    db.ref('horarios_especiales/' + fecha).set(horaMaxima)
      .then(() => {
        alert('Horario especial guardado correctamente.');
        // Opcional: cerrar modal o limpiar inputs
        fechaInput.value = '';
        horaInput.value = '';
        // Actualizar UI si es necesario
      })
      .catch((error) => {
        console.error('Error al guardar horario especial:', error);
        alert('Error al guardar el horario especial. Intente nuevamente.');
      });
  }

  // Funcionalidad para buscar y cancelar reservas
  document.addEventListener('DOMContentLoaded', function() {
    const btnBuscarReserva = document.getElementById('btnBuscarReserva');
    const cancelContactInput = document.getElementById('cancel-contact');
    const listaReservasCancel = document.getElementById('listaReservasCancel');
    const selectReservaCancel = document.getElementById('selectReservaCancel');
    const datosReservaCancel = document.getElementById('datosReservaCancel');
    const btnCancelarReserva = document.getElementById('btnCancelarReserva');
    let reservasEncontradas = {};

    btnBuscarReserva.addEventListener('click', function() {
      const contacto = cancelContactInput.value.trim();
      if (!contacto) {
        alert('Por favor, ingrese un RUT o número telefónico válido.');
        return;
      }
      // Limpiar resultados previos
      selectReservaCancel.innerHTML = '';
      datosReservaCancel.style.display = 'none';
      datosReservaCancel.innerHTML = '';
      btnCancelarReserva.disabled = true;
      reservasEncontradas = {};

      // Buscar reservas por teléfono
      db.ref('reservas').orderByChild('telefono').equalTo(contacto).once('value')
        .then(snapshot => {
          if (snapshot.exists()) {
            reservasEncontradas = snapshot.val();
            mostrarReservasEncontradas(reservasEncontradas);
          } else {
            // Buscar por RUT si no encontró por teléfono
            db.ref('reservas').orderByChild('rut').equalTo(contacto).once('value')
              .then(snapRut => {
                if (snapRut.exists()) {
                  reservasEncontradas = snapRut.val();
                  mostrarReservasEncontradas(reservasEncontradas);
                } else {
                  alert('No se encontraron reservas con ese RUT o teléfono.');
                  listaReservasCancel.style.display = 'none';
                }
              });
          }
        })
        .catch(error => {
          console.error('Error buscando reservas:', error);
          alert('Error al buscar reservas. Intente nuevamente.');
        });
    });

    function mostrarReservasEncontradas(reservas) {
      listaReservasCancel.style.display = 'block';
      selectReservaCancel.innerHTML = '';
      Object.entries(reservas).forEach(([key, reserva]) => {
        const option = document.createElement('option');
        option.value = key;
        option.textContent = `Fecha: ${reserva.fecha || 'N/A'}, Cancha: ${reserva.cancha || 'N/A'}, Hora: ${reserva.hora || 'N/A'}`;
        selectReservaCancel.appendChild(option);
      });
      mostrarDatosReserva(selectReservaCancel.value);
      btnCancelarReserva.disabled = false;
    }

    selectReservaCancel.addEventListener('change', function() {
      mostrarDatosReserva(this.value);
    });

    function mostrarDatosReserva(key) {
      const reserva = reservasEncontradas[key];
      if (!reserva) {
        datosReservaCancel.style.display = 'none';
        datosReservaCancel.innerHTML = '';
        btnCancelarReserva.disabled = true;
        return;
      }
      datosReservaCancel.style.display = 'block';
      datosReservaCancel.innerHTML = `
        <div class="alert alert-info">
          <p><strong>Reserva seleccionada:</strong></p>
          <p>Nombre: ${reserva.nombre || 'N/A'}</p>
          <p>Cancha: ${reserva.cancha || 'N/A'}</p>
          <p>Fecha: ${reserva.fecha || 'N/A'}</p>
          <p>Hora: ${reserva.hora || 'N/A'}</p>
        </div>
      `;
      btnCancelarReserva.disabled = false;
    }

    btnCancelarReserva.addEventListener('click', function() {
      const key = selectReservaCancel.value;
      if (!key) {
        alert('Seleccione una reserva para cancelar.');
        return;
      }
      if (confirm('¿Está seguro que desea cancelar esta reserva?')) {
        const reserva = reservasEncontradas[key];
        db.ref('reservas/' + key).remove()
          .then(() => {
            alert('Reserva cancelada correctamente.');
            // Enviar mensaje a Telegram
            const mensaje = `❌ *Reserva Cancelada* ❌\n\n👤 *Nombre:* ${reserva.nombre || 'N/A'}\n📱 *Teléfono:* ${reserva.telefono || 'N/A'}\n⚽ *Cancha:* ${reserva.cancha || 'N/A'}\n📅 *Fecha:* ${reserva.fecha || 'N/A'}\n⏰ *Hora:* ${reserva.hora || 'N/A'}`;
            enviarATelegram(mensaje);
            // Limpiar UI
            cancelContactInput.value = '';
            listaReservasCancel.style.display = 'none';
            selectReservaCancel.innerHTML = '';
            datosReservaCancel.style.display = 'none';
            datosReservaCancel.innerHTML = '';
            btnCancelarReserva.disabled = true;
            reservasEncontradas = {};
          })
          .catch(error => {
            console.error('Error al cancelar reserva:', error);
            alert('Error al cancelar la reserva. Intente nuevamente.');
          });
      }
    });
  });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
