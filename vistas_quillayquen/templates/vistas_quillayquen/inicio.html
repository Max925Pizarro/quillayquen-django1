<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vistas  De Quillayquén</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@500;600;700&display=swap" rel="stylesheet">
    <style>/* Estilo para el Botón de Cancelación de Reserva */
.btn-cancelar {
    position: relative;
    background: linear-gradient(135deg, #ff4d4d, #ff1a1a);
    color: var(--white);
    border: none;
    padding: 15px 30px;
    font-size: 1.1rem;
    font-weight: 600;
    border-radius: 50px;
    transition: all 0.4s ease;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(255, 0, 0, 0.3);
    min-width: 220px;
    text-align: center;
}

.btn-cancelar:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(255, 0, 0, 0.4);
}

.btn-cancelar:active {
    transform: translateY(0);
}

.btn-cancelar::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: 0.5s;
}

.btn-cancelar:hover::before {
    left: 100%;
}

        :root {
            --primary-color: #0033cc;
            --primary-dark: #002db3;
            --primary-light: #4d79ff;
            --secondary-color: #0099ff;
            --secondary-dark: #0099ff;
            --dark-color: #002a99;
            --light-color: #f8f9fa;
            --gray-color: #6c757d;
            --light-gray: #e9ecef;
            --white: #ffffff;
            --black: #212529;
        }

        body {
            background-color: var(--light-color);
            color: var(--black);
            font-family: 'Poppins', sans-serif;
            line-height: 1.7;
            padding-top: 90px;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 1rem;
        }

        /* Header Mejorado */
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: var(--white);
            padding: 15px 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1030;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--white);
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
        }

        .navbar-brand:hover {
            color: rgba(255, 255, 255, 0.9);
            transform: translateX(2px);
        }

        .navbar-brand .logo img {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--white);
            box-shadow: 0 2px 6px rgba(0,0,0,0.10);
            transition: all 0.3s ease;
        }

        /* Logo Mejorado */
        .logo {
            position: fixed;
            top: 10px;
            left: 20px;
            z-index: 1031;
            transition: all 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo img {
            width: 48px !important;
            height: 48px !important;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--white);
            box-shadow: 0 2px 6px rgba(0,0,0,0.10);
            transition: all 0.3s ease;
        }

        /* Título más profesional */
        .navbar-title {
            font-size: 1.45rem;
            font-weight: 700;
            color: var(--white);
            letter-spacing: 1px;
            margin-left: 14px;
            font-family: 'Montserrat', 'Poppins', sans-serif;
            text-shadow: 0 2px 6px rgba(0,0,0,0.08);
        }

        /* Botones de Navegación Mejorados */
        .nav-btn {
            position: relative;
            padding: 10px 20px;
            font-size: 0.95rem;
            font-weight: 500;
            border-radius: 30px;
            border: none;
            color: var(--white);
            background-color: rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
            overflow: hidden;
            margin: 0 5px;
        }

        .nav-btn:hover {
            background-color: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .nav-btn:active {
            transform: translateY(0);
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.5s ease;
        }

        .nav-btn:hover::before {
            left: 100%;
        }

        .nav-btn.active {
            background-color: var(--white);
            color: var(--primary-color);
            font-weight: 600;
        }

        /* Botones pequeños */
        .btn-volver-sm {
            padding: 5px 15px !important;
            font-size: 0.85rem !important;
            margin-right: 10px !important;
        }

        /* Carrusel Mejorado */
        .carousel {
            margin-top: 20px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }

        .carousel-item img {
            height: 400px;
            object-fit: cover;
            filter: brightness(0.9);
            transition: transform 0.5s ease;
        }

        .carousel-item:hover img {
            transform: scale(1.02);
        }

        .carousel-caption {
            background: rgba(0, 0, 0, 0.6);
            border-radius: 12px;
            padding: 20px;
            bottom: 70px;
            left: 10%;
            right: 10%;
            backdrop-filter: blur(5px);
        }

        .carousel-caption h5 {
            font-size: 1.8rem;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .carousel-caption p {
            font-size: 1.1rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .carousel-indicators button {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin: 0 5px;
        }

        /* Secciones de contenido (Quiénes Somos, Misión y Visión) */
        .content-section {
            background-color: var(--white);
            padding: 60px 0;
            margin-top: 60px;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            display: none;
        }

        .content-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 10px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .content-section .titulo-seccion {
            color: var(--primary-color);
            font-size: 2.2rem;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            padding-bottom: 15px;
        }

        .content-section .titulo-seccion::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }

        .content-section .descripcion {
            font-size: 1.1rem;
            color: var(--gray-color);
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .content-section img {
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            transition: transform 0.5s ease;
        }

        .content-section img:hover {
            transform: scale(1.05);
        }

        /* Imagen circular pequeña y profesional para "Quiénes Somos" */
        .img-circle-small {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            object-fit: cover;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
            transition: transform 0.5s ease;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .img-circle-small:hover {
            transform: scale(1.05);
        }

        /* Servicios Mejorados */
        .servicios-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 80px 20px;
        }
        
        .titulo-seccion {
            text-align: center;
            color: var(--primary-color);
            font-size: 2.5rem;
            margin-bottom: 50px;
            position: relative;
        }
        
        .titulo-seccion::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            margin: 20px auto 0;
            border-radius: 2px;
        }
        
        .tarjetas-wrapper {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }
        
        .tarjeta-servicio {
            width: 100%;
            max-width: 300px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            transition: all 0.4s ease;
            background: var(--white);
            position: relative;
        }
        
        .tarjeta-servicio:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 28px rgba(0, 0, 0, 0.2);
        }
        
        .imagen-container {
            height: 200px;
            overflow: hidden;
            position: relative;
        }
        
        .imagen-servicio {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .tarjeta-servicio:hover .imagen-servicio {
            transform: scale(1.1);
        }
        
        .contenido-tarjeta {
            padding: 25px;
            text-align: center;
        }
        
        .contenido-tarjeta h3 {
            color: var(--primary-color);
            font-size: 1.4rem;
            margin-bottom: 15px;
            position: relative;
            padding-bottom: 10px;
        }
        
        .contenido-tarjeta h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 2px;
            background: var(--secondary-color);
        }
        
        .contenido-tarjeta p {
            color: var(--gray-color);
            font-size: 1rem;
            line-height: 1.6;
        }

        .precio-servicio {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--secondary-color);
            margin: 15px 0;
        }

        /* Botones de Formularios Mejorados */
        .form-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 50px 0;
            flex-wrap: wrap;
        }

        .form-buttons .btn-reserva,
.form-buttons .btn-cotizacion,
.form-buttons .btn-cancelar {
    background: linear-gradient(135deg, #2563eb, #1e40af);
    color: #fff;
    border: none;
    min-width: 200px;
    max-width: 240px;
    width: 100%;
    padding: 13px 0;
    font-size: 1.08rem;
    font-weight: 600;
    border-radius: 50px;
    text-align: center;
    box-sizing: border-box;
    transition: background 0.3s, transform 0.2s;
    box-shadow: 0 4px 12px rgba(37,99,235,0.10);
}

.form-buttons .btn-reserva:hover,
.form-buttons .btn-cotizacion:hover,
.form-buttons .btn-cancelar:hover {
    background: linear-gradient(135deg, #1e40af, #2563eb);
    transform: translateY(-3px) scale(1.03);
    color: #fff;
}

        /* Formularios Mejorados */
        .form-section {
            display: none;
            padding: 50px 0;
            background-color: var(--light-gray);
        }

        .form-section.active {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Formularios más profesionales y modernos */
.reservation-section, .quote-section {
    background: #fff;
    border-radius: 18px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.12);
    padding: 40px 36px;
    max-width: 500px;
    margin: 40px auto;
    position: relative;
    overflow: hidden;
    border: 1.5px solid var(--light-gray);
    transition: box-shadow 0.3s;
}

.reservation-section:hover, .quote-section:hover {
    box-shadow: 0 12px 36px rgba(0,0,0,0.18);
}

.form-section h3 {
    font-size: 1.45rem;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 18px;
    letter-spacing: 0.5px;
}

.form-label {
    font-weight: 600;
    font-size: 1.05rem;
    color: var(--primary-dark);
    margin-bottom: 6px;
}

.form-control, .form-select, textarea.form-control {
    border-radius: 10px;
    border: 1.5px solid var(--light-gray);
    font-size: 1.03rem;
    padding: 12px 14px;
    transition: border-color 0.2s, box-shadow 0.2s;
    background: #f8fafc;
}

.form-control:focus, .form-select:focus, textarea.form-control:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(0,51,204,0.09);
    background: #fff;
}

input[type="date"].form-control,
input[type="time"].form-control {
    min-height: 44px;
}

textarea.form-control {
    min-height: 90px;
    resize: vertical;
}

.invalid-feedback {
    font-size: 0.93rem;
    color: #e74c3c;
    margin-top: 2px;
}

.alert-info {
    border-radius: 10px;
    background: linear-gradient(90deg, #e3f0ff 60%, #f8fafc 100%);
    color: #1e40af;
    border: none;
    font-size: 1rem;
    box-shadow: 0 2px 8px rgba(37,99,235,0.08);
}

.form-section .btn,
.form-section button[type="submit"] {
    border-radius: 30px;
    font-size: 1.08rem;
    font-weight: 600;
    padding: 10px 28px;
    transition: background 0.2s, box-shadow 0.2s, color 0.2s;
    box-shadow: 0 2px 8px rgba(37,99,235,0.10);
}

.form-section .btn-primary {
    background: linear-gradient(90deg, #2563eb 60%, #1e40af 100%);
    border: none;
    color: #fff;
}

.form-section .btn-primary:hover {
    background: linear-gradient(90deg, #1e40af 60%, #2563eb 100%);
    color: #fff;
}

.form-section .btn-outline-secondary {
    border: 2px solid var(--primary-color);
    color: var(--primary-color);
    background: #fff;
}

.form-section .btn-outline-secondary:hover {
    background: var(--primary-color);
    color: #fff;
}

.form-section .btn-danger {
    background: linear-gradient(90deg, #ff4d4d 60%, #ff1a1a 100%);
    border: none;
    color: #fff;
}

.form-section .btn-danger:hover {
    background: linear-gradient(90deg, #ff1a1a 60%, #ff4d4d 100%);
    color: #fff;
}

.form-section .btn-lg {
    font-size: 1.08rem;
    padding: 10px 28px;
    border-radius: 30px;
}

.form-section .text-center.mt-4 {
    gap: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

        /* Footer Mejorado */
        footer {
            background: linear-gradient(135deg, var(--dark-color), var(--primary-dark));
            color: var(--white);
            padding: 40px 0 20px;
            font-size: 0.95rem;
            position: relative;
        }

        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .footer-links {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px 25px;
        }
        
        .footer-links a {
            color: var(--white);
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .footer-links a:hover {
            color: var(--secondary-color);
            transform: translateY(-2px);
        }
        
        .separator {
            color: rgba(255, 255, 255, 0.3);
            font-weight: 300;
        }
        
        .social-icons {
            display: flex;
            gap: 20px;
        }
        
        .social-icons a {
            color: var(--white);
            background-color: rgba(255, 255, 255, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s ease;
        }
        
        .social-icons a:hover {
            background-color: var(--secondary-color);
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 4px 12px rgba(255, 107, 0, 0.3);
        }

        .copyright {
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-top: 20px;
        }

        /* Modal de Reglas Mejorado */
        .modal-rules {
            border-radius: 16px;
            overflow: hidden;
        }

        .modal-rules .modal-header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: var(--white);
            border-bottom: none;
            padding: 20px;
        }

        .modal-rules .modal-title {
            font-weight: 700;
            font-size: 1.5rem;
        }

        .modal-rules .modal-body {
            padding: 25px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .modal-rules .rule-item {
            padding: 15px 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .modal-rules .rule-item:last-child {
            border-bottom: none;
        }

        .modal-rules .rule-item h5 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 10px;
        }

        .modal-rules .btn-close {
            filter: invert(1);
        }

        /* Horarios disponibles */
        .time-slots {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .time-slot {
            padding: 8px 15px;
            border-radius: 5px;
            background-color: var(--light-gray);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .time-slot:hover {
            background-color: var(--primary-light);
            color: white;
        }

        .time-slot.booked {
            background-color: #dc3545;
            color: white;
            cursor: not-allowed;
        }

        .time-slot.selected {
            background-color: var(--primary-color);
            color: white;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .carousel-item img {
                height: 350px;
            }
            
            .tarjeta-servicio {
                max-width: 280px;
            }
        }
        
        @media (max-width: 768px) {
            body {
                padding-top: 80px;
            }
            
            .navbar-brand {
                font-size: 1.2rem;
            }
            
            .logo img {
                width: 60px;
                height: 60px;
            }
            
            .carousel-item img {
                height: 300px;
            }
            
            .carousel-caption {
                bottom: 20px;
                padding: 15px;
            }
            
            .carousel-caption h5 {
                font-size: 1.4rem;
            }
            
            .carousel-caption p {
                font-size: 1rem;
            }
            
            .form-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn-reserva,
            .btn-cotizacion {
                width: 100%;
                max-width: 280px;
            }
            
            .reservation-section, 
            .quote-section {
                padding: 30px;
            }
        }
        
        @media (max-width: 576px) {
    /* Navbar: logo y título alineados, botón hamburguesa más grande y a la derecha */
    .nav-flex {
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        position: relative;
        min-height: 48px;
        padding-left: 0;
        padding-right: 0;
        width: 100%;
    }
    .logo {
        display: flex;
        align-items: center;
        height: 48px;
        margin-left: 4px;
    }
    .logo img {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        border: 2px solid var(--white);
        object-fit: cover;
    }
    .navbar-title {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        font-size: 1.05rem;
        font-weight: 600;
        color: var(--white);
        letter-spacing: 0.3px;
        white-space: nowrap;
        z-index: 2;
        pointer-events: none;
        display: flex;
        align-items: center;
        height: 48px;
    }
    .navbar-toggler {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        height: 40px;
        width: 40px;
        padding: 4px 10px !important;
        font-size: 1.3rem !important;
        border-radius: 10px !important;
        display: flex;
        align-items: center;
        z-index: 3;
        margin: 0;
    }

    /* Botones principales centrados y más pequeños */
    .form-buttons {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin: 18px 0 12px 0;
    }
    .form-buttons .btn-reserva,
    .form-buttons .btn-cotizacion,
    .form-buttons .btn-cancelar {
        min-width: 110px;
        max-width: 150px;
        width: 80vw;
        padding: 8px 0;
        font-size: 0.95rem;
        border-radius: 28px;
        margin: 0 auto;
        text-align: center;
        box-shadow: 0 2px 8px rgba(37,99,235,0.10);
    }

    /* Footer ordenado y en columna */
    footer {
        padding: 18px 0 8px;
        font-size: 0.93rem;
    }
    .footer-content {
        flex-direction: column;
        align-items: center;
        gap: 10px;
    }
    .footer-links {
        flex-direction: column;
        align-items: center;
        gap: 6px 0;
        text-align: center;
    }
    .footer-links .separator {
        display: none;
    }
    .social-icons {
        justify-content: center;
        gap: 10px;
        margin-top: 8px;
    }
    .social-icons a {
        width: 28px;
        height: 28px;
        font-size: 1.1rem;
    }
    .copyright {
        font-size: 0.89rem;
        margin-top: 6px;
    }
}
    
/* ======= ESTILO UNIFICADO PARA MENÚ ======= */
.nav-btn {
    font-size: 0.9rem !important;
    padding: 8px 16px !important;
    margin: 0 6px;
    border-radius: 25px;
    color: var(--white);
    background-color: rgba(255, 255, 255, 0.15);
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
}

.nav-btn:hover {
    background-color: rgba(255, 255, 255, 0.25);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    color: var(--white);
}

/* Estilos para el menú desplegable en móvil */
@media (max-width: 991px) {
    .navbar-collapse {
        position: absolute !important;
        top: 56px !important;
        right: 16px !important;
        left: auto !important;
        width: 170px !important;
        min-width: 140px;
        max-width: 220px;
        background: var(--white);
        border-radius: 0 0 12px 12px;
        box-shadow: 0 8px 24px rgba(0,51,204,0.10);
        padding: 0.5rem 0.5rem 0.7rem 0.5rem;
        z-index: 1050;
        text-align: left;
        animation: fadeInDown 0.25s;
    }
    .navbar-nav {
        flex-direction: column !important;
        align-items: stretch !important;
        width: 100%;
        gap: 0;
    }
    .nav-item {
        width: 100%;
        margin: 0;
    }
    .nav-btn {
        width: 100%;
        text-align: left;
        font-size: 0.92rem;
        padding: 8px 12px;
        margin: 0 0 2px 0;
        border-radius: 8px;
        color: var(--primary-color);
        background: var(--light-gray);
        border: none;
        transition: background 0.2s, color 0.2s;
    }
    .nav-btn:hover {
        background: var(--primary-light);
        color: var(--white);
    }
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0);}
}
@keyframes fadeInDown {
    from { opacity: 0; transform: translateY(-10px);}
    to { opacity: 1; transform: translateY(0);}
}
</style>
<body>

<!-- Nueva Sección Galería de Imágenes -->
<div id="gallery-section" class="content-section" style="display:none; margin-top: 30px;">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="titulo-seccion">Galería de Archivos</h2>
            <button id="closeGalleryBtn" class="btn btn-sm btn-outline-secondary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="toggleGallery()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="row g-3">
            <div class="col-6 col-md-3 col-lg-1-7">
                <div class="gallery-item card shadow-sm" style="cursor:pointer; border-radius: 12px; overflow: hidden; transition: transform 0.3s;">
<img src="https://scontent-scl2-1.xx.fbcdn.net/v/t39.30808-6/480439569_1136507044764619_7564460146238459567_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeESz8J-kQIjLb079wUPJELU2Kf7MSCktW3Yp_sxIKS1be_B2bZ06FLBirsrTDAqnl4vBSwUWlPDxy9KhAO1VNdm&_nc_ohc=bV--_cnkaIwQ7kNvwEGIGIt&_nc_oc=AdnMHoyHpOMONnny7rMXz125iq3_ZQPaQyyuEDCY3ws2HubtkdR4oRh5Q0NsBJ088scvNXxZD5KYQsetH2KEOWb_&_nc_zt=23&_nc_ht=scontent-scl2-1.xx&_nc_gid=CYZGNqTBe-c8nT-O7lGj5g&oh=00_AfOmjYLYmYIXUNxvSPJS3QXFe-6EJ2YB6dsTFlC5JL5Q6w&oe=6857C84A" alt="Imagen 1" class="card-img-top img-fluid" style="object-fit: cover;">
                    <div class="card-body p-2 text-center">
                        <h6 class="card-title mb-0">Imagen 1</h6>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-3 col-lg-1-7">
                <div class="gallery-item card shadow-sm" style="cursor:pointer; border-radius: 12px; overflow: hidden; transition: transform 0.3s;">
<img src="https://scontent-scl2-1.xx.fbcdn.net/v/t39.30808-6/480575090_1136507041431286_8051415280894658211_n.jpg?_nc_cat=104&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeGN8nPRGba21eGG7dvYKVr5sjVEAW-QZ0iyNUQBb5BnSGvIDylM_oEup8QT7MybI2BDn6VMgVYMy3TVUnZp4Okn&_nc_ohc=Hm81DdTpbFEQ7kNvwG6HWbr&_nc_oc=AdlSSyNIcahMzr49h9QJm7kajclufLJ9ABtgSIf2M-BxzrCfjzU1yI0Ph7Q2AKRvhEGCje_y_uOiKPr55EVFQkFt&_nc_zt=23&_nc_ht=scontent-scl2-1.xx&_nc_gid=PUuweBDJNwVhVvUBBWLN-A&oh=00_AfN7As63Sp_UmyzsBqPlseRjBnZFpYiy3R0XlfnPLLXgFA&oe=6857DAF6" alt="Imagen 2" class="card-img-top img-fluid" style="object-fit: cover;">
                    <div class="card-body p-2 text-center">
                        <h6 class="card-title mb-0">Imagen 2</h6>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-3 col-lg-1-7">
                <div class="gallery-item card shadow-sm" style="cursor:pointer; border-radius: 12px; overflow: hidden; transition: transform 0.3s;">
<img src="https://scontent-scl2-1.xx.fbcdn.net/v/t39.30808-6/480575090_1136507041431286_8051415280894658211_n.jpg?_nc_cat=104&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeGN8nPRGba21eGG7dvYKVr5sjVEAW-QZ0iyNUQBb5BnSGvIDylM_oEup8QT7MybI2BDn6VMgVYMy3TVUnZp4Okn&_nc_ohc=Hm81DdTpbFEQ7kNvwG6HWbr&_nc_oc=AdlSSyNIcahMzr49h9QJm7kajclufLJ9ABtgSIf2M-BxzrCfjzU1yI0Ph7Q2AKRvhEGCje_y_uOiKPr55EVFQkFt&_nc_zt=23&_nc_ht=scontent-scl2-1.xx&_nc_gid=PUuweBDJNwVhVvUBBWLN-A&oh=00_AfN7As63Sp_UmyzsBqPlseRjBnZFpYiy3R0XlfnPLLXgFA&oe=6857DAF6" class="card-img-top img-fluid" style="object-fit: cover;">
                    <div class="card-body p-2 text-center">
                        <h6 class="card-title mb-0">Imagen 3</h6>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-3 col-lg-1-7">
                <div class="gallery-item card shadow-sm" style="cursor:pointer; border-radius: 12px; overflow: hidden; transition: transform 0.3s;">
<img src="https://scontent-scl2-1.xx.fbcdn.net/v/t39.30808-6/480760839_1136507368097920_8538244210954914420_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeFWI2T93ISvAWLTM3wpyZFwb730YVSTV_5vvfRhVJNX_uAgf9vkk_zcDo5Mn79jwR8phaVyLlA2-X0V7QbwAmIg&_nc_ohc=hw7DABeBTIMQ7kNvwEy7Ztb&_nc_oc=AdkaJ-1REoMcAc2LPWqG6O-ESEe6ebj2W3QZyImEL7RJccvh12cbrzgm9YIMdtGQiemZOEWYZahhpQW9cnObbAUD&_nc_zt=23&_nc_ht=scontent-scl2-1.xx&_nc_gid=PRmxTG3FATjER-PCRwOTBQ&oh=00_AfOGFck9P0GHqTms5v-DsQaOGxQ2noBTZfrCVVyRbUukhw&oe=6857C2E7" alt="Imagen 4" class="card-img-top img-fluid" style="object-fit: cover;">
                    <div class="card-body p-2 text-center">
                        <h6 class="card-title mb-0">Imagen 4</h6>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-3 col-lg-1-7">
                <div class="gallery-item card shadow-sm" style="cursor:pointer; border-radius: 12px; overflow: hidden; transition: transform 0.3s;">
                    <img src="https://scontent-scl2-1.xx.fbcdn.net/v/t39.30808-6/480545385_1136507058097951_7623809134010362208_n.jpg?_nc_cat=111&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeHWZcEpu1zowm2P5Zq2OpSo23MgWsgHBCTbcyBayAcEJCjQwTeRuJg6JWKHsDCdghkY3zIBT_jToKVoqshTZvVW&_nc_ohc=nRcXmKvlChMQ7kNvwEBds3r&_nc_oc=AdmEp5tP6AWWK6zDOnnutZZ7KIbaeDvY9xwmgpTuc4ql0q2Nl07bu-HxREfgEK83AFIcSMw4B49UBYcpmhkQfCJp&_nc_zt=23&_nc_ht=scontent-scl2-1.xx&_nc_gid=75O01Pdb-aLxbvPkhh252A&oh=00_AfN9AmQnH6khMAqhNcKv3CxNtkepZPVTaGwRNQ0c6cp8KQ&oe=6857DE68" alt="Imagen 5" class="card-img-top" style="height: 120px; object-fit: cover;">
                    <div class="card-body p-2 text-center">
                        <h6 class="card-title mb-0">Imagen 5</h6>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-3 col-lg-1-7">
                <div class="gallery-item card shadow-sm" style="cursor:pointer; border-radius: 12px; overflow: hidden; transition: transform 0.3s;">
                    <img src="https://scontent-scl2-1.xx.fbcdn.net/v/t39.30808-6/487170588_1775427703189500_705297619829725784_n.jpg?_nc_cat=110&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeGueY7oEKBYBfbzNkls4iBmFOPXDo-YvKsU49cOj5i8q_aE__cDmGZU14KITJcWBXrnnRd7a12jN1dBmN2DC5xL&_nc_ohc=SeYxjLi3Ue8Q7kNvwH_tNjb&_nc_oc=AdkcPEqXUd1B41FZsh2hsWMfC00MVqlfL9Q4WPzZXaldFzA-YthW7itAE0leI7eSbJcGCuA0KCulgzIUGccPfwce&_nc_zt=23&_nc_ht=scontent-scl2-1.xx&_nc_gid=GEChFOe7X563Uvk-C7lRiw&oh=00_AfPWZmY_uQirVDMqSHDs3hvC94oN2j_zDp9IPd3cQRQ_yw&oe=6857DEB5" alt="Imagen 6" class="card-img-top" style="height: 120px; object-fit: cover;">
                    <div class="card-body p-2 text-center">
                        <h6 class="card-title mb-0">Imagen 6</h6>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-3 col-lg-1-7">
                <div class="gallery-item card shadow-sm" style="cursor:pointer; border-radius: 12px; overflow: hidden; transition: transform 0.3s;">
                    <img src="https://scontent-scl2-1.xx.fbcdn.net/v/t39.30808-6/486609882_1775427749856162_6530492319397428147_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeFmXAt2-ZlcQtuT2tQZSU086HTABvmWI0HodMAG-ZYjQWX1GSJ8IPLKtci_ZqNqa5d15lcWbS6WQweSS4BBGdnd&_nc_ohc=RHalmg989rYQ7kNvwE3kU9q&_nc_oc=Adm0YVBEQ_AA22gYb3mIXs7mrdULxu92KnhxMSThLKx81qtHhlc_Sr1LuKB4XXh0Xs9b0fdA7sTENRaYmwRwQlfR&_nc_zt=23&_nc_ht=scontent-scl2-1.xx&_nc_gid=HhBXBET75EkqT9ZlCnwmvg&oh=00_AfNkK8JIM-5OVS9CqIv28MqqrYEVd6qf2D8M2Pz3VLNTIg&oe=6857C393" alt="Imagen 7" class="card-img-top" style="height: 120px; object-fit: cover;">
                    <div class="card-body p-2 text-center">
                        <h6 class="card-title mb-0">Imagen 7</h6>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Header Mejorado -->
<header>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container nav-flex">
            <span class="logo">
              <img src="https://scontent-scl2-1.xx.fbcdn.net/v/t39.30808-6/304119837_1258996464925885_5095840868789037444_n.jpg?_nc_cat=101&ccb=1-7&_nc_sid=6ee11a&_nc_eui2=AeH_Z2XE9t0qpyb8oRA4rGEpsdN8pCcY67Kx03ykJxjrstZl0bsQVquLDrME0PKUm96zPwOTC3w1WqEY6uM7HJCS&_nc_ohc=ranxGzqSK24Q7kNvwHW3qkz&_nc_oc=Adl0Lbs2-eUZ-hkDhakxCrVol_FUOQ2tIxJgIvVmq9ySfdp2hoNE2dpdaQu1VaKjNC5GoP8okVSibws4xjxhQKM3&_nc_zt=23&_nc_ht=scontent-scl2-1.xx&_nc_gid=heqAGiRutOo-dWSZrwZirA&oh=00_AfMfMZFsOak0YHKKJPBTkmMFdw1Szjv6X4LdSAGOSGtb7A&oe=6857B15F" alt="Logo Vistas Quillayquen">
            </span>
            <span class="navbar-title">Vistas De Quillayquén</span>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item">
                        <button class="nav-btn" onclick="toggleSection('quienes-somos')">
                            <i class="fas fa-info-circle me-2"></i>Conócenos
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-btn" onclick="toggleSection('mision-vision')">
                            <i class="fas fa-bullseye me-2"></i>Misión y Visión
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-btn" onclick="toggleGallery()">
                            <i class="fas fa-images me-2"></i>Explorar Archivos
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-btn" data-bs-toggle="modal" data-bs-target="#rulesModal">
                            <i class="fas fa-clipboard-list me-2"></i>Reglas
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-btn" data-bs-toggle="modal" data-bs-target="#priceModal">
                            <i class="fas fa-dollar-sign me-2"></i>Precios
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<!-- Modal Precios -->
<div class="modal fade" id="priceModal" tabindex="-1" aria-labelledby="priceModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="priceModalLabel">
                    <i class="fas fa-dollar-sign me-2"></i>Información de Precios
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
                <p>El valor de la cancha de fútbol es de <strong>24.000 pesos por hora</strong>.</p>
                <p>El valor de la piscina en temporada baja es de <strong>8.000 pesos</strong>.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!-- Carrusel Mejorado -->
<div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="https://scontent-scl2-1.xx.fbcdn.net/v/t39.30808-6/480238916_1136507338097923_4174833033910572682_n.jpg?_nc_cat=108&ccb=1-7&_nc_sid=86c6b0&_nc_eui2=AeFRPU-Ct69k0rW4euAkUipS1IbP2UU0a67Uhs_ZRTRrrr_RXX-iX2TbFvIRBDII5vkQmsFwcC_yj2wJcctl_Ue5&_nc_ohc=4vYw9DNCQoMQ7kNvwGJ1Z0D&_nc_oc=AdnUAx6v61FmToJRaxV0Ew7R_uSX5XCGus3NaKrhgnOOeVYL0E3VGZWU8fdtE_fbT5E2CGSP5keGngyyq1FR4jll&_nc_zt=23&_nc_ht=scontent-scl2-1.xx&_nc_gid=tSW8wBk6Ofj9rtrymJbzRA&oh=00_AfOhy59ILYI0YWNhxT4TLucMTX32HRQQHXaWA2fYA9DCPw&oe=6857E1EF" class="d-block w-100" class="d-block w-100" alt="Disfruta de nuestras instalaciones">
        <div class="carousel-caption d-none d-md-block">
          <h5>Disfruta de nuestras instalaciones</h5>
          <p>Vistas espectaculares y servicios de calidad</p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="https://scontent-scl2-1.xx.fbcdn.net/v/t39.30808-6/480846459_1142448664170457_5580398454510288839_n.jpg?_nc_cat=108&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeErhmSaZK5Jck2qyJMFmGDyixBK3m_X_ceLEEreb9f9x96tfnIob62QoyXq-T1RKHL6q_Li8wvV_UCgR7wqrWB8&_nc_ohc=yGFjnvDAFd4Q7kNvwG1SaCV&_nc_oc=Adk5hu73BTAwpepITdGeBIEvh4kNs1ERyCuTuUKmuejWUf4DKrDG2RRiE-4REAFVCa2M8elGdgNLsATDCJjaETLJ&_nc_zt=23&_nc_ht=scontent-scl2-1.xx&_nc_gid=7rSmmOWS6vD36w4nlH22SQ&oh=00_AfOPhL3VeYcatYvRPYcsr80XeAyZU7yz75F8Wbf9v6pY9g&oe=6857B186" class="d-block w-100" alt="Eventos inolvidables">
        <div class="carousel-caption d-none d-md-block">
          <h5>Eventos inolvidables</h5>
          <p>Celebra tus momentos especiales con nosotros</p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="https://scontent-scl2-1.xx.fbcdn.net/v/t39.30808-6/480291567_1136507021431288_5881670813450225351_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeF9Onig56aJJf8Ol-ZSC0uRJgKcZvQBz80mApxm9AHPzURjMMHyxbnTCwyzLVCRsohss0zq-03BoZ3fTFx9dk0D&_nc_ohc=4Teit_NCg7QQ7kNvwFzlppq&_nc_oc=AdkqCqrRAK4oBC_kX1QGzwDJSKlzofWFjioWrMxnxqd_fNAxh9unjDs9k-1c_8nmc9YYQ_LlNkKSO3LidZ9O0Oca&_nc_zt=23&_nc_ht=scontent-scl2-1.xx&_nc_gid=lqMHwtNbpeOYN6GkdyM-0Q&oh=00_AfMlAuqsHNfd09ldp0pH6fPBydCTGsaSW8ZWRC-BfjrI9g&oe=6857CF40" class="d-block w-100" alt="Áreas verdes">
        <div class="carousel-caption d-none d-md-block">
          <h5>Áreas Verdes</h5>
          <p>Espacios ideales para relajarte y disfrutar</p>
        </div>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Anterior</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Siguiente</span>
    </button>
</div>
  
<!-- Sección "Quiénes Somos" Mejorada -->
<div id="quienes-somos" class="content-section">
    <div class="container">
        <h2 class="titulo-seccion">Quiénes Somos</h2>
        <div class="row align-items-center">
            <div class="col-lg-6">
                <p class="descripcion">
                    En <strong>Vistas Quillayquen</strong>, nos dedicamos a ofrecer experiencias inolvidables en un entorno natural único. 
                    Contamos con instalaciones de primer nivel, ideales para eventos, reuniones familiares y actividades recreativas. 
                    Nuestro compromiso es brindar un servicio de calidad, asegurando que cada visita sea especial.
                </p>
                <p class="descripcion">
                    Desde piscinas y áreas verdes hasta quinchos y canchas deportivas, nuestro objetivo es ser el lugar perfecto para 
                    desconectarte y disfrutar de momentos únicos con tus seres queridos.
                </p>
                <div class="mt-4">
                    <button class="btn btn-primary" onclick="showForm('cotizacion')">
                        <i class="fas fa-calendar-alt me-2"></i>Planificar Evento
                    </button>
                </div>
            </div>
            <div class="col-lg-6 mt-4 mt-lg-0">
                <img src="https://scontent-scl2-1.xx.fbcdn.net/v/t39.30808-6/483615740_1152787483136575_4497225821990342272_n.jpg?_nc_cat=101&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeF_tDXBauwPcIefs1aU7twCZHgfkHxfkVxkeB-QfF-RXI6EUleMq_MjA20dIJvita-amngtk_K9U0dy2QkhKc8L&_nc_ohc=GFgqHZIcsFQQ7kNvwGQ5jif&_nc_oc=Adk90IjLfMr0OI7qUqa0_geyao57kMUF46wqQmhS-mFtjj9DHwHGE1qJ4MppfMdFNgs&_nc_zt=23&_nc_ht=scontent-scl2-1.xx&_nc_gid=9aEIpTNCvptd2sIWnMf8uw&oh=00_AfM-CPb9XxYo1Qj62QyxKok9uxlWtUtO47sJlEmmHFrZuA&oe=684779B6" alt="Piscina" class="img-fluid img-circle-small shadow">
            </div>
        </div>
    </div>
</div>

<!-- Sección "Misión y Visión" -->
<div id="mision-vision" class="content-section">
    <div class="container">
        <h2 class="titulo-seccion">Misión y Visión</h2>
        <div class="row">
            <div class="col-lg-6 mb-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h3 class="card-title text-center text-primary">
                            <i class="fas fa-bullseye me-2"></i>Misión
                        </h3>
                        <p class="card-text">
                            Brindar un espacio multifuncional que combine deportes, entretenimiento y eventos sociales, 
                            ofreciendo instalaciones de calidad y un ambiente único para disfrutar en familia, con amigos 
                            o en actividades profesionales.
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h3 class="card-title text-center text-primary">
                            <i class="fas fa-eye me-2"></i>Visión
                        </h3>
                        <p class="card-text">
                            Ser el centro líder entre nuestros competidores, reconocido por su excelencia en el servicio, 
                            infraestructura innovadora y compromiso con el bienestar de nuestros clientes, promoviendo 
                            la integración, la salud y el deporte en un solo lugar.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="text-center mt-3">
            <button class="btn btn-outline-primary" onclick="hideAllSections()">
                <i class="fas fa-times me-2"></i>Cerrar
            </button>
        </div>
    </div>
</div>
  
<!-- Servicios Mejorados -->
<div class="servicios-container">
    <h2 class="titulo-seccion">Nuestros Recintos</h2>
    
    <div class="tarjetas-wrapper">
        <!-- Tarjeta 1 - Piscinas -->
        <div class="tarjeta-servicio">
            <div class="imagen-container">
                <img src="https://scontent-scl2-1.xx.fbcdn.net/v/t39.30808-6/484338387_1152787399803250_9021000308489321049_n.jpg?_nc_cat=110&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeHgBwehLTKzqzkzfEmpE_grDrWRXEmTMIQOtZFcSZMwhGhD5ivihjU--E1dnGcxn3qhCjjIbVBupwcPFIAmMbt2&_nc_ohc=e5Nr5deH_hYQ7kNvwH4gp7O&_nc_oc=AdnH9tT4fXEEsEDRcc8r2AijGdyebOGhHVISU-BjX5C5K9ROKpVFQlGiDWF2Xcg-BHj85qrOWi_WoLNiKRZUBBth&_nc_zt=23&_nc_ht=scontent-scl2-1.xx&_nc_gid=8NXDhChpI6ub_eCyYsuunQ&oh=00_AfPVLkV_fD2K_ESiRE3_4Bwl-uYF6c8cL_DCtjU5xRdwbw&oe=6857B7CB" alt="Piscina" class="imagen-servicio">
            </div>
            <div class="contenido-tarjeta">
                <h3>Piscinas</h3>
                <p>Disfruta de nuestras piscinas con vistas espectaculares y áreas de descanso completamente equipadas para tu comodidad.</p>
                <button class="btn btn-outline-primary btn-sm mt-2" onclick="showForm('cotizacion')">
                    Reservar ahora
                </button>
            </div>
        </div>

        <!-- Tarjeta 2 - Canchas -->
        <div class="tarjeta-servicio">
            <div class="imagen-container">
                <img src="https://media.istockphoto.com/id/169975889/es/foto/campo-de-f%C3%BAtbol-en-la-noche.jpg?s=612x612&w=0&k=20&c=Q5bmpyJIJoj-W5e5W-yunMK6lms7P2SVyOYxuflX5YU=" alt="Canchas" class="imagen-servicio">
            </div>
            <div class="contenido-tarjeta">
                <h3>Canchas Deportivas</h3>
                <p>Canchas de fútbol  para todos los niveles, con iluminación profesional y mantenimiento de primera.</p>
                <button class="btn btn-outline-primary btn-sm mt-2" onclick="showForm('reserva')">
                    Reservar ahora
                </button>
            </div>
        </div>

        <!-- Tarjeta 3 - Quinchos -->
        <div class="tarjeta-servicio">
            <div class="imagen-container">
                <img src="https://scontent-scl2-1.xx.fbcdn.net/v/t39.30808-6/480927822_1138807271201263_1163546771899207418_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeGJa351564LmRlBpJfB82B4iQI1ynFGf2WJAjXKcUZ_ZfyFii3vJRF8I-v3o898nGRnC-D7i4yWHQ--kZYUT244&_nc_ohc=QAqf3DNji30Q7kNvwFeKQnD&_nc_oc=Adl1BxASrROMd9uLDY207IGAJzWS1e80fpla4yTJcT50BltjZwgLgBuZhUNx2DmILMJg7w6Y7M3yW6GiDB3HFuWs&_nc_zt=23&_nc_ht=scontent-scl2-1.xx&_nc_gid=hISAP4C-ohA0mOp8gIZhAA&oh=00_AfP3FSthnY0cxde5bCMQN9u6N6N-Xfd-yh9Elsslj03TaQ&oe=6857D6F8" alt="Quinchos" class="imagen-servicio">
            </div>
            <div class="contenido-tarjeta">
                <h3>Quinchos</h3>
                <p>Espacios perfectos para tus asados y reuniones, equipados con parrillas, mesas y áreas de descanso.</p>
                <button class="btn btn-outline-primary btn-sm mt-2" onclick="showForm('cotizacion')">
                    Reservar ahora
                </button>
            </div>
        </div>

        <!-- Tarjeta 4 - Áreas verdes -->
        <div class="tarjeta-servicio">
            <div class="imagen-container">
                <img src="https://scontent-scl2-1.xx.fbcdn.net/v/t39.30808-6/483847691_1152787509803239_1748480869798048834_n.jpg?_nc_cat=101&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeEKCZXlW5ycsFMzrFU9HGyazPsSsHom217M-xKweibbXgAdZXs52G9frQiTvW6uJaS07cNc3zWfYfEdr7VdMgPv&_nc_ohc=OR11RrZ1TE8Q7kNvwFhSUEN&_nc_oc=Adltjf0juowlDJAvZC5fZL3MjJxSWseCn-OwpCzWTgONjZ2cOqjeJSX0kEGNuPhvtT3vmeq3J8EbVQCWQSr99Hvb&_nc_zt=23&_nc_ht=scontent-scl2-1.xx&_nc_gid=g4oq6CN-eJr4rIGwcDUJmQ&oh=00_AfMTtVfQTAFWY7GZs2cdYggyE-S1Bv7znUf9Fg3nxAuS1w&oe=6857B329" alt="Áreas verdes" class="imagen-servicio">
            </div>
            <div class="contenido-tarjeta">
                <h3>Áreas Verdes</h3>
                <p>Amplias zonas de camping y áreas verdes para disfrutar de la naturaleza con toda la familia.</p>
                <button class="btn btn-outline-primary btn-sm mt-2" onclick="showForm('cotizacion')">
                    Reservar ahora
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Botones para formularios Mejorados -->
<div class="form-buttons">
    <button class="btn-reserva" onclick="showForm('reserva')">
        <i class="fas fa-calendar-check me-2"></i>Reservar Cancha
    </button>
    <button class="btn-cotizacion" onclick="showForm('cotizacion')">
        <i class="fas fa-clipboard-list me-2"></i>Planificar Evento
    </button>
<button class="btn-cancelar" onclick="showCancelForm()">
    <i class="fas fa-times-circle me-2"></i>Cancelar Reserva
</button>  
</div>

<!-- Modal de Reglas Mejorado -->
<div class="modal fade modal-rules" id="rulesModal" tabindex="-1" aria-labelledby="rulesModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="rulesModalLabel">
                    <i class="fas fa-clipboard-list me-2"></i>Reglas de los Recintos
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="rule-item">
                    <h5><i class="fas fa-clock me-2"></i>Horarios</h5>
                    <p>Respetar los horarios de apertura y cierre establecidos. El acceso fuera de horario no está permitido.</p>
                </div>
                
                <div class="rule-item">
                    <h5><i class="fas fa-wine-bottle me-2"></i>Bebidas Alcohólicas</h5>
                    <p>No se permite el ingreso de bebidas alcohólicas. El consumo de alcohol está estrictamente prohibido en todas las instalaciones.</p>
                </div>
                
                <div class="rule-item">
                    <h5><i class="fas fa-broom me-2"></i>Limpieza</h5>
                    <p>Mantener el área limpia y libre de basura. Utilizar los contenedores de residuos dispuestos en todo el recinto.</p>
                </div>
                
                <div class="rule-item">
                    <h5><i class="fas fa-user-tie me-2"></i>Personal</h5>
                    <p>Seguir las instrucciones del personal en todo momento. Ellos están para garantizar su seguridad y comodidad.</p>
                </div>
                
                <div class="rule-item">
                    <h5><i class="fas fa-exclamation-triangle me-2"></i>Responsabilidad</h5>
                    <p>El uso de las instalaciones es bajo su propio riesgo. La administración no se hace responsable por accidentes o daños causados por mal uso.</p>
                </div>
                
                <div class="rule-item">
                    <h5><i class="fas fa-swimming-pool me-2"></i>Artículo N°70 - Piscinas</h5>
                    <p>NO PODRÁN INGRESAR A LAS PISCINAS PERSONAS QUE PORTEN PARCHES O VENDAS DE CUALQUIER TIPO O AFECCIONES DE LA PIEL, DE LAS MUCOSAS O DE LAS VÍAS RESPIRATORIAS, ASIMISMO QUIENES ESTÉN BAJO EL EFECTO DEL ALCOHOL O DROGAS.</p>
                </div>
                
                <div class="rule-item">
                    <h5><i class="fas fa-shower me-2"></i>Artículo N°71 - Higiene</h5>
                    <p>LOS BAÑISTAS DEBEN TOMAR UN BAÑO JABONOSO COMPLETO DE DUCHA ANTES DE SALIR DE LOS CAMARINES. TODO BAÑISTA QUE SALGA DEL ÁREA DE ESPARCIMIENTO Y USE EL EXCUSADO, DEBERÁ LAVARSE CON JABÓN EN LAS DUCHAS ANTES DE REGRESAR A LA PISCINA. QUEDA PROHIBIDO ESCUPIR, SONARSE LA NARIZ O CONTAMINAR DE ALGUNA OTRA FORMA EL AGUA DE LA
                </div>
                
                <div class="rule-item">
                    <h5><i class="fas fa-ban me-2"></i>Artículo N°72 - Prohibiciones</h5>
                    <p>SE PROHÍBE EL INGRESO Y CONSUMO DE BEBIDAS ALCOHÓLICAS ASÍ COMO DE SUSTANCIAS PROHIBIDAS POR LA LEY DE DROGAS DENTRO DEL RECINTO DE LA PISCINA.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
                    <i class="fas fa-check me-2"></i>Entendido
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Aviso de mantención -->
<div id="mantencionAviso" style="display:none;background:#ffeb3b;color:#222;padding:16px 0;text-align:center;font-weight:600;font-size:1.1rem;">
    <i class="fas fa-tools me-2"></i>Las canchas están en mantención. No se pueden realizar reservas en este momento.
</div>

<!-- Formulario de Cancelación de Reserva -->
<div id="cancel-form" class="form-section">
    <div class="reservation-section">
        <h3 class="text-center mb-4">
            <i class="fas fa-times-circle me-2"></i>Cancelar Reserva
        </h3>
        <p class="text-center text-muted mb-4">Ingrese su RUT o número telefónico para buscar su reserva.</p>
        <form id="cancelReservationForm" class="needs-validation" novalidate>
            <div class="row g-3">
                <div class="col-8">
                    <div class="form-floating">
                        <input type="text" class="form-control" id="cancel-contact" placeholder="Ej: 12.345.678-9 o +56 9 1234 5678" required autofocus>
                        <label for="cancel-contact"><i class="fas fa-id-card me-2"></i>RUT o Teléfono</label>
                        <div class="invalid-feedback">Ingrese un RUT válido o un número telefónico válido.</div>
                    </div>
                </div>
                <div class="col-4 d-flex align-items-end">
                    <button type="button" class="btn btn-primary" id="btnBuscarReserva" style="padding: 6px 12px; font-size: 0.85rem; min-width: 120px;">
                        <i class="fas fa-search me-2"></i>Buscar Reserva
                    </button>
                </div>
            </div>
            <div id="listaReservasCancel" class="mt-4" style="display:none;">
                <label for="selectReservaCancel" class="form-label">Seleccione la reserva a cancelar:</label>
                <select id="selectReservaCancel" class="form-select"></select>
            </div>
            <div id="datosReservaCancel" class="mt-4" style="display:none;"></div>
            <div class="text-center mt-4 d-grid gap-2 d-md-flex justify-content-md-center">
                <button type="button" class="btn btn-danger btn-lg me-3" id="btnCancelarReserva" disabled>
                    <i class="fas fa-times-circle me-2"></i>Eliminar Reserva
                </button>
                <button type="button" class="btn btn-outline-secondary btn-lg" onclick="hideForms()">
                    <i class="fas fa-times me-2"></i>Cancelar
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Formulario de Reserva Mejorado -->
<div id="reserva-form" class="form-section">
    <div class="reservation-section">
        <h3 class="text-center mb-4">
            <i class="fas fa-calendar-check me-2"></i>Reserva de Cancha
        </h3>
        <p class="text-center text-muted mb-4">Complete el formulario para reservar su cancha. Valor: <strong>$24.000 por hora</strong>.</p>
        <form id="reservationForm" class="needs-validation" novalidate>
<fieldset class="border rounded-3 p-3 mb-3 shadow-sm">
    <legend class="float-none w-auto px-3 fs-6 fw-bold text-primary mb-2">
        <i class="fas fa-calendar-check me-2"></i>Datos de la Reserva
    </legend>
    <div class="row g-3">
        <div class="col-md-4">
            <div class="form-floating">
                <select class="form-select" id="cancha" required>
                    <option value="" disabled selected>Seleccione una cancha</option>
                    <option value="Cancha 1">Cancha 1</option>
                    <option value="Cancha 2">Cancha 2</option>
                </select>
                <label for="cancha"><i class="fas fa-futbol me-2"></i>Cancha</label>
                <div class="invalid-feedback">Seleccione una cancha.</div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-floating">
                <input type="date" class="form-control" id="date" required>
                <label for="date"><i class="fas fa-calendar-alt me-2"></i>Fecha de Reserva</label>
                <div class="invalid-feedback">Seleccione una fecha válida.</div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-floating">
                <select class="form-select" id="cantidad-horas" required>
                    <option value="1" selected>1 hora</option>
                    <option value="2">2 horas</option>
                    <option value="3">3 horas</option>
                    <option value="4">4 horas</option>
                    <option value="5">5 horas</option>
                </select>
                <label for="cantidad-horas"><i class="fas fa-clock me-2"></i>Cantidad de horas</label>
                <div class="invalid-feedback">Seleccione la cantidad de horas.</div>
            </div>
        </div>
    </div>
    <div class="mt-3">
        <label class="form-label fw-semibold">Horarios Disponibles</label>
        <div class="time-slots" id="timeSlots"></div>
        <input type="hidden" id="selected-time" required>
    </div>
</fieldset>
            <fieldset class="border rounded-3 p-3 mb-3 shadow-sm">
                <legend class="float-none w-auto px-3 fs-6 fw-bold text-primary mb-2">
                    <i class="fas fa-user me-2"></i>Datos de Contacto
                </legend>
                <div class="row g-3 align-items-center">
                <div class="col-md-4">
                    <div class="form-floating">
                        <input type="text" class="form-control" id="name" placeholder="Nombre completo" required>
                        <label for="name"><i class="fas fa-user me-2"></i>Nombre</label>
                        <div class="invalid-feedback">Ingrese su nombre completo.</div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-floating">
                        <input type="tel" class="form-control" id="phone" placeholder="+56 9 1234 5678" required>
                        <label for="phone"><i class="fas fa-phone me-2"></i>Teléfono</label>
                        <div class="invalid-feedback">Ingrese un teléfono válido.</div>
                    </div>
                </div>
                </div>
            </fieldset>
            <fieldset class="border rounded-3 p-3 mb-3 shadow-sm">
                <legend class="float-none w-auto px-3 fs-6 fw-bold text-primary mb-2">
                    <i class="fas fa-credit-card me-2"></i>Pago y Comentarios
                </legend>
                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="form-floating">
                            <select class="form-select" id="payment" required>
                                <option value="" disabled selected>Seleccione un método de pago</option>
                                <option value="Transferencia">Transferencia Bancaria (En el lugar)</option>
                                <option value="Efectivo">Efectivo en el lugar</option>
                                <option value="Tarjeta">Tarjeta de Débito (En el Lugar)</option>
                            </select>
                            <label for="payment"><i class="fas fa-credit-card me-2"></i>Método de Pago</label>
                            <div class="invalid-feedback">Seleccione un método de pago.</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating">
                            <textarea class="form-control" id="comments" placeholder="Comentarios adicionales" style="height: 58px"></textarea>
                            <label for="comments"><i class="fas fa-comment-dots me-2"></i>Comentarios</label>
                        </div>
                    </div>
                </div>
            </fieldset>
            <div class="alert alert-info mt-4">
                <i class="fas fa-info-circle me-2"></i>
                <strong>Nota:</strong> El pago debe realizarse antes de utilizar las instalaciones.
            </div>
            <div class="mb-3 text-end">
                <span id="total-pagar" class="fw-bold fs-5"></span>
            </div>
            <div class="text-center mt-4 d-grid gap-2 d-md-flex justify-content-md-center">
                <button type="submit" class="btn btn-primary btn-lg me-3">
                    <span class="spinner-border spinner-border-sm d-none" id="spinnerReserva" role="status" aria-hidden="true"></span>
                    <i class="fas fa-paper-plane me-2"></i>Enviar Reserva
                </button>
                <button type="button" class="btn btn-outline-secondary btn-lg" onclick="hideForms()">
                    <i class="fas fa-times me-2"></i>Cancelar
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Formulario de Solicitud de Cotización Mejorado -->
<div id="cotizacion-form" class="form-section">
    <div class="quote-section">
        <h3 class="text-center mb-4">
            <i class="fas fa-clipboard-list me-2"></i>Solicitud de Cotización
        </h3>
        <p class="text-center text-muted mb-4">Complete el formulario para solicitar una cotización para su evento.</p>
        <form id="quoteForm" class="needs-validation" novalidate>
            <fieldset class="border rounded-3 p-3 mb-3 shadow-sm">
                <legend class="float-none w-auto px-3 fs-6 fw-bold text-primary mb-2">
                    <i class="fas fa-user me-2"></i>Datos de Contacto
                </legend>
                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input type="text" class="form-control" id="contact-name" placeholder="Nombre completo" required>
                            <label for="contact-name"><i class="fas fa-user me-2"></i>Nombre Completo</label>
                            <div class="invalid-feedback">Ingrese su nombre completo.</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input type="tel" class="form-control" id="contact-phone" placeholder="+56 9 1234 5678" required>
                            <label for="contact-phone"><i class="fas fa-phone me-2"></i>Teléfono</label>
                            <div class="invalid-feedback">Ingrese un teléfono válido.</div>
                        </div>
                    </div>
                </div>
            </fieldset>
            <fieldset class="border rounded-3 p-3 mb-3 shadow-sm">
                <legend class="float-none w-auto px-3 fs-6 fw-bold text-primary mb-2">
                    <i class="fas fa-calendar-alt me-2"></i>Detalles del Evento
                </legend>
                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="form-floating">
                            <select class="form-select" id="quote-type" required>
                                <option value="" disabled selected>Seleccione un recinto</option>
                                <option value="Piscina">Piscina</option>
                                <option value="Cancha">Cancha</option>
                                <option value="Quincho">Quincho</option>
                                <option value="Áreas verdes">Áreas verdes</option>
                            </select>
                            <label for="quote-type"><i class="fas fa-home me-2"></i>Tipo de Recinto</label>
                            <div class="invalid-feedback">Seleccione un recinto.</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating">
                            <select class="form-select" id="event-type" required>
                                <option value="" disabled selected>Tipo de evento</option>
                                <option value="Cumpleaños">Cumpleaños</option>
                                <option value="Matrimonio">Matrimonio</option>
                                <option value="Corporativo">Corporativo</option>
                                <option value="Otro">Otro</option>
                            </select>
                            <label for="event-type"><i class="fas fa-glass-cheers me-2"></i>Tipo de Evento</label>
                            <div class="invalid-feedback">Seleccione el tipo de evento.</div>
                        </div>
                    </div>
                </div>
                <div class="row g-3 mt-2">
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input type="date" class="form-control" id="quote-date" required>
                            <label for="quote-date"><i class="fas fa-calendar-alt me-2"></i>Fecha tentativa</label>
                            <div class="invalid-feedback">Seleccione una fecha.</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating">
                            <textarea class="form-control" id="event-description" placeholder="Detalles adicionales" style="height: 58px"></textarea>
                            <label for="event-description"><i class="fas fa-comment-dots me-2"></i>Detalles adicionales</label>
                        </div>
                    </div>
                </div>
            </fieldset>
            <div class="text-center mt-4 d-grid gap-2 d-md-flex justify-content-md-center">
                <button type="submit" class="btn btn-primary btn-lg me-3">
                    <i class="fas fa-paper-plane me-2"></i>Enviar Cotización
                </button>
                <button type="button" class="btn btn-outline-secondary btn-lg" onclick="hideForms()">
                    <i class="fas fa-times me-2"></i>Cancelar
                </button>
            </div>
        </form>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const quoteForm = document.getElementById('quoteForm');
  if (quoteForm) {
    quoteForm.onsubmit = function(e) {
      e.preventDefault();
      const nombre = document.getElementById('contact-name').value;
      const telefono = document.getElementById('contact-phone').value;
      const recinto = document.getElementById('quote-type').value;
      const tipoEvento = document.getElementById('event-type').value;
      const fecha = document.getElementById('quote-date').value;
      const detalles = document.getElementById('event-description').value;

      const telefonoRegex = /^\+569\d{8}$/;
      if (!telefonoRegex.test(telefono)) {
        alert('📞 El número de teléfono debe tener el formato +569XXXXXXXX\nEjemplo: +56912345678');
        return false;
      }

      // Construir mensaje para Telegram
      const mensaje = `📢 *Nueva Solicitud de Cotización* 📢\n\n👤 *Nombre:* ${nombre}\n📱 *Teléfono:* ${telefono}\n🏠 *Recinto:* ${recinto}\n🎉 *Tipo de Evento:* ${tipoEvento}\n📅 *Fecha Tentativa:* ${fecha}\n📝 *Detalles:* ${detalles}`;

      // Enviar mensaje a Telegram
      enviarATelegram(mensaje);

      alert('✅ Cotización enviada correctamente. ¡Gracias!');
      quoteForm.reset();
      window.hideForms();
    };
  }
});
</script>

<!-- Footer Mejorado -->
<footer>
    <div class="container">
        <div class="footer-content">
            <div class="footer-links">
                <span class="separator">•</span>
                <a href="#" data-bs-toggle="modal" data-bs-target="#contactModal">
                    <i class="fas fa-phone-alt me-2"></i>Contáctanos
                </a>
                <span class="separator">•</span>
                <a href="#" onclick="toggleSection('quienes-somos')">
                    <i class="fas fa-info-circle me-2"></i>Quiénes Somos
                </a>
                <span class="separator">•</span>
                <a href="#" onclick="toggleSection('mision-vision')">
                    <i class="fas fa-bullseye me-2"></i>Misión y Visión
                </a>
            </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         <div class="social-icons mt-4">
                <a href="https://www.facebook.com/p/Vistas-de-Quillayquen-100052160036272/?locale=es_LA" target="_blank" title="Facebook">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://www.instagram.com/vistasdequillayquen_/" target="_blank" title="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://wa.me/56934068065" target="_blank" title="WhatsApp">
                    <i class="fab fa-whatsapp"></i>
                </a>
                <a href="https://www.google.com/maps/place/Centro+de+eventos+Vistas+de+Quillayquen/@-34.2682011,-71.0590876,17z/data=!3m1!4b1!4m6!3m5!1s0x96637bba4e76332b:0x636b8406103d2bb2!8m2!3d-34.2682011!4d-71.0590876!16s%2Fg%2F11fk1ltlwk?entry=ttu&g_ep=EgoyMDI1MDQzMC4xIKXMDSoASAFQAw%3D%3D" target="_blank" title="Ubicación">
                    <i class="fas fa-map-marker-alt"></i>
                </a>
                <a href="https://www.instagram.com/reel/DEpb5aMObIJ/?igsh=MTQ4djN0cWI1MGMzaw%3D%3D" target="_blank" title="Cómo llegar">
                    <i class="fas fa-route"></i>
                </a>
            </div>
            
            <div class="copyright mt-4">
                <p>&copy; 2025 <strong>Vistas Quillayquen</strong>. Todos los derechos reservados.</p>
            </div>
        </div>
    </div>
</footer>

<!-- Modal Contacto Mejorado -->
<div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="contactModalLabel">
                    <i class="fas fa-phone-alt me-2"></i>Contáctanos
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-4">
                    <h5 class="mb-3">
                        <i class="fas fa-phone-volume me-2"></i>Teléfonos
                    </h5>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                        </li>
                        <li class="mb-2">
                            <a href="tel:+56944422235" class="text-decoration-none">
                                <i class="fas fa-phone me-2"></i>+56 9 4442 2235
                            </a>
                        </li>
                        <li>
                            <a href="tel:+56944422232" class="text-decoration-none">
                                <i class="fas fa-phone me-2"></i>+56 9 4442 2232
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="mb-4">
                    <h5 class="mb-3">
                        <i class="fas fa-envelope me-2"></i>Correo Electrónico
                    </h5>
                    <p>
                        <a href="mailto:contacto@vistasquillayquen.cl" class="text-decoration-none">
                            <i class="fas fa-at me-2"></i>
                            vistasquillayquen@gmail.com
                        </a>
                    </p>
                </div>
                <div>
                    <h5 class="mb-3">
                        <i class="fas fa-map-marker-alt me-2"></i>Dirección
                    </h5>
                    <p>
                        <i class="fas fa-road me-2"></i>Vistas de Quillayquén, Avenida Quillayquén, Cruce de Parral, Coltauco
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
                    <i class="fas fa-check me-2"></i>Entendido
                </button>
            </div>
        </div>
    </div>
</div>
<!-- Botón para abrir el login de admin -->
<button class="btn btn-outline-warning btn-sm" id="adminLoginBtn" style="position:fixed;bottom:20px;right:20px;z-index:2000;">
    <i class="fas fa-user-shield"></i> Admin
</button>

<!-- Modal de Login Admin -->
<div class="modal fade" id="adminLoginModal" tabindex="-1" aria-labelledby="adminLoginModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <form id="adminLoginForm">
        <div class="modal-header bg-warning">
          <h5 class="modal-title" id="adminLoginModalLabel"><i class="fas fa-user-shield me-2"></i>Acceso Administrador</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="admin-user" class="form-label">Usuario</label>
            <input type="text" class="form-control" id="admin-user" required>
          </div>
          <div class="mb-3">
            <label for="admin-pass" class="form-label">Contraseña</label>
            <input type="password" class="form-control" id="admin-pass" required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-warning">Ingresar</button>
        </div>
      </form>
    </div>
  </div>
</div>


<!-- Panel de Administrador Mejorado y Visualmente Moderno -->
<style>
#adminPanelModal .modal-header {
  background: linear-gradient(90deg, #0033cc 60%, #0099ff 100%);
  color: #fff;
}
#adminPanelModal .modal-title {
  font-weight: 700;
  letter-spacing: 1px;
}
#adminPanelModal .admin-menu-btns .btn {
  min-width: 180px;
  font-size: 1.08rem;
  margin-bottom: 10px;
  box-shadow: 0 2px 8px rgba(0,51,204,0.08);
}
#adminPanelModal .admin-menu-btns {
  gap: 18px;
  flex-wrap: wrap;
  justify-content: center;
  margin-bottom: 30px;
}
#adminPanelModal .admin-section {
  display: none;
}
#adminPanelModal .admin-section.active {
  display: block;
  animation: fadeIn 0.4s;
}
#adminPanelModal .alert {
  font-size: 1.01rem;
}
#adminPanelModal .form-label {
  font-weight: 600;
}
#adminPanelModal .form-control, #adminPanelModal .form-select {
  border-radius: 10px;
}
</style>
<div class="modal fade" id="adminPanelModal" tabindex="-1" aria-labelledby="adminPanelModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="adminPanelModalLabel"><i class="fas fa-user-shield me-2"></i>Panel de Administrador</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        <div id="admin-main-menu" class="admin-section active">
          <div class="d-flex admin-menu-btns">
            <button class="btn btn-outline-primary" onclick="showAdminSection('admin-reserva-section')"><i class="fas fa-phone-alt me-2"></i>Reservas Telefónicas</button>
            <button class="btn btn-outline-danger" onclick="bloquearReservasAdmin()"><i class="fas fa-ban me-2"></i>Bloquear Reservas</button>
            <button class="btn btn-outline-success" onclick="habilitarReservasAdmin()"><i class="fas fa-check-circle me-2"></i>Habilitar Reservas</button>
            <button class="btn btn-outline-primary" onclick="restablecerHorarios()"><i class="fas fa-redo me-2"></i>Restablecer Horarios</button>
            <button class="btn btn-outline-warning" onclick="showAdminSection('admin-horario-section')"><i class="fas fa-clock me-2"></i>Horario Especial</button>
            <button class="btn btn-secondary" data-bs-dismiss="modal"><i class="fas fa-sign-out-alt me-2"></i>Cerrar Panel</button>
          </div>
        </div>
        <div id="admin-reserva-section" class="admin-section">
          <h4 class="text-primary mb-3"><i class="fas fa-phone-alt me-2"></i>Reserva Telefónica (Administrador)</h4>
          <div class="alert alert-info">Este formulario es exclusivo para reservas realizadas por el administrador vía telefónica.</div>
          <form id="adminReservaForm" class="needs-validation" novalidate>
            <!-- Copia del formulario de reserva de cancha -->
            <fieldset class="border rounded-3 p-3 mb-3 shadow-sm">
              <legend class="float-none w-auto px-3 fs-6 fw-bold text-primary mb-2">
                <i class="fas fa-calendar-check me-2"></i>Datos de la Reserva
              </legend>
              <div class="row g-3">
                <div class="col-md-4">
                  <div class="form-floating">
                    <select class="form-select" id="admin-cancha" required>
                      <option value="" disabled selected>Seleccione una cancha</option>
                      <option value="Cancha 1">Cancha 1</option>
                      <option value="Cancha 2">Cancha 2</option>
                    </select>
                    <label for="admin-cancha"><i class="fas fa-futbol me-2"></i>Cancha</label>
                    <div class="invalid-feedback">Seleccione una cancha.</div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-floating">
                    <input type="date" class="form-control" id="admin-date" required>
                    <label for="admin-date"><i class="fas fa-calendar-alt me-2"></i>Fecha de Reserva</label>
                    <div class="invalid-feedback">Seleccione una fecha válida.</div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-floating">
                    <select class="form-select" id="admin-cantidad-horas" required>
                      <option value="1" selected>1 hora</option>
                      <option value="2">2 horas</option>
                      <option value="3">3 horas</option>
                      <option value="4">4 horas</option>
                      <option value="5">5 horas</option>
                    </select>
                    <label for="admin-cantidad-horas"><i class="fas fa-clock me-2"></i>Cantidad de horas</label>
                    <div class="invalid-feedback">Seleccione la cantidad de horas.</div>
                  </div>
                </div>
              </div>
              <div class="mt-3">
                <label class="form-label fw-semibold">Horarios Disponibles</label>
                <div class="time-slots" id="adminTimeSlots"></div>
                <input type="hidden" id="admin-selected-time" required>
              </div>
            </fieldset>
            <fieldset class="border rounded-3 p-3 mb-3 shadow-sm">
              <legend class="float-none w-auto px-3 fs-6 fw-bold text-primary mb-2">
                <i class="fas fa-user me-2"></i>Datos de Contacto
              </legend>
              <div class="row g-3 align-items-center">
                <div class="col-md-4">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="admin-name" placeholder="Nombre completo" required>
                    <label for="admin-name"><i class="fas fa-user me-2"></i>Nombre</label>
                    <div class="invalid-feedback">Ingrese su nombre completo.</div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-floating">
                    <input type="tel" class="form-control" id="admin-phone" placeholder="+56 9 1234 5678" required>
                    <label for="admin-phone"><i class="fas fa-phone me-2"></i>Teléfono</label>
                    <div class="invalid-feedback">Ingrese un teléfono válido.</div>
                  </div>
                </div>
              </div>
            </fieldset>
            <fieldset class="border rounded-3 p-3 mb-3 shadow-sm">
              <legend class="float-none w-auto px-3 fs-6 fw-bold text-primary mb-2">
                <i class="fas fa-credit-card me-2"></i>Pago y Comentarios
              </legend>
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="form-floating">
                    <select class="form-select" id="admin-payment" required>
                      <option value="" disabled selected>Seleccione un método de pago</option>
                      <option value="Transferencia">Transferencia Bancaria (En el lugar)</option>
                      <option value="Efectivo">Efectivo en el lugar</option>
                      <option value="Tarjeta">Tarjeta de Crédito/Débito (En el Lugar)</option>
                    </select>
                    <label for="admin-payment"><i class="fas fa-credit-card me-2"></i>Método de Pago</label>
                    <div class="invalid-feedback">Seleccione un método de pago.</div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <textarea class="form-control" id="admin-comments" placeholder="Comentarios adicionales" style="height: 58px"></textarea>
                    <label for="admin-comments"><i class="fas fa-comment-dots me-2"></i>Comentarios</label>
                  </div>
                </div>
              </div>
            </fieldset>
            <div class="alert alert-info mt-4">
              <i class="fas fa-info-circle me-2"></i>
              <strong>Nota:</strong> El pago debe realizarse antes de utilizar las instalaciones.
            </div>
            <div class="mb-3 text-end">
              <span id="admin-total-pagar" class="fw-bold fs-5"></span>
            </div>
            <div class="text-center mt-4 d-grid gap-2 d-md-flex justify-content-md-center">
              <button type="submit" class="btn btn-primary btn-lg me-3">
                <span class="spinner-border spinner-border-sm d-none" id="spinnerAdminReserva" role="status" aria-hidden="true"></span>
                <i class="fas fa-paper-plane me-2"></i>Enviar Reserva Telefónica
              </button>
              <button type="button" class="btn btn-outline-secondary btn-lg" onclick="showAdminSection('admin-main-menu')">
                <i class="fas fa-arrow-left me-2"></i>Volver al Menú Admin
              </button>
            </div>
          </form>
        </div>
        <div id="admin-horario-section" class="admin-section">
          <h4 class="text-warning mb-3"><i class="fas fa-clock me-2"></i>Horario Especial</h4>
          <div class="alert alert-warning">Configura hasta qué hora se pueden tomar reservas en una fecha específica.</div>
          <div class="row g-3 align-items-end">
            <div class="col-md-6">
              <label for="fecha-horario-especial-admin" class="form-label">Fecha</label>
              <input type="date" class="form-control" id="fecha-horario-especial-admin">
            </div>
            <div class="col-md-4">
              <label for="hora-tope-especial-admin" class="form-label">Hora máxima</label>
              <input type="time" class="form-control" id="hora-tope-especial-admin">
            </div>
            <div class="col-md-2">
              <button class="btn btn-warning w-100" onclick="guardarHorarioEspecialAdmin()"><i class="fas fa-save me-2"></i>Guardar</button>
            </div>
          </div>
          <div class="text-center mt-4">
            <button class="btn btn-outline-secondary" onclick="showAdminSection('admin-main-menu')"><i class="fas fa-arrow-left me-2"></i>Volver al Menú Admin</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Firebase y función enviarATelegram para el panel admin -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Botón para abrir login admin
  const adminLoginBtn = document.getElementById('adminLoginBtn');
  if(adminLoginBtn){
    adminLoginBtn.onclick = function() {
      const loginModal = new bootstrap.Modal(document.getElementById('adminLoginModal'));
      loginModal.show();
    };
  }
  // Login admin y mostrar panel
  const adminLoginForm = document.getElementById('adminLoginForm');
  if(adminLoginForm){
    adminLoginForm.onsubmit = function(e) {
      e.preventDefault();
      const user = document.getElementById('admin-user').value;
      const pass = document.getElementById('admin-pass').value;
      if (user === 'admin' && pass === '1234') {
        bootstrap.Modal.getInstance(document.getElementById('adminLoginModal')).hide();
        setTimeout(() => {
          const panelModal = new bootstrap.Modal(document.getElementById('adminPanelModal'));
          panelModal.show();
          showAdminSection('admin-main-menu');
        }, 400);
      } else {
        alert('Usuario o contraseña incorrectos');
      }
    };
  }
});

// Configuración de tu proyecto Firebase
const firebaseConfig = {
  apiKey: "TU_API_KEY",
  authDomain: "quillayquen-b7b22.firebaseapp.com",
  databaseURL: "https://quillayquen-b7b22-default-rtdb.firebaseio.com/",
  projectId: "quillayquen-b7b22",
  storageBucket: "quillayquen-b7b22.appspot.com",
  messagingSenderId: "TU_MESSAGING_SENDER_ID",
  appId: "TU_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
// Función para enviar mensajes a Telegram
function enviarATelegram(mensaje) {
  const TELEGRAM_TOKEN = '7909302467:AAHJ8fU5cEBZL9eYZ5dEwP55PZ3-xy3D6Ew';
  const CHAT_ID = '-1002477396042';
  fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ chat_id: CHAT_ID, text: mensaje, parse_mode: 'Markdown' })
  });
}

// Función para restablecer horarios eliminando todas las reservas
window.restablecerHorarios = function() {
  if (!confirm('¿Está seguro que desea restablecer los horarios? Esto eliminará todas las reservas existentes.')) {
    return;
  }
  db.ref('reservas').remove()
    .then(() => {
      alert('Todos los horarios han sido restablecidos y están disponibles.');
    })
    .catch(error => {
      console.error('Error al restablecer horarios:', error);
      alert('Error al restablecer horarios. Intente nuevamente.');
    });
};

// Variable global para reservas
window.reservas = [];
// Cargar reservas desde Firebase y mantener actualizada la variable global
function cargarReservasDesdeFirebase() {
  db.ref('reservas').on('value', function(snapshot) {
    const data = snapshot.val();
    if (data) {
      // Convertir objeto a array y normalizar campos
      window.reservas = Object.values(data).map(r => ({
        ...r,
        fecha: r.fecha || '',
        cancha: r.cancha || '',
        recinto: r.recinto || '',
        bloques: r.bloques || [],
        hora: r.hora || ''
      }));
    } else {
      window.reservas = [];
    }
  });
}
cargarReservasDesdeFirebase();

// Escuchar cambios en mantención y actualizar UI
function actualizarMantencionUI(mantencion) {
  const aviso = document.getElementById('mantencionAviso');
  const btnReserva = document.querySelector('.btn-reserva');
  if (mantencion) {
    if (aviso) aviso.style.display = 'block';
    if (btnReserva) btnReserva.style.display = 'none';
  } else {
    if (aviso) aviso.style.display = 'none';
    if (btnReserva) btnReserva.style.display = '';
  }
}
db.ref('mantencion').on('value', function(snapshot) {
  actualizarMantencionUI(!!snapshot.val());
});

// Asegura que las funciones estén en el scope global para los botones del panel admin
window.showAdminSection = function(sectionId) {
  document.querySelectorAll('#adminPanelModal .admin-section').forEach(sec => sec.classList.remove('active'));
  document.getElementById(sectionId).classList.add('active');
};
window.bloquearReservasAdmin = function() {
  db.ref('mantencion').set(true);
  // UI feedback inmediato
  actualizarMantencionUI(true);
  alert('¡Reservas bloqueadas por mantención!');
};
window.habilitarReservasAdmin = function() {
  db.ref('mantencion').set(false);
  // UI feedback inmediato
  actualizarMantencionUI(false);
  alert('¡Reservas habilitadas nuevamente!');
};
// Mostrar formularios principales
window.showForm = function(tipo) {
  hideAllSections();
  if (tipo === 'reserva') {
    const reservaForm = document.getElementById('reserva-form');
    if (reservaForm) {
      reservaForm.style.display = 'block';
      reservaForm.classList.add('active');
    }
    // Generar horarios disponibles al mostrar el formulario de reserva
    generarHorariosDisponibles();
  } else if (tipo === 'cotizacion') {
    const cotizacionForm = document.getElementById('cotizacion-form');
    if (cotizacionForm) {
      cotizacionForm.style.display = 'block';
      cotizacionForm.classList.add('active');
    }
  }
};
window.showCancelForm = function() {
  hideAllSections();
  document.getElementById('cancel-form').classList.add('active');
};
// Oculta todos los formularios y secciones principales
window.hideAllSections = function() {
  document.querySelectorAll('.form-section, .content-section').forEach(function(sec) {
    sec.classList.remove('active');
  });
};
// Oculta todos los formularios (alias para compatibilidad)
window.hideForms = function() {
  window.hideAllSections();
};
// Generar horarios disponibles para reservas telefónicas admin (igual que usuario)
window.generarHorariosDisponiblesAdmin = function() {
  const canchaSelect = document.getElementById('admin-cancha');
  const dateInput = document.getElementById('admin-date');
  const cantidadHoras = parseInt(document.getElementById('admin-cantidad-horas').value, 10);
  const selectedCancha = canchaSelect.value;
  const selectedDate = dateInput.value;
  const timeSlotsContainer = document.getElementById('adminTimeSlots');
  const totalPagar = document.getElementById('admin-total-pagar');
  const valorHora = 24000;
  timeSlotsContainer.innerHTML = '';
  totalPagar.textContent = '';
  if (!selectedCancha) {
    timeSlotsContainer.innerHTML = '<p class="text-muted">Seleccione una cancha primero</p>';
    return;
  }
  if (!selectedDate) {
    timeSlotsContainer.innerHTML = '<p class="text-muted">Seleccione una fecha primero</p>';
    return;
  }
  db.ref('horarios_especiales/' + selectedDate).once('value').then(snapshot => {
    let horaTope = snapshot.val() || "23:00";
    const reservasFechaCancha = reservas.filter(reserva => reserva.fecha === selectedDate && reserva.cancha === selectedCancha);
    let horasOcupadas = [];
    reservasFechaCancha.forEach(reserva => {
      if (Array.isArray(reserva.bloques)) {
        horasOcupadas = horasOcupadas.concat(reserva.bloques);
      } else if (reserva.hora) {
        horasOcupadas.push(reserva.hora);
      }
    });
    const horaTopeNum = parseInt(horaTope.split(':')[0], 10);
    let bloques = [];
    for (let hora = 12; hora <= horaTopeNum - cantidadHoras; hora++) {
      let bloqueDisponible = true;
      let bloqueHoras = [];
      for (let i = 0; i < cantidadHoras; i++) {
        const horaBloque = `${(hora + i).toString().padStart(2, '0')}:00`;
        if (horasOcupadas.includes(horaBloque)) {
          bloqueDisponible = false;
          break;
        }
        bloqueHoras.push(horaBloque);
      }
      bloques.push({
        inicio: `${hora.toString().padStart(2, '0')}:00`,
        fin: `${(hora + cantidadHoras).toString().padStart(2, '0')}:00`,
        horas: bloqueHoras,
        disponible: bloqueDisponible
      });
    }
    bloques.forEach((bloque, idx) => {
      const slotElement = document.createElement('div');
      slotElement.className = `time-slot ${bloque.disponible ? '' : 'booked'}`;
      slotElement.textContent = `${bloque.inicio} - ${bloque.fin}`;
      slotElement.dataset.inicio = bloque.inicio;
      slotElement.dataset.fin = bloque.fin;
      slotElement.dataset.horas = JSON.stringify(bloque.horas);
      if (bloque.disponible) {
        slotElement.addEventListener('click', function() {
          document.querySelectorAll('#adminTimeSlots .time-slot').forEach(slot => {
            slot.classList.remove('selected');
          });
          this.classList.add('selected');
          document.getElementById('admin-selected-time').value = bloque.inicio;
          totalPagar.textContent = `Total a pagar: $${(valorHora * cantidadHoras).toLocaleString('es-CL')}`;
        });
      } else {
        slotElement.title = "Bloque no disponible";
      }
      timeSlotsContainer.appendChild(slotElement);
    });
    const selectedSlot = document.querySelector('#adminTimeSlots .time-slot.selected');
    if (selectedSlot) {
      totalPagar.textContent = `Total a pagar: $${(valorHora * cantidadHoras).toLocaleString('es-CL')}`;
    }
  });
};
// Listeners para actualizar horarios admin
['admin-cancha','admin-date','admin-cantidad-horas'].forEach(id => {
  const el = document.getElementById(id);
  if(el) el.addEventListener('change', window.generarHorariosDisponiblesAdmin);
});
// Enviar reserva telefónica a Telegram y mostrar botón volver
const adminReservaForm = document.getElementById('adminReservaForm');
if(adminReservaForm){
  adminReservaForm.onsubmit = function(e) {
    e.preventDefault();
    const nombre = document.getElementById('admin-name').value;
    const telefono = document.getElementById('admin-phone').value;
    const cancha = document.getElementById('admin-cancha').value;
    const fecha = document.getElementById('admin-date').value;
    const horas = document.getElementById('admin-cantidad-horas').value;
    const horario = document.getElementById('admin-selected-time').value;
    const pago = document.getElementById('admin-payment').value;
    const comentarios = document.getElementById('admin-comments').value;
    const mensaje = `*Reserva realizada por ADMINISTRADOR*\n*Nombre:* ${nombre}\n*Teléfono:* ${telefono}\n*Cancha:* ${cancha}\n*Fecha:* ${fecha}\n*Hora:* ${horario}\n*Duración:* ${horas} hora(s)\n*Pago:* ${pago}\n*Comentarios:* ${comentarios}`;
    enviarATelegram(mensaje);
    document.getElementById('adminReservaForm').reset();
    document.getElementById('admin-reserva-section').innerHTML = `
      <div class='alert alert-success text-center'><i class='fas fa-check-circle me-2'></i>Reserva enviada correctamente.</div>
      <div class='text-center mt-4'><button class='btn btn-outline-primary btn-sm' onclick="showAdminSection('admin-main-menu')"><i class='fas fa-arrow-left me-2'></i>Volver al Menú Admin</button></div>
    `;
  };
}

// Nueva función para generar horarios disponibles para formulario normal de reserva
window.generarHorariosDisponibles = function() {
  const canchaSelect = document.getElementById('cancha');
  const dateInput = document.getElementById('date');
  const cantidadHoras = parseInt(document.getElementById('cantidad-horas').value, 10);
  const selectedCancha = canchaSelect.value;
  const selectedDate = dateInput.value;
  const timeSlotsContainer = document.getElementById('timeSlots');
  const totalPagar = document.getElementById('total-pagar');
  const valorHora = 24000;
  timeSlotsContainer.innerHTML = '';
  totalPagar.textContent = '';
  if (!selectedCancha) {
    timeSlotsContainer.innerHTML = '<p class="text-muted">Seleccione una cancha primero</p>';
    return;
  }
  if (!selectedDate) {
    timeSlotsContainer.innerHTML = '<p class="text-muted">Seleccione una fecha primero</p>';
    return;
  }
  db.ref('horarios_especiales/' + selectedDate).once('value').then(snapshot => {
    let horaTope = snapshot.val() || "23:00";
    const reservasFechaCancha = reservas.filter(reserva => reserva.fecha === selectedDate && reserva.cancha === selectedCancha);
    let horasOcupadas = [];
    reservasFechaCancha.forEach(reserva => {
      if (Array.isArray(reserva.bloques) && reserva.bloques.length > 0) {
        horasOcupadas = horasOcupadas.concat(reserva.bloques);
      } else if (reserva.hora && reserva.cantidadHoras) {
        // Agregar todas las horas ocupadas según la duración
        const horaInicio = parseInt(reserva.hora.split(':')[0], 10);
        for (let i = 0; i < reserva.cantidadHoras; i++) {
          const horaBloque = `${(horaInicio + i).toString().padStart(2, '0')}:00`;
          horasOcupadas.push(horaBloque);
        }
      } else if (reserva.hora) {
        horasOcupadas.push(reserva.hora);
      }
    });
    const horaTopeNum = parseInt(horaTope.split(':')[0], 10);
    let bloques = [];
    for (let hora = 12; hora <= horaTopeNum - cantidadHoras; hora++) {
      let bloqueDisponible = true;
      let bloqueHoras = [];
      for (let i = 0; i < cantidadHoras; i++) {
        const horaBloque = `${(hora + i).toString().padStart(2, '0')}:00`;
        if (horasOcupadas.includes(horaBloque)) {
          bloqueDisponible = false;
          break;
        }
        bloqueHoras.push(horaBloque);
      }
      bloques.push({
        inicio: `${hora.toString().padStart(2, '0')}:00`,
        fin: `${(hora + cantidadHoras).toString().padStart(2, '0')}:00`,
        horas: bloqueHoras,
        disponible: bloqueDisponible
      });
    }
    bloques.forEach((bloque, idx) => {
      const slotElement = document.createElement('div');
      slotElement.className = `time-slot ${bloque.disponible ? '' : 'booked'}`;
      slotElement.textContent = `${bloque.inicio} - ${bloque.fin}`;
      slotElement.dataset.inicio = bloque.inicio;
      slotElement.dataset.fin = bloque.fin;
      slotElement.dataset.horas = JSON.stringify(bloque.horas);
      if (bloque.disponible) {
        slotElement.addEventListener('click', function() {
          document.querySelectorAll('#timeSlots .time-slot').forEach(slot => {
            slot.classList.remove('selected');
          });
          this.classList.add('selected');
          document.getElementById('selected-time').value = bloque.inicio;
          totalPagar.textContent = `Total a pagar: $${(valorHora * cantidadHoras).toLocaleString('es-CL')}`;
        });
      } else {
        slotElement.title = "Bloque no disponible";
      }
      timeSlotsContainer.appendChild(slotElement);
    });
    const selectedSlot = document.querySelector('#timeSlots .time-slot.selected');
    if (selectedSlot) {
      totalPagar.textContent = `Total a pagar: $${(valorHora * cantidadHoras).toLocaleString('es-CL')}`;
    }
  });
};

// Agregar event listeners para actualizar horarios dinámicamente
document.addEventListener('DOMContentLoaded', function() {
  const canchaSelect = document.getElementById('cancha');
  const dateInput = document.getElementById('date');
  const cantidadHorasSelect = document.getElementById('cantidad-horas');
  const phoneInput = document.getElementById('phone');
  const reservationForm = document.getElementById('reservationForm');

  if (canchaSelect) canchaSelect.addEventListener('change', generarHorariosDisponibles);
  if (dateInput) dateInput.addEventListener('change', generarHorariosDisponibles);
  if (cantidadHorasSelect) cantidadHorasSelect.addEventListener('change', generarHorariosDisponibles);

    if (reservationForm && phoneInput) {
      // Función para crear lock temporal en Firebase
      function crearLock(cancha, fecha, hora, duracion) {
        const lockKey = `${cancha}_${fecha}_${hora}`;
        const lockRef = db.ref('locks/' + lockKey);
        const now = Date.now();
        const lockExpiry = now + 5 * 60 * 1000; // 5 minutos en ms

        return lockRef.transaction(currentData => {
          if (currentData === null || currentData.expiry < now) {
            return { expiry: lockExpiry };
          }
          return; // Abort transaction si lock existe y no expiró
        });
      }

      // Función para eliminar lock
      function eliminarLock(cancha, fecha, hora) {
        const lockKey = `${cancha}_${fecha}_${hora}`;
        const lockRef = db.ref('locks/' + lockKey);
        return lockRef.remove();
      }

      reservationForm.onsubmit = function(e) {
        e.preventDefault();
        const nombre = document.getElementById('name').value;
        const telefono = phoneInput.value;
        const cancha = canchaSelect.value;
        const fecha = dateInput.value;
        const cantidadHoras = parseInt(cantidadHorasSelect.value, 10);
        const horario = document.getElementById('selected-time').value;
        const pago = document.getElementById('payment').value;
        const comentarios = document.getElementById('comments').value;

        const telefonoRegex = /^\+569\d{8}$/;
        if (!telefonoRegex.test(telefono)) {
          alert('📞 El número de teléfono debe tener el formato +569XXXXXXXX\nEjemplo: +56912345678');
          phoneInput.focus();
          return false;
        }

        if (!horario) {
          alert('⏰ Por favor, seleccione un horario disponible para la reserva.');
          return false;
        }

        // Deshabilitar botón para evitar envíos múltiples
        const submitButton = reservationForm.querySelector('button[type="submit"]');
        submitButton.disabled = true;

        // Intentar crear lock para la reserva
        crearLock(cancha, fecha, horario, cantidadHoras).then(result => {
          if (!result.committed) {
            alert('⚠️ Lo sentimos, este horario ya está reservado. Por favor, seleccione otro.');
            submitButton.disabled = false;
            return;
          }

          // Guardar reserva en Firebase
          const nuevaReserva = {
            nombre,
            telefono,
            cancha,
            fecha,
            bloques: [], // Se puede agregar lógica para bloques si es necesario
            hora: horario,
            cantidadHoras,
            pago,
            comentarios
          };

          db.ref('reservas').push(nuevaReserva)
            .then(() => {
              // Enviar mensaje a Telegram
              const mensaje = `📢 *Nueva Reserva de Cancha* 📢\n\n👤 *Nombre:* ${nombre}\n📱 *Teléfono:* ${telefono}\n⚽ *Cancha:* ${cancha}\n📅 *Fecha:* ${fecha}\n⏰ *Hora:* ${horario}\n🕒 *Duración:* ${cantidadHoras} hora(s)\n💳 *Pago:* ${pago}\n📝 *Comentarios:* ${comentarios}`;
              enviarATelegram(mensaje);

              // Eliminar lock tras guardar reserva
              eliminarLock(cancha, fecha, horario);

              alert('✅ Reserva enviada correctamente. ¡Gracias!');
              reservationForm.reset();
              document.getElementById('timeSlots').innerHTML = '';
              document.getElementById('total-pagar').textContent = '';
              submitButton.disabled = false;
            })
            .catch(error => {
              alert('❌ Error al enviar la reserva. Por favor, intente nuevamente.');
              console.error('Error Firebase:', error);
              // Eliminar lock si falla guardar reserva
              eliminarLock(cancha, fecha, horario);
              submitButton.disabled = false;
            });
        }).catch(error => {
          alert('❌ Error al verificar disponibilidad. Por favor, intente nuevamente.');
          console.error('Error al crear lock:', error);
          submitButton.disabled = false;
        });
      };
    }
});
</script>
<script>
  // Función para mostrar/ocultar secciones por id
  function toggleSection(sectionId) {
    const sections = document.querySelectorAll('.content-section');
    sections.forEach(section => {
      if (section.id === sectionId) {
        if (section.style.display === 'block' || section.classList.contains('active')) {
          section.style.display = 'none';
          section.classList.remove('active');
        } else {
          section.style.display = 'block';
          section.classList.add('active');
        }
      } else {
        section.style.display = 'none';
        section.classList.remove('active');
      }
    });
    // También ocultar la galería si está abierta
    const gallery = document.getElementById('gallery-section');
    if (gallery) {
      gallery.style.display = 'none';
      gallery.classList.remove('active');
    }
  }

  // Función para mostrar/ocultar la galería
  function toggleGallery() {
    const gallery = document.getElementById('gallery-section');
    if (!gallery) return;
    if (gallery.style.display === 'block' || gallery.classList.contains('active')) {
      gallery.style.display = 'none';
      gallery.classList.remove('active');
    } else {
      // Ocultar otras secciones
      hideAllSections();
      gallery.style.display = 'block';
      gallery.classList.add('active');
    }
  }

  // Función para ocultar todas las secciones y formularios
  function hideAllSections() {
    const sections = document.querySelectorAll('.content-section, .form-section');
    sections.forEach(section => {
      section.style.display = 'none';
      section.classList.remove('active');
    });
  }

  // Función para mostrar el formulario de cancelación
  function showCancelForm() {
    hideAllSections();
    const cancelForm = document.getElementById('cancel-form');
    if (cancelForm) {
      cancelForm.style.display = 'block';
      cancelForm.classList.add('active');
    }
  }

  // Función para guardar horario especial en Firebase
  function guardarHorarioEspecialAdmin() {
    const fechaInput = document.getElementById('fecha-horario-especial-admin');
    const horaInput = document.getElementById('hora-tope-especial-admin');
    const fecha = fechaInput.value;
    const horaMaxima = horaInput.value;

    if (!fecha) {
      alert('Por favor, seleccione una fecha válida.');
      return;
    }
    if (!horaMaxima) {
      alert('Por favor, seleccione una hora máxima válida.');
      return;
    }

    // Guardar en Firebase
    db.ref('horarios_especiales/' + fecha).set(horaMaxima)
      .then(() => {
        alert('Horario especial guardado correctamente.');
        // Opcional: cerrar modal o limpiar inputs
        fechaInput.value = '';
        horaInput.value = '';
        // Actualizar UI si es necesario
      })
      .catch((error) => {
        console.error('Error al guardar horario especial:', error);
        alert('Error al guardar el horario especial. Intente nuevamente.');
      });
  }

  // Funcionalidad para buscar y cancelar reservas
  document.addEventListener('DOMContentLoaded', function() {
    const btnBuscarReserva = document.getElementById('btnBuscarReserva');
    const cancelContactInput = document.getElementById('cancel-contact');
    const listaReservasCancel = document.getElementById('listaReservasCancel');
    const selectReservaCancel = document.getElementById('selectReservaCancel');
    const datosReservaCancel = document.getElementById('datosReservaCancel');
    const btnCancelarReserva = document.getElementById('btnCancelarReserva');
    let reservasEncontradas = {};

    btnBuscarReserva.addEventListener('click', function() {
      const contacto = cancelContactInput.value.trim();
      if (!contacto) {
        alert('Por favor, ingrese un RUT o número telefónico válido.');
        return;
      }
      // Limpiar resultados previos
      selectReservaCancel.innerHTML = '';
      datosReservaCancel.style.display = 'none';
      datosReservaCancel.innerHTML = '';
      btnCancelarReserva.disabled = true;
      reservasEncontradas = {};

      // Buscar reservas por teléfono
      db.ref('reservas').orderByChild('telefono').equalTo(contacto).once('value')
        .then(snapshot => {
          if (snapshot.exists()) {
            reservasEncontradas = snapshot.val();
            mostrarReservasEncontradas(reservasEncontradas);
          } else {
            // Buscar por RUT si no encontró por teléfono
            db.ref('reservas').orderByChild('rut').equalTo(contacto).once('value')
              .then(snapRut => {
                if (snapRut.exists()) {
                  reservasEncontradas = snapRut.val();
                  mostrarReservasEncontradas(reservasEncontradas);
                } else {
                  alert('No se encontraron reservas con ese RUT o teléfono.');
                  listaReservasCancel.style.display = 'none';
                }
              });
          }
        })
        .catch(error => {
          console.error('Error buscando reservas:', error);
          alert('Error al buscar reservas. Intente nuevamente.');
        });
    });

    function mostrarReservasEncontradas(reservas) {
      listaReservasCancel.style.display = 'block';
      selectReservaCancel.innerHTML = '';
      Object.entries(reservas).forEach(([key, reserva]) => {
        const option = document.createElement('option');
        option.value = key;
        option.textContent = `Fecha: ${reserva.fecha || 'N/A'}, Cancha: ${reserva.cancha || 'N/A'}, Hora: ${reserva.hora || 'N/A'}`;
        selectReservaCancel.appendChild(option);
      });
      mostrarDatosReserva(selectReservaCancel.value);
      btnCancelarReserva.disabled = false;
    }

    selectReservaCancel.addEventListener('change', function() {
      mostrarDatosReserva(this.value);
    });

    function mostrarDatosReserva(key) {
      const reserva = reservasEncontradas[key];
      if (!reserva) {
        datosReservaCancel.style.display = 'none';
        datosReservaCancel.innerHTML = '';
        btnCancelarReserva.disabled = true;
        return;
      }
      datosReservaCancel.style.display = 'block';
      datosReservaCancel.innerHTML = `
        <div class="alert alert-info">
          <p><strong>Reserva seleccionada:</strong></p>
          <p>Nombre: ${reserva.nombre || 'N/A'}</p>
          <p>Cancha: ${reserva.cancha || 'N/A'}</p>
          <p>Fecha: ${reserva.fecha || 'N/A'}</p>
          <p>Hora: ${reserva.hora || 'N/A'}</p>
        </div>
      `;
      btnCancelarReserva.disabled = false;
    }

    btnCancelarReserva.addEventListener('click', function() {
      const key = selectReservaCancel.value;
      if (!key) {
        alert('Seleccione una reserva para cancelar.');
        return;
      }
      if (confirm('¿Está seguro que desea cancelar esta reserva?')) {
        const reserva = reservasEncontradas[key];
        db.ref('reservas/' + key).remove()
          .then(() => {
            alert('Reserva cancelada correctamente.');
            // Enviar mensaje a Telegram
            const mensaje = `❌ *Reserva Cancelada* ❌\n\n👤 *Nombre:* ${reserva.nombre || 'N/A'}\n📱 *Teléfono:* ${reserva.telefono || 'N/A'}\n⚽ *Cancha:* ${reserva.cancha || 'N/A'}\n📅 *Fecha:* ${reserva.fecha || 'N/A'}\n⏰ *Hora:* ${reserva.hora || 'N/A'}`;
            enviarATelegram(mensaje);
            // Limpiar UI
            cancelContactInput.value = '';
            listaReservasCancel.style.display = 'none';
            selectReservaCancel.innerHTML = '';
            datosReservaCancel.style.display = 'none';
            datosReservaCancel.innerHTML = '';
            btnCancelarReserva.disabled = true;
            reservasEncontradas = {};
          })
          .catch(error => {
            console.error('Error al cancelar reserva:', error);
            alert('Error al cancelar la reserva. Intente nuevamente.');
          });
      }
    });
  });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
